if Library then
	Library:Unload()
end

local LoadTick = os.clock()

local Library do
	local Workspace = game:GetService("Workspace")
	local UserInputService = game:GetService("UserInputService")
	local Players = game:GetService("Players")
	local HttpService = game:GetService("HttpService")
	local RunService = game:GetService("RunService")
	local CoreGui = cloneref and cloneref(game:GetService("CoreGui")) or game:GetService("CoreGui")
	local TweenService = game:GetService("TweenService")

	gethui = gethui or function()
		return CoreGui
	end

	local LocalPlayer = Players.LocalPlayer
	local Camera = Workspace.CurrentCamera
	local Mouse = LocalPlayer:GetMouse()

	local FromRGB = Color3.fromRGB
	local FromHSV = Color3.fromHSV
	local FromHex = Color3.fromHex

	local RGBSequence = ColorSequence.new
	local RGBSequenceKeypoint = ColorSequenceKeypoint.new
	local NumSequence = NumberSequence.new
	local NumSequenceKeypoint = NumberSequenceKeypoint.new

	local UDim2New = UDim2.new
	local UDimNew = UDim.new
	local Vector2New = Vector2.new

	local MathClamp = math.clamp
	local MathFloor = math.floor
	local MathAbs = math.abs
	local MathSin = math.sin

	local TableInsert = table.insert
	local TableFind = table.find
	local TableRemove = table.remove
	local TableConcat = table.concat
	local TableClone = table.clone
	local TableUnpack = table.unpack

	local StringFormat = string.format
	local StringFind = string.find
	local StringGSub = string.gsub
	local StringLower = string.lower
	local StringLen = string.len

	local InstanceNew = Instance.new

	local RectNew = Rect.new

	local IsMobile = UserInputService.TouchEnabled or false

	Library = {
		Theme =  { },

		MenuKeybind = tostring(Enum.KeyCode.RightControl), 
		Flags = { },

		Tween = {
			Time = 0.2,
			Style = Enum.EasingStyle.Quad,
			Direction = Enum.EasingDirection.Out
		},

		FadeSpeed = 0.2,

		Folders = {
			Directory = "Archangel",
			Configs = "Archangel/Configs",
			Assets = "Archangel/Assets",
		},

		Images = {
			["Saturation"] = {"Saturation.png", "https://github.com/sametexe001/images/blob/main/saturation.png?raw=true" },
			["Value"] = { "Value.png", "https://github.com/sametexe001/images/blob/main/value.png?raw=true" },
			["Hue"] = { "Hue.png", "https://github.com/sametexe001/images/blob/main/horizontalhue.png?raw=true" },
			["Checkers"] = { "Checkers.png", "https://github.com/sametexe001/images/blob/main/checkers.png?raw=true" },
		},

		Pages = { },
		Sections = { },

		Connections = { },
		Threads = { },

		ThemeMap = { },
		ThemeItems = { },

		CopiedColor = nil,

		OpenFrames = { },

		CurrentPage = nil,

		SearchItems = { },

		SetFlags = { },

		UnnamedConnections = 0,
		UnnamedFlags = 0,

		Holder = nil,
		NotifHolder = nil,
		UnusedHolder = nil,
		Font = nil,
		KeyList = nil,

		Colorpickers = { },
	}

	Library.__index = Library
	Library.Sections.__index = Library.Sections
	Library.Pages.__index = Library.Pages

	local Keys = {
		["Unknown"]           = "Unknown",
		["Backspace"]         = "Back",
		["Tab"]               = "Tab",
		["Clear"]             = "Clear",
		["Return"]            = "Return",
		["Pause"]             = "Pause",
		["Escape"]            = "Escape",
		["Space"]             = "Space",
		["QuotedDouble"]      = '"',
		["Hash"]              = "#",
		["Dollar"]            = "$",
		["Percent"]           = "%",
		["Ampersand"]         = "&",
		["Quote"]             = "'",
		["LeftParenthesis"]   = "(",
		["RightParenthesis"]  = " )",
		["Asterisk"]          = "*",
		["Plus"]              = "+",
		["Comma"]             = ",",
		["Minus"]             = "-",
		["Period"]            = ".",
		["Slash"]             = "`",
		["Three"]             = "3",
		["Seven"]             = "7",
		["Eight"]             = "8",
		["Colon"]             = ":",
		["Semicolon"]         = ";",
		["LessThan"]          = "<",
		["GreaterThan"]       = ">",
		["Question"]          = "?",
		["Equals"]            = "=",
		["At"]                = "@",
		["LeftBracket"]       = "LeftBracket",
		["RightBracket"]      = "RightBracked",
		["BackSlash"]         = "BackSlash",
		["Caret"]             = "^",
		["Underscore"]        = "_",
		["Backquote"]         = "`",
		["LeftCurly"]         = "{",
		["Pipe"]              = "|",
		["RightCurly"]        = "}",
		["Tilde"]             = "~",
		["Delete"]            = "Delete",
		["End"]               = "End",
		["KeypadZero"]        = "Keypad0",
		["KeypadOne"]         = "Keypad1",
		["KeypadTwo"]         = "Keypad2",
		["KeypadThree"]       = "Keypad3",
		["KeypadFour"]        = "Keypad4",
		["KeypadFive"]        = "Keypad5",
		["KeypadSix"]         = "Keypad6",
		["KeypadSeven"]       = "Keypad7",
		["KeypadEight"]       = "Keypad8",
		["KeypadNine"]        = "Keypad9",
		["KeypadPeriod"]      = "KeypadP",
		["KeypadDivide"]      = "KeypadD",
		["KeypadMultiply"]    = "KeypadM",
		["KeypadMinus"]       = "KeypadM",
		["KeypadPlus"]        = "KeypadP",
		["KeypadEnter"]       = "KeypadE",
		["KeypadEquals"]      = "KeypadE",
		["Insert"]            = "Insert",
		["Home"]              = "Home",
		["PageUp"]            = "PageUp",
		["PageDown"]          = "PageDown",
		["RightShift"]        = "RightShift",
		["LeftShift"]         = "LeftShift",
		["RightControl"]      = "RightControl",
		["LeftControl"]       = "LeftControl",
		["LeftAlt"]           = "LeftAlt",
		["RightAlt"]          = "RightAlt"
	}

	local Themes = {
		["Preset"] = {
			["Background"] = FromRGB(14, 15, 17),
			["Border"] = FromRGB(12, 12, 12),
			["Inline"] = FromRGB(21, 20, 24),
			["Hovered Element"] = FromRGB(45, 37, 45), 
			["Page Background"] = FromRGB(26, 25, 30), 
			["Outline"] = FromRGB(45, 42, 49),
			["Element"] = FromRGB(31, 30, 36),
			["Gradient"] = FromRGB(220, 208, 235), 
			["Text"] = FromRGB(235, 235, 235),
			["Text Stroke"] = FromRGB(0, 0, 0),
			["Placeholder Text"] = FromRGB(185, 185, 185),
			["Accent"] = FromRGB(255, 200, 60)
		}
	}
	Library.Theme = TableClone(Themes["Preset"])

	for Index, Value in Library.Folders do 
		if not isfolder(Value) then
			makefolder(Value)
		end
	end

	for Index, Value in Library.Images do 
		local ImageData = Value

		local ImageName = ImageData[1]
		local ImageLink = ImageData[2]

		if not isfile(Library.Folders.Assets .. "/" .. ImageName) then
			writefile(Library.Folders.Assets .. "/" .. ImageName, game:HttpGet(ImageLink))
		end
	end

	local Tween = { } do
		Tween.__index = Tween

		Tween.Create = function(self, Item, Info, Goal, IsRawItem)
			Item = IsRawItem and Item or Item.Instance
			Info = Info or TweenInfo.new(Library.Tween.Time, Library.Tween.Style, Library.Tween.Direction)

			local NewTween = {
				Tween = TweenService:Create(Item, Info, Goal),
				Info = Info,
				Goal = Goal,
				Item = Item
			}

			NewTween.Tween:Play()

			setmetatable(NewTween, Tween)

			return NewTween
		end

		Tween.GetProperty = function(self, Item)
			Item = Item or self.Item 

			if Item:IsA("Frame") then
				return { "BackgroundTransparency" }
			elseif Item:IsA("TextLabel") or Item:IsA("TextButton") then
				return { "TextTransparency", "BackgroundTransparency" }
			elseif Item:IsA("ImageLabel") or Item:IsA("ImageButton") then
				return { "BackgroundTransparency", "ImageTransparency" }
			elseif Item:IsA("ScrollingFrame") then
				return { "BackgroundTransparency", "ScrollBarImageTransparency" }
			elseif Item:IsA("TextBox") then
				return { "TextTransparency", "BackgroundTransparency" }
			elseif Item:IsA("UIStroke") then 
				return { "Transparency" }
			end
		end

		Tween.FadeItem = function(self, Item, Property, Visibility, Speed)
			local Item = Item or self.Item 

			local OldTransparency = Item[Property]
			Item[Property] = Visibility and 1 or OldTransparency

			local NewTween = Tween:Create(Item, TweenInfo.new(Speed or Library.Tween.Time, Library.Tween.Style, Library.Tween.Direction), {
				[Property] = Visibility and OldTransparency or 1
			}, true)

			Library:Connect(NewTween.Tween.Completed, function()
				if not Visibility then 
					task.wait()
					Item[Property] = OldTransparency
				end
			end)

			return NewTween
		end

		Tween.Get = function(self)
			if not self.Tween then 
				return
			end

			return self.Tween, self.Info, self.Goal
		end

		Tween.Pause = function(self)
			if not self.Tween then 
				return
			end

			self.Tween:Pause()
		end

		Tween.Play = function(self)
			if not self.Tween then 
				return
			end

			self.Tween:Play()
		end

		Tween.Clean = function(self)
			if not self.Tween then 
				return
			end

			Tween:Pause()
			self = nil
		end
	end

	local Instances = { } do
		Instances.__index = Instances

		Instances.Create = function(self, Class, Properties)
			local NewItem = {
				Instance = InstanceNew(Class),
				Properties = Properties,
				Class = Class
			}

			setmetatable(NewItem, Instances)

			for Property, Value in NewItem.Properties do
				NewItem.Instance[Property] = Value
			end

			return NewItem
		end

		Instances.FadeItem = function(self, Visibility, Speed)
			local Item = self.Instance

			if Visibility == true then 
				Item.Visible = true
			end

			local Descendants = Item:GetDescendants()
			TableInsert(Descendants, Item)

			local NewTween

			for Index, Value in Descendants do 
				local TransparencyProperty = Tween:GetProperty(Value)

				if not TransparencyProperty then 
					continue
				end

				if type(TransparencyProperty) == "table" then 
					for _, Property in TransparencyProperty do 
						NewTween = Tween:FadeItem(Value, Property, not Visibility, Speed)
					end
				else
					NewTween = Tween:FadeItem(Value, TransparencyProperty, not Visibility, Speed)
				end
			end
		end

		Instances.AddToTheme = function(self, Properties)
			if not self.Instance then 
				return
			end

			Library:AddToTheme(self, Properties)
		end

		Instances.ChangeItemTheme = function(self, Properties)
			if not self.Instance then 
				return
			end

			Library:ChangeItemTheme(self, Properties)
		end

		Instances.Connect = function(self, Event, Callback, Name)
			if not self.Instance then 
				return
			end

			if not self.Instance[Event] then 
				return
			end

			if IsMobile then
				if Event == "MouseButton1Down" or Event == "MouseButton1Click" then
					Event = "TouchTap"
				elseif Event == "MouseButton2Down" or Event == "MouseButton2Click" then
					Event = "TouchLongPress"
				end
			end

			return Library:Connect(self.Instance[Event], Callback, Name)
		end

		Instances.Tween = function(self, Info, Goal)
			if not self.Instance then 
				return
			end

			return Tween:Create(self, Info, Goal)
		end

		Instances.Disconnect = function(self, Name)
			if not self.Instance then 
				return
			end

			return Library:Disconnect(Name)
		end

		Instances.Clean = function(self)
			if not self.Instance then 
				return
			end

			self.Instance:Destroy()
			self = nil
		end

		Instances.MakeDraggable = function(self)
			if not self.Instance then 
				return
			end

			local Gui = self.Instance

			local Dragging = false 
			local DragStart
			local StartPosition 

			local Set = function(Input)
				local DragDelta = Input.Position - DragStart
				self:Tween(TweenInfo.new(0.16, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2New(StartPosition.X.Scale, StartPosition.X.Offset + DragDelta.X, StartPosition.Y.Scale, StartPosition.Y.Offset + DragDelta.Y)})
			end

			local InputChanged

			self:Connect("InputBegan", function(Input)
				if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
					Dragging = true

					DragStart = Input.Position
					StartPosition = Gui.Position

					if InputChanged then 
						return
					end

					InputChanged = Input.Changed:Connect(function()
						if Input.UserInputState == Enum.UserInputState.End then
							Dragging = false

							InputChanged:Disconnect()
							InputChanged = nil
						end
					end)
				end
			end)

			Library:Connect(UserInputService.InputChanged, function(Input)
				if Input.UserInputType == Enum.UserInputType.MouseMovement or Input.UserInputType == Enum.UserInputType.Touch then
					if Dragging then
						Set(Input)
					end
				end
			end)

			return Dragging
		end

		Instances.MakeResizeable = function(self, Minimum, Maximum)
			if not self.Instance then 
				return
			end

			local Gui = self.Instance

			local Resizing = false 
			local Start = UDim2New()
			local Delta = UDim2New()
			local ResizeMax = Gui.Parent.AbsoluteSize - Gui.AbsoluteSize

			local ResizeButton = Instances:Create("ImageButton", {
				Parent = Gui,
				Image = "rbxassetid://",
				AnchorPoint = Vector2New(1, 1),
				BorderColor3 = FromRGB(0, 0, 0),
				Size = UDim2New(0, 6, 0, 6),
				Position = UDim2New(1, -4, 1, -4),
				Name = "\0",
				BorderSizePixel = 0,
				BackgroundTransparency = 1,
				ZIndex = 5,
				AutoButtonColor = false,
				Visible = true,
			})  ResizeButton:AddToTheme({ImageColor3 = "Accent"})

			local InputChanged

			ResizeButton:Connect("InputBegan", function(Input)
				if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then

					Resizing = true

					Start = Gui.Size - UDim2New(0, Input.Position.X, 0, Input.Position.Y)

					if InputChanged then 
						return
					end

					InputChanged = Input.Changed:Connect(function()
						if Input.UserInputState == Enum.UserInputState.End then
							Resizing = false

							InputChanged:Disconnect()
							InputChanged = nil
						end
					end)
				end
			end)

			Library:Connect(UserInputService.InputChanged, function(Input)
				if Input.UserInputType == Enum.UserInputType.MouseMovement or Input.UserInputType == Enum.UserInputType.Touch then
					if Resizing then
						ResizeMax = Maximum or Gui.Parent.AbsoluteSize - Gui.AbsoluteSize

						Delta = Start + UDim2New(0, Input.Position.X, 0, Input.Position.Y)
						Delta = UDim2New(0, math.clamp(Delta.X.Offset, Minimum.X, ResizeMax.X), 0, math.clamp(Delta.Y.Offset, Minimum.Y, ResizeMax.Y))

						Tween:Create(Gui, TweenInfo.new(0.17, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Size = Delta}, true)
					end
				end
			end)

			return Resizing
		end

		Instances.OnHover = function(self, Function)
			if not self.Instance then 
				return
			end

			return Library:Connect(self.Instance.MouseEnter, Function)
		end

		Instances.OnHoverLeave = function(self, Function)
			if not self.Instance then 
				return
			end

			return Library:Connect(self.Instance.MouseLeave, Function)
		end

		Instances.Border = function(self, Type)
			if not self.Instance then 
				return
			end

			local Color = Type == "Border" and Library.Theme.Border or Type == "Outline" and Library.Theme.Outline

			local UIStroke = Instances:Create("UIStroke", {
				Parent = self.Instance,
				Color = Color,
				Thickness = 1,
				LineJoinMode = Enum.LineJoinMode.Miter
			})  UIStroke:AddToTheme({Color = Type})

			return UIStroke
		end

		Instances.TextBorder = function(self)
			if not self.Instance then 
				return
			end

			local UIStroke = Instances:Create("UIStroke", {
				Parent = self.Instance,
				Color = Library.Theme["Text Stroke"],
				Thickness = 1,
				Transparency = 0.6,
				LineJoinMode = Enum.LineJoinMode.Miter
			})  UIStroke:AddToTheme({Color = "Text Stroke"})

			return UIStroke
		end 
	end

	local CustomFont = { } do
		function CustomFont:New(Name, Weight, Style, Data)
			if isfile(Library.Folders.Assets .. "/" .. Name .. ".json") then
				return Font.new(getcustomasset(Library.Folders.Assets .. "/" .. Name .. ".json"))
			end

			if not isfile(Library.Folders.Assets .. "/" .. Name .. ".ttf") then 
				writefile(Library.Folders.Assets .. "/" .. Name .. ".ttf", game:HttpGet(Data.Url))
			end

			local FontData = {
				name = Name,
				faces = { {
					name = "Regular",
					weight = Weight,
					style = Style,
					assetId = getcustomasset(Library.Folders.Assets .. "/" .. Name .. ".ttf")
				} }
			}

			writefile(Library.Folders.Assets .. "/" .. Name .. ".json", HttpService:JSONEncode(FontData))
			return Font.new(getcustomasset(Library.Folders.Assets .. "/" .. Name .. ".json"))
		end

		function CustomFont:Get(Name)
			if isfile(Library.Folders.Assets .. "/" .. Name .. ".json") then
				return Font.new(getcustomasset(Library.Folders.Assets .. "/" .. Name .. ".json"))
			end
		end

		CustomFont:New("Monaco", 400, "Regular", {
			Url = "https://github.com/sametexe001/luas/raw/refs/heads/main/fonts/Monaco.ttf"
		})

		Library.Font = CustomFont:Get("Monaco")
	end

	Library.Holder = Instances:Create("ScreenGui", {
		Parent = gethui(),
		Name = "\0",
		ZIndexBehavior = Enum.ZIndexBehavior.Global,
		DisplayOrder = 2,
		ResetOnSpawn = false
	})

	Library.UnusedHolder = Instances:Create("ScreenGui", {
		Parent = gethui(),
		Name = "\0",
		ZIndexBehavior = Enum.ZIndexBehavior.Global,
		Enabled = false,
		ResetOnSpawn = false
	})

	Library.NotifHolder = Instances:Create("Frame", {
		Parent = Library.Holder.Instance,
		Name = "\0",
		BackgroundTransparency = 1,
		Size = UDim2New(0, 0, 1, 0),
		BorderColor3 = FromRGB(0, 0, 0),
		BorderSizePixel = 0,
		AutomaticSize = Enum.AutomaticSize.X,
		BackgroundColor3 = FromRGB(255, 255, 255)
	})

	Instances:Create("UIListLayout", {
		Parent = Library.NotifHolder.Instance,
		Name = "\0",
		VerticalAlignment = Enum.VerticalAlignment.Bottom,
		Padding = UDimNew(0, 12),
		SortOrder = Enum.SortOrder.LayoutOrder
	})

	Instances:Create("UIPadding", {
		Parent = Library.NotifHolder.Instance,
		Name = "\0",
		PaddingTop = UDimNew(0, 12),
		PaddingBottom = UDimNew(0, 12),
		PaddingRight = UDimNew(0, 12),
		PaddingLeft = UDimNew(0, 12)
	})

	Library.Unload = function(self)
		for Index, Value in self.Connections do 
			Value.Connection:Disconnect()
		end

		for Index, Value in self.Threads do 
			coroutine.close(Value)
		end

		if self.Holder then 
			self.Holder:Clean()
		end

		Library = nil 
		getgenv().Library = nil

		UserInputService.MouseIconEnabled = false
	end

	Library.GetImage = function(self, Image)
		local ImageData = self.Images[Image]

		if not ImageData then 
			return
		end

		return getcustomasset(self.Folders.Assets .. "/" .. ImageData[1])
	end

	Library.Round = function(self, Number, Float)
		local Multiplier = 1 / (Float or 1)
		return MathFloor(Number * Multiplier) / Multiplier
	end

	Library.Thread = function(self, Function)
		local NewThread = coroutine.create(Function)

		coroutine.wrap(function()
			coroutine.resume(NewThread)
		end)()

		TableInsert(self.Threads, NewThread)
		return NewThread
	end

	Library.SafeCall = function(self, Function, ...)
		local Arguements = { ... }
		local Success, Result = pcall(Function, TableUnpack(Arguements))

		if not Success then
			warn(Result)
			return false
		end

		return Success
	end

	Library.Connect = function(self, Event, Callback, Name)
		Name = Name or StringFormat("Connection%s%s", self.UnnamedConnections + 1, HttpService:GenerateGUID(false))

		local NewConnection = {
			Event = Event,
			Callback = Callback,
			Name = Name,
			Connection = nil
		}

		Library:Thread(function()
			NewConnection.Connection = Event:Connect(Callback)
		end)

		TableInsert(self.Connections, NewConnection)
		return NewConnection
	end

	Library.Disconnect = function(self, Name)
		for _, Connection in self.Connections do 
			if Connection.Name == Name then
				Connection.Connection:Disconnect()
				break
			end
		end
	end

	Library.NextFlag = function(self)
		local FlagNumber = self.UnnamedFlags + 1
		return StringFormat("flag_number_%s_%s", FlagNumber, HttpService:GenerateGUID(false))
	end

	Library.AddToTheme = function(self, Item, Properties)
		Item = Item.Instance or Item 

		local ThemeData = {
			Item = Item,
			Properties = Properties,
		}

		for Property, Value in ThemeData.Properties do
			if type(Value) == "string" then
				Item[Property] = self.Theme[Value]
			else
				Item[Property] = Value()
			end
		end

		TableInsert(self.ThemeItems, ThemeData)
		self.ThemeMap[Item] = ThemeData
	end

	Library.ToRich = function(self, Text, Color)
		if not Color then
			return `<font color="rgb(255, 255, 255)">{Text}</font>`
		end

		if not Color.R or not Color.G or not Color.B then
			return `<font color="rgb(255, 255, 255)">{Text}</font>`
		end

		return `<font color="rgb({MathFloor(Color.R * 255)}, {MathFloor(Color.G * 255)}, {MathFloor(Color.B * 255)})">{Text}</font>`
	end

	Library.GetConfig = function(self)
		local Config = {} 

		local Success, Result = Library:SafeCall(function()
			for Index, Value in pairs(Library.Flags) do 
				if type(Value) == "table" and Value.Key then
					Config[Index] = {Key = tostring(Value.Key), Mode = Value.Mode}
				elseif type(Value) == "table" and Value.Color then
					Config[Index] = {Color = Value.Color:ToHex(), Alpha = Value.Alpha}
				else
					Config[Index] = Value
				end
			end
		end)

		return HttpService:JSONEncode(Config)
	end

	Library.LoadConfig = function(self, Config)
		local Success, Decoded = pcall(HttpService.JSONDecode, HttpService, Config)
		if not Success then return false, Decoded end

		local CallSuccess, CallResult = Library:SafeCall(function()
			for Index, Value in pairs(Decoded) do 
				local SetFunction = Library.SetFlags[Index]

				if not SetFunction then
					continue
				end

				if type(Value) == "table" and Value.Key then 
					SetFunction(Value)
				elseif type(Value) == "table" and Value.Color then
					SetFunction(Color3.fromHex(Value.Color), Value.Alpha)
				else
					SetFunction(Value)
				end
			end
		end)

		return CallSuccess, CallResult
	end

	Library.DeleteConfig = function(self, Config)
		local Path = Library.Folders.Configs .. "/" .. Config
		if isfile(Path) then 
			delfile(Path)
		end
	end

	Library.CachedConfigs = {}
	Library.RefreshConfigsList = function(self, Element)
		local List = {}

		for _, Value in ipairs(listfiles(Library.Folders.Configs)) do
			local FileName = Value:match("([^\\/]+)$")
			if FileName then
				table.insert(List, FileName)
			end
		end

		local IsChanged = #List ~= #Library.CachedConfigs
		if not IsChanged then
			for i, v in ipairs(List) do
				if v ~= Library.CachedConfigs[i] then
					IsChanged = true
					break
				end
			end
		end

		if IsChanged then
			Library.CachedConfigs = List
			Element:Refresh(List)
		end
	end
	
	Library.ChangeItemTheme = function(self, Item, Properties)
		Item = Item.Instance or Item

		if not self.ThemeMap[Item] then 
			return
		end

		self.ThemeMap[Item].Properties = Properties
		self.ThemeMap[Item] = self.ThemeMap[Item]
	end

	Library.ChangeTheme = function(self, Theme, Color)
		self.Theme[Theme] = Color

		for _, Item in self.ThemeItems do
			for Property, Value in Item.Properties do
				if type(Value) == "string" and Value == Theme then
					Item.Item[Property] = Color
				elseif type(Value) == "function" then
					Item.Item[Property] = Value()
				end
			end
		end
	end

	Library.IsMouseOverFrame = function(self, Frame, XOffset, YOffset)
		Frame = Frame.Instance
		XOffset = XOffset or 0 
		YOffset = YOffset or 0

		local MousePosition = Vector2New(Mouse.X + XOffset, Mouse.Y + YOffset)

		return MousePosition.X >= Frame.AbsolutePosition.X and MousePosition.X <= Frame.AbsolutePosition.X + Frame.AbsoluteSize.X 
			and MousePosition.Y >= Frame.AbsolutePosition.Y and MousePosition.Y <= Frame.AbsolutePosition.Y + Frame.AbsoluteSize.Y
	end

	Library.Lerp = function(self, Start, Finish, Time)
		return Start + (Finish - Start) * Time
	end

	local Components = { } do
		Components.Window = function(self, Data)
			local Items = { } do
				Items["Window"] = Instances:Create("Frame", {
					Parent = Data.Parent.Instance,
					Name = "\0",
					AnchorPoint = Data.AnchorPoint,
					Position = Data.Position,
					BorderColor3 = FromRGB(12, 12, 12),
					Size = Data.Size,
					BorderSizePixel = 2,
					BackgroundColor3 = FromRGB(14, 17, 15)
				})  Items["Window"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Border"})

				if Data.Draggable then 
					Items["Window"]:MakeDraggable()
				end

				if Data.Resizeable then 
					Items["Window"]:MakeResizeable(Vector2New(Data.Size.X.Offset, Data.Size.Y.Offset), Vector2New(9999, 9999))
				end

				Items["UIStroke"] = Items["Window"]:Border("Outline")
			end

			return Items
		end

		Components.AutosizingLabel = function(self, Data)
			local Label = { } 

			local Items = { } do
				Items["Label"] = Instances:Create("TextLabel", {
					Parent = Data.Parent.Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = Data.Text,
					BackgroundTransparency = 1,
					BorderSizePixel = 0,
					AutomaticSize = Enum.AutomaticSize.XY,
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["Label"]:AddToTheme({TextColor3 = "Text"})

				Items["UIStroke"] = Items["Label"]:TextBorder()
			end

			function Label:SetProperty(Property, Value)
				Items["Label"].Instance[Property] = Value
			end

			return Label, Items
		end

		Components.WindowPage = function(self, Data)
			local Page = {
				Active = false,
				SubPages = { },
				Items = { },
				Window = Data.Window,
				ColumnsData = { }
			}

			local Items = { } do
				Items["Inactive"] = Instances:Create("TextButton", {
					Parent = Data.Parent.Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(0, 0, 0),
					BorderColor3 = FromRGB(12, 12, 12),
					Text = "",
					AutoButtonColor = false,
					BackgroundTransparency = 0.6000000238418579,
					Size = UDim2New(1, 0, 0, 25),
					BorderSizePixel = 2,
					TextSize = 14,
					BackgroundColor3 = FromRGB(25, 30, 26)
				})  Items["Inactive"]:AddToTheme({BackgroundColor3 = "Page Background", BorderColor3 = "Border"})

				Items["ButtonBorder"] = Instances:Create("UIStroke", {
					Parent = Items["Inactive"].Instance,
					Name = "\0",
					Color = FromRGB(61, 60, 65),
					Transparency = 0.6,
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				})  Items["ButtonBorder"]:AddToTheme({Color = "Outline"})

				Items["Liner"] = Instances:Create("Frame", {
					Parent = Items["Inactive"].Instance,
					Name = "\0",
					BackgroundTransparency = 1,
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(0, 1, 1, 0),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(25, 30, 26)
				})  Items["Liner"]:AddToTheme({BackgroundColor3 = "Accent"})

				Items["Text"] = Instances:Create("TextLabel", {
					Parent = Items["Inactive"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = Data.Name,
					AnchorPoint = Vector2New(0, 0.5),
					Size = UDim2New(0, 0, 0, 15),
					BackgroundTransparency = 1,
					Position = UDim2New(0, 8, 0.5, 0),
					BorderSizePixel = 0,
					AutomaticSize = Enum.AutomaticSize.X,
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["Text"]:AddToTheme({TextColor3 = "Text"})

				Items["TextStroke"] = Items["Text"]:TextBorder()

				Items["Glow"] = Instances:Create("Frame", {
					Parent = Items["Inactive"].Instance,
					Name = "\0",
					BackgroundTransparency = 1,
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(0, 20, 1, 0),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(25, 30, 26)
				})  Items["Glow"]:AddToTheme({BackgroundColor3 = "Accent"})

				Items["GlowGradient"] = Instances:Create("UIGradient", {
					Parent = Items["Glow"].Instance,
					Name = "\0",
					Transparency = NumSequence{NumSequenceKeypoint(0, 0), NumSequenceKeypoint(0.193, 0.8687499761581421), NumSequenceKeypoint(0.504, 0.96875), NumSequenceKeypoint(1, 1)}
				})

				Items["Page"] = Instances:Create("Frame", {
					Parent = Data.ContentHolder.Instance,
					Name = "\0",
					BackgroundTransparency = 1,
					Visible = false,
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(1, 0, 1, 0),
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				if Data.SubPages then
					Items["SubPages"] = Instances:Create("Frame", {
						Parent = Items["Page"].Instance,
						Name = "\0",
						Size = UDim2New(0, 0, 0, 35),
						BorderColor3 = FromRGB(42, 49, 45),
						BorderSizePixel = 2,
						AutomaticSize = Enum.AutomaticSize.X,
						BackgroundColor3 = FromRGB(20, 24, 21)
					})  Items["SubPages"]:AddToTheme({BackgroundColor3 = "Page Background", BorderColor3 = "Outline"})

					Items["SubPages"]:Border("Border")

					Instances:Create("UIPadding", {
						Parent = Items["SubPages"].Instance,
						Name = "\0",
						PaddingRight = UDimNew(0, 7),
						PaddingLeft = UDimNew(0, 7)
					})

					Instances:Create("UIListLayout", {
						Parent = Items["SubPages"].Instance,
						Name = "\0",
						VerticalAlignment = Enum.VerticalAlignment.Center,
						FillDirection = Enum.FillDirection.Horizontal,
						Padding = UDimNew(0, 12),
						SortOrder = Enum.SortOrder.LayoutOrder
					})

					Items["Columns"] = Instances:Create("Frame", {
						Parent = Items["Page"].Instance,
						Name = "\0",
						BackgroundTransparency = 1,
						Position = UDim2New(0, 0, 0, 51),
						BorderColor3 = FromRGB(42, 49, 45),
						Size = UDim2New(1, 0, 1, -51),
						BorderSizePixel = 0,
						BackgroundColor3 = FromRGB(255, 255, 255)
					})
				else
					Instances:Create("UIListLayout", {
						Parent = Items["Page"].Instance,
						Name = "\0",
						FillDirection = Enum.FillDirection.Horizontal,
						HorizontalFlex = Enum.UIFlexAlignment.Fill,
						Padding = UDimNew(0, 14),
						SortOrder = Enum.SortOrder.LayoutOrder
					})

					for Index = 1, Data.Columns do 
						local NewColumn = Instances:Create("ScrollingFrame", {
							Parent = Items["Page"].Instance,
							Name = "\0",
							ScrollBarImageColor3 = FromRGB(0, 0, 0),
							Active = true,
							AutomaticCanvasSize = Enum.AutomaticSize.Y,
							ScrollBarThickness = 0,
							BackgroundTransparency = 1,
							Size = UDim2New(1, 0, 1, 0),
							BackgroundColor3 = FromRGB(255, 255, 255),
							BorderColor3 = FromRGB(0, 0, 0),
							BorderSizePixel = 0,
							CanvasSize = UDim2New(0, 0, 0, 0)
						})

						Instances:Create("UIPadding", {
							Parent = NewColumn.Instance,
							Name = "\0",
							PaddingTop = UDimNew(0, 2),
							PaddingBottom = UDimNew(0, 2),
							PaddingRight = UDimNew(0, 2),
							PaddingLeft = UDimNew(0, 2)
						})

						Instances:Create("UIListLayout", {
							Parent = NewColumn.Instance,
							Name = "\0",
							Padding = UDimNew(0, 14),
							SortOrder = Enum.SortOrder.LayoutOrder
						})

						Page.ColumnsData[Index] = NewColumn
					end
				end

				Page.Items = Items
			end

			local Debounce = false

			function Page:Turn(Bool)
				if Debounce then 
					return 
				end

				Page.Active = Bool 

				Debounce = true
				Items["Page"].Instance.Visible = Bool 
				Items["Page"].Instance.Parent = Bool and Data.ContentHolder.Instance or Library.UnusedHolder.Instance

				if Page.Active then
					Items["Inactive"]:Tween(nil, {BackgroundTransparency = 0})
					Items["ButtonBorder"]:Tween(nil, {Transparency = 0})
					Items["Glow"]:Tween(nil, {BackgroundTransparency = 0})
					Items["Liner"]:Tween(nil, {BackgroundTransparency = 0})
					Items["Text"]:Tween(nil, {Position = UDim2New(0, 13, 0.5, 0)})

					Library.CurrentPage = Page
				else
					Items["Inactive"]:Tween(nil, {BackgroundTransparency = 0.6})
					Items["ButtonBorder"]:Tween(nil, {Transparency = 0.6})
					Items["Glow"]:Tween(nil, {BackgroundTransparency = 1})
					Items["Liner"]:Tween(nil, {BackgroundTransparency = 1})
					Items["Text"]:Tween(nil, {Position = UDim2New(0, 8, 0.5, 0)})
				end

				local AllInstances = Items["Page"].Instance:GetDescendants()
				TableInsert(AllInstances, Items["Page"].Instance)

				local NewTween 

				for Index, Value in AllInstances do 
					local TransparencyProperty = Tween:GetProperty(Value)

					if not TransparencyProperty then 
						continue
					end

					if type(TransparencyProperty) == "table" then 
						for _, Property in TransparencyProperty do 
							NewTween = Tween:FadeItem(Value, Property, Bool, Data.Window.FadeTime)
						end
					else
						NewTween = Tween:FadeItem(Value, TransparencyProperty, Bool, Data.Window.FadeTime)
					end
				end

				Library:Connect(NewTween.Tween.Completed, function()
					Debounce = false
				end)
			end

			Items["Inactive"]:Connect("MouseButton1Down", function()
				for Index, Value in Data.Window.Pages do 
					if Value == Page and Page.Active then
						return
					end

					Value:Turn(Value == Page)
				end
			end)

			Items["Inactive"]:OnHover(function()
				Items["Inactive"]:ChangeItemTheme({BackgroundColor3 = "Hovered Element", BorderColor3 = "Border"})
				Items["Inactive"]:Tween(nil, {BackgroundColor3 = Library.Theme["Hovered Element"]})
			end)

			Items["Inactive"]:OnHoverLeave(function()
				Items["Inactive"]:ChangeItemTheme({BackgroundColor3 = "Page Background", BorderColor3 = "Border"})
				Items["Inactive"]:Tween(nil, {BackgroundColor3 = Library.Theme["Page Background"]})
			end)

			if #Data.Window.Pages == 0 then 
				Page:Turn(true)
			end

			TableInsert(Data.Window.Pages, Page)
			return Page, Items 
		end

		Components.WindowSubPage = function(self, Data)
			local SubPage = {
				Active = false,
				ColumnsData = { }
			}

			local Items = { } do
				Items["Inactive"] = Instances:Create("TextButton", {
					Parent = Data.Page.Items["SubPages"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(0, 0, 0),
					BorderColor3 = FromRGB(12, 12, 12),
					Text = "",
					AutoButtonColor = false,
					BackgroundTransparency = 1,
					Size = UDim2New(0, 0, 0, 20),
					BorderSizePixel = 2,
					AutomaticSize = Enum.AutomaticSize.X,
					TextSize = 14,
					BackgroundColor3 = FromRGB(25, 30, 26)
				})  Items["Inactive"]:AddToTheme({BackgroundColor3 = "Page Background", BorderColor3 = "Border"})

				Items["ButtonBorder"] = Instances:Create("UIStroke", {
					Parent = Items["Inactive"].Instance,
					Name = "\0",
					Color = FromRGB(61, 60, 65),
					Transparency = 1,
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				})  Items["ButtonBorder"]:AddToTheme({Color = "Outline"})

				Items["Text"] = Instances:Create("TextLabel", {
					Parent = Items["Inactive"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = Data.Name,
					AnchorPoint = Vector2New(0.5, 0.5),
					Size = UDim2New(0, 0, 0, 15),
					BackgroundTransparency = 1,
					Position = UDim2New(0.5, -5, 0.5, 0),
					BorderSizePixel = 0,
					AutomaticSize = Enum.AutomaticSize.X,
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["Text"]:AddToTheme({TextColor3 = "Text"})

				Items["TextStroke"] = Items["Text"]:TextBorder()

				Instances:Create("UIPadding", {
					Parent = Items["Text"].Instance,
					Name = "\0",
					PaddingRight = UDimNew(0, 8),
					PaddingLeft = UDimNew(0, 8)
				})

				Instances:Create("UIPadding", {
					Parent = Items["Inactive"].Instance,
					Name = "\0",
					PaddingTop = UDimNew(0, 2),
					PaddingLeft = UDimNew(0, 18),
					PaddingRight = UDimNew(0, 12)
				})

				Items["Glow"] = Instances:Create("Frame", {
					Parent = Items["Inactive"].Instance,
					Name = "\0",
					BackgroundTransparency = 1,
					Position = UDim2New(0, -18, 0, -2),
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(0, 20, 1, 2),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(202, 243, 255)
				})  Items["Glow"]:AddToTheme({BackgroundColor3 = "Accent"})

				Instances:Create("UIGradient", {
					Parent = Items["Glow"].Instance,
					Name = "\0",
					Transparency = NumSequence{NumSequenceKeypoint(0, 0), NumSequenceKeypoint(0.193, 0.8687499761581421), NumSequenceKeypoint(0.504, 0.96875), NumSequenceKeypoint(1, 1)}
				})

				Items["Liner"] = Instances:Create("Frame", {
					Parent = Items["Inactive"].Instance,
					Name = "\0",
					BackgroundTransparency = 1,
					Position = UDim2New(0, -18, 0, -2),
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(0, 1, 1, 2),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(202, 243, 255)
				})  Items["Liner"]:AddToTheme({BackgroundColor3 = "Accent"})

				Items["Page"] = Instances:Create("Frame", {
					Parent = Data.Page.Items["Columns"].Instance,
					Name = "\0",
					BackgroundTransparency = 1,
					Position = UDim2New(0, -2, 0, -2),
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(1, 2, 1, 0),
					BorderSizePixel = 0,
					Visible = false,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Instances:Create("UIListLayout", {
					Parent = Items["Page"].Instance,
					Name = "\0",
					FillDirection = Enum.FillDirection.Horizontal,
					HorizontalFlex = Enum.UIFlexAlignment.Fill,
					Padding = UDimNew(0, 14),
					SortOrder = Enum.SortOrder.LayoutOrder
				})

				for Index = 1, Data.Columns do 
					local NewColumn = Instances:Create("ScrollingFrame", {
						Parent = Items["Page"].Instance,
						Name = "\0",
						ScrollBarImageColor3 = FromRGB(0, 0, 0),
						Active = true,
						AutomaticCanvasSize = Enum.AutomaticSize.Y,
						ScrollBarThickness = 0,
						BackgroundTransparency = 1,
						Size = UDim2New(1, 0, 1, 0),
						BackgroundColor3 = FromRGB(255, 255, 255),
						BorderColor3 = FromRGB(0, 0, 0),
						BorderSizePixel = 0,
						CanvasSize = UDim2New(0, 0, 0, 0)
					})

					Instances:Create("UIPadding", {
						Parent = NewColumn.Instance,
						Name = "\0",
						PaddingTop = UDimNew(0, 2),
						PaddingBottom = UDimNew(0, 2),
						PaddingRight = UDimNew(0, 2),
						PaddingLeft = UDimNew(0, 2)
					})

					Instances:Create("UIListLayout", {
						Parent = NewColumn.Instance,
						Name = "\0",
						Padding = UDimNew(0, 14),
						SortOrder = Enum.SortOrder.LayoutOrder
					})

					SubPage.ColumnsData[Index] = NewColumn
				end
			end

			local Debounce = false

			Library.SearchItems[SubPage] = { }

			function SubPage:Turn(Bool)
				if Debounce then 
					return 
				end

				SubPage.Active = Bool 
				Debounce = true
				Items["Page"].Instance.Visible = Bool 
				Items["Page"].Instance.Parent = Bool and Data.Page.Items["Columns"].Instance or Library.UnusedHolder.Instance

				if SubPage.Active then
					Items["Inactive"]:Tween(nil, {BackgroundTransparency = 0})
					Items["ButtonBorder"]:Tween(nil, {Transparency = 0})
					Items["Liner"]:Tween(nil, {BackgroundTransparency = 0})
					Items["Glow"]:Tween(nil, {BackgroundTransparency = 0})
					Items["Text"]:Tween(nil, {Position = UDim2New(0.5, 0, 0.5, 0)})

					Library.CurrentPage = SubPage
				else
					Items["Inactive"]:Tween(nil, {BackgroundTransparency = 1})
					Items["ButtonBorder"]:Tween(nil, {Transparency = 1})
					Items["Liner"]:Tween(nil, {BackgroundTransparency = 1})
					Items["Glow"]:Tween(nil, {BackgroundTransparency = 1})
					Items["Text"]:Tween(nil, {Position = UDim2New(0.5, -5, 0.5, 0)})
				end

				local AllInstances = Items["Page"].Instance:GetDescendants()
				TableInsert(AllInstances, Items["Page"].Instance)

				local NewTween 

				for Index, Value in AllInstances do 
					local TransparencyProperty = Tween:GetProperty(Value)

					if not TransparencyProperty then 
						continue
					end

					if type(TransparencyProperty) == "table" then 
						for _, Property in TransparencyProperty do 
							NewTween = Tween:FadeItem(Value, Property, Bool, Data.Window.FadeTime)
						end
					else
						NewTween = Tween:FadeItem(Value, TransparencyProperty, Bool, Data.Window.FadeTime)
					end
				end

				Library:Connect(NewTween.Tween.Completed, function()
					Debounce = false
				end)
			end

			Items["Inactive"]:Connect("MouseButton1Down", function()
				for Index, Value in Data.Page.SubPages do 
					if Value == SubPage and SubPage.Active then
						return
					end

					Value:Turn(Value == SubPage)
				end
			end)

			if #Data.Page.SubPages == 0 then 
				SubPage:Turn(true)
			end

			TableInsert(Data.Page.SubPages, SubPage)
			return SubPage
		end

		Components.Toggle = function(self, Data)
			local Toggle = {
				Value = false,
				Flag = Data.Flag
			}

			local Items = { } do
				Items["Toggle"] = Instances:Create("TextButton", {
					Parent = Data.Parent.Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(0, 0, 0),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = "",
					AutoButtonColor = false,
					BackgroundTransparency = 1,
					Size = UDim2New(0, 12, 0, 12),
					BorderSizePixel = 0,
					TextSize = 14,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Items["Indicator"] = Instances:Create("Frame", {
					Parent = Items["Toggle"].Instance,
					Name = "\0",
					AnchorPoint = Vector2New(0, 0.5),
					Position = UDim2New(0, 0, 0.5, 0),
					BorderColor3 = FromRGB(12, 12, 12),
					Size = UDim2New(0, 12, 0, 12),
					BorderSizePixel = 2,
					BackgroundColor3 = FromRGB(30, 36, 31)
				})  Items["Indicator"]:AddToTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})

				Instances:Create("UIStroke", {
					Parent = Items["Indicator"].Instance,
					Name = "\0",
					Color = FromRGB(42, 49, 45),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Outline"})

				Instances:Create("UIGradient", {
					Parent = Items["Indicator"].Instance,
					Name = "\0",
					Rotation = -165,
					Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(208, 208, 208))}
				}):AddToTheme({Color = function()
					return RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, Library.Theme.Gradient)}
				end})

				Items["Check"] = Instances:Create("ImageLabel", {
					Parent = Items["Indicator"].Instance,
					Name = "\0",
					ImageColor3 = FromRGB(0, 0, 0),
					ScaleType = Enum.ScaleType.Fit,
					ImageTransparency = 1,
					BorderColor3 = FromRGB(0, 0, 0),
					AnchorPoint = Vector2New(0.5, 0.5),
					Image = "rbxassetid://108016671469439",
					BackgroundTransparency = 1,
					Position = UDim2New(0.5, 0, 0.5, 0),
					Size = UDim2New(1, 2, 1, 2),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Items["Text"] = Instances:Create("TextLabel", {
					Parent = Items["Toggle"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = Data.Name,
					Size = UDim2New(0, 0, 0, 15),
					AnchorPoint = Vector2New(0, 0.5),
					Position = UDim2New(0, 22, 0.5, 0),
					BackgroundTransparency = 1,
					TextXAlignment = Enum.TextXAlignment.Left,
					BorderSizePixel = 0,
					AutomaticSize = Enum.AutomaticSize.X,
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["Text"]:AddToTheme({TextColor3 = "Text"})

				Items["Text"]:TextBorder()

				Items["SubElements"] = Instances:Create("Frame", {
					Parent = Items["Toggle"].Instance,
					Name = "\0",
					BorderColor3 = FromRGB(0, 0, 0),
					BackgroundTransparency = 1,
					Position = UDim2New(0, Items["Text"].Instance.TextBounds.X + 30, 0, 0),
					Size = UDim2New(0, 0, 1, 0),
					BorderSizePixel = 0,
					AutomaticSize = Enum.AutomaticSize.X,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Instances:Create("UIListLayout", {
					Parent = Items["SubElements"].Instance,
					Name = "\0",
					VerticalAlignment = Enum.VerticalAlignment.Center,
					FillDirection = Enum.FillDirection.Horizontal,
					Padding = UDimNew(0, 6),
					SortOrder = Enum.SortOrder.LayoutOrder
				})
			end

			function Toggle:Get()
				return Toggle.Value 
			end

			function Toggle:SetText(Text)
				Text = tostring(Text)
				Items["Text"].Instance.Text = Text
			end

			function Toggle:Set(Value)
				Toggle.Value = Value 
				Library.Flags[Toggle.Flag] = Value 

				if Toggle.Value then
					Items["Indicator"]:ChangeItemTheme({BackgroundColor3 = "Accent", BorderColor3 = "Border"})
					Items["Indicator"]:Tween(nil, {BackgroundColor3 = Library.Theme.Accent})
					task.wait(0.05)
					Items["Check"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {ImageTransparency = 0, Size = UDim2New(1, 2, 1, 2)})
				else
					Items["Indicator"]:ChangeItemTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})
					Items["Indicator"]:Tween(nil, {BackgroundColor3 = Library.Theme.Element})
					task.wait(0.05)
					Items["Check"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {ImageTransparency = 1, Size = UDim2New(0, 0, 0, 0)})
				end

				if Data.Callback then 
					Library:SafeCall(Data.Callback, Toggle.Value)
				end
			end

			function Toggle:SetVisibility(Bool)
				Items["Toggle"].Instance.Visible = Bool 
			end

			local PageSearchData = Library.SearchItems[Data.Page]

			if PageSearchData then
				local SearchData = {
					Element = Items["Toggle"],
					Name = Data.Name,
				}

				TableInsert(PageSearchData, SearchData)
			end

			Items["Toggle"]:Connect("MouseButton1Down", function()
				Toggle:Set(not Toggle.Value)
			end)

			Items["Toggle"]:OnHover(function()
				if Toggle.Value then 
					return 
				end

				Items["Indicator"]:ChangeItemTheme({BackgroundColor3 = "Hovered Element", BorderColor3 = "Border"})
				Items["Indicator"]:Tween(nil, {BackgroundColor3 = Library.Theme["Hovered Element"]})
			end)

			Items["Toggle"]:OnHoverLeave(function()
				if Toggle.Value then 
					return 
				end

				Items["Indicator"]:ChangeItemTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})
				Items["Indicator"]:Tween(nil, {BackgroundColor3 = Library.Theme["Element"]})
			end)

			Toggle:Set(Data.Default)

			Library.SetFlags[Toggle.Flag] = function(Value)
				Toggle:Set(Value)
			end

			return Toggle, Items
		end

		Components.Button = function(self, Data)
			local Button = { }

			local Items = { } do
				Items["Button"] = Instances:Create("Frame", {
					Parent = Data.Parent.Instance,
					Name = "\0",
					BackgroundTransparency = 1,
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(1, 0, 0, 0),
					BorderSizePixel = 0,
					AutomaticSize = Enum.AutomaticSize.Y,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Instances:Create("UIListLayout", {
					Parent = Items["Button"].Instance,
					Name = "\0",
					FillDirection = Enum.FillDirection.Horizontal,
					HorizontalFlex = Enum.UIFlexAlignment.Fill,
					Padding = UDimNew(0, 8),
					SortOrder = Enum.SortOrder.LayoutOrder
				})
			end

			function Button:Add(Name, Callback)
				local NewButton = { }

				local SubItems = { } do
					SubItems["NewButton"] = Instances:Create("TextButton", {
						Parent = Items["Button"].Instance,
						Name = "\0",
						FontFace = Library.Font,
						TextColor3 = FromRGB(0, 0, 0),
						BorderColor3 = FromRGB(12, 12, 12),
						Text = "",
						AutoButtonColor = false,
						Size = UDim2New(1, 0, 0, 20),
						BorderSizePixel = 2,
						TextSize = 14,
						BackgroundColor3 = FromRGB(30, 36, 31)
					})  SubItems["NewButton"]:AddToTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})

					Instances:Create("UIGradient", {
						Parent = SubItems["NewButton"].Instance,
						Name = "\0",
						Rotation = -165,
						Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(208, 208, 208))}
					}):AddToTheme({Color = function()
						return RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, Library.Theme.Gradient)}
					end})

					Instances:Create("UIStroke", {
						Parent = SubItems["NewButton"].Instance,
						Name = "\0",
						Color = FromRGB(42, 49, 45),
						LineJoinMode = Enum.LineJoinMode.Miter,
						ApplyStrokeMode = Enum.ApplyStrokeMode.Border
					}):AddToTheme({Color = "Outline"})

					SubItems["Text"] = Instances:Create("TextLabel", {
						Parent = SubItems["NewButton"].Instance,
						Name = "\0",
						FontFace = Library.Font,
						TextColor3 = FromRGB(235, 235, 235),
						BorderColor3 = FromRGB(0, 0, 0),
						Text = Name,
						BackgroundTransparency = 1,
						Size = UDim2New(1, 0, 1, 0),
						BorderSizePixel = 0,
						TextSize = 9,
						BackgroundColor3 = FromRGB(255, 255, 255)
					})  SubItems["Text"]:AddToTheme({TextColor3 = "Text"})

					SubItems["Text"]:TextBorder()
				end

				function NewButton:Press()
					SubItems["NewButton"]:ChangeItemTheme({BackgroundColor3 = "Accent", BorderColor3 = "Border"})
					SubItems["NewButton"]:Tween(nil, {BackgroundColor3 = Library.Theme.Accent})

					Library:SafeCall(Callback)
					task.wait(0.1)

					SubItems["NewButton"]:ChangeItemTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})
					SubItems["NewButton"]:Tween(nil, {BackgroundColor3 = Library.Theme.Element})
				end

				function NewButton:SetVisibility(Bool)
					SubItems["NewButton"].Instance.Visible = Bool
				end

				local PageSearchData = Library.SearchItems[Data.Page]

				if PageSearchData then
					local SearchData = {
						Element = SubItems["NewButton"],
						Name = Name,
					}

					TableInsert(PageSearchData, SearchData)
				end

				SubItems["NewButton"]:OnHover(function()
					SubItems["NewButton"]:ChangeItemTheme({BackgroundColor3 = "Hovered Element", BorderColor3 = "Border"})
					SubItems["NewButton"]:Tween(nil, {BackgroundColor3 = Library.Theme["Hovered Element"]})
				end)

				SubItems["NewButton"]:OnHoverLeave(function()
					SubItems["NewButton"]:ChangeItemTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})
					SubItems["NewButton"]:Tween(nil, {BackgroundColor3 = Library.Theme.Element})
				end)

				SubItems["NewButton"]:Connect("MouseButton1Down", function()
					NewButton:Press()
				end)

				return NewButton 
			end

			function Button:SetVisibility(Bool)
				Items["Button"].Instance.Visible = Bool
			end

			return Button, Items
		end

		Components.Slider = function(self, Data)
			local Slider = {
				Value = 0,
				Flag = Data.Flag,
				Sliding = false
			}

			local Items = { } do
				Items["Slider"] = Instances:Create("Frame", {
					Parent = Data.Parent.Instance,
					Name = "\0",
					BackgroundTransparency = 1,
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(1, 0, 0, 28),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Items["Text"] = Instances:Create("TextLabel", {
					Parent = Items["Slider"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = Data.Name,
					BackgroundTransparency = 1,
					Size = UDim2New(0, 0, 0, 15),
					BorderSizePixel = 0,
					AutomaticSize = Enum.AutomaticSize.X,
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["Text"]:AddToTheme({TextColor3 = "Text"})

				Items["Text"]:TextBorder()

				Items["RealSlider"] = Instances:Create("TextButton", {
					Parent = Items["Slider"].Instance,
					AutoButtonColor = false,
					Text = "",
					Name = "\0",
					AnchorPoint = Vector2New(0, 1),
					Position = UDim2New(0, 0, 1, 0),
					BorderColor3 = FromRGB(12, 12, 12),
					Size = UDim2New(1, 0, 0, 10),
					BorderSizePixel = 2,
					BackgroundColor3 = FromRGB(30, 36, 31)
				})  Items["RealSlider"]:AddToTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})

				Instances:Create("UIGradient", {
					Parent = Items["RealSlider"].Instance,
					Name = "\0",
					Rotation = -165,
					Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(208, 208, 208))}
				}):AddToTheme({Color = function()
					return RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, Library.Theme.Gradient)}
				end})

				Instances:Create("UIStroke", {
					Parent = Items["RealSlider"].Instance,
					Name = "\0",
					Color = FromRGB(42, 49, 45),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Outline"})

				Items["Accent"] = Instances:Create("Frame", {
					Parent = Items["RealSlider"].Instance,
					Name = "\0",
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(0.5, 0, 1, 0),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(202, 243, 255)
				})  Items["Accent"]:AddToTheme({BackgroundColor3 = "Accent"})

				Instances:Create("UIGradient", {
					Parent = Items["Accent"].Instance,
					Name = "\0",
					Rotation = -165,
					Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(208, 208, 208))}
				}):AddToTheme({Color = function()
					return RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, Library.Theme.Gradient)}
				end})

				Items["Dragger"] = Instances:Create("Frame", {
					Parent = Items["Accent"].Instance,
					Name = "\0",
					AnchorPoint = Vector2New(1, 0.5),
					Position = UDim2New(1, 0, 0.5, 0),
					BorderColor3 = FromRGB(42, 49, 45),
					Size = UDim2New(0, 3, 1, 3),
					BorderSizePixel = 2,
					BackgroundColor3 = FromRGB(14, 17, 15)
				})  Items["Dragger"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Outline"})

				Instances:Create("UIStroke", {
					Parent = Items["Dragger"].Instance,
					Name = "\0",
					Color = FromRGB(12, 12, 12),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Border"})

				Items["Value"] = Instances:Create("TextLabel", {
					Parent = Items["Slider"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = "50%",
					AnchorPoint = Vector2New(1, 0),
					Size = UDim2New(0, 0, 0, 15),
					BackgroundTransparency = 1,
					Position = UDim2New(1, 0, 0, 0),
					BorderSizePixel = 0,
					AutomaticSize = Enum.AutomaticSize.X,
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["Value"]:AddToTheme({TextColor3 = "Text"})

				Items["Value"]:TextBorder()
			end

			function Slider:Get()
				return Slider.Value
			end

			function Slider:SetVisibility(Bool)
				Items["Slider"].Instance.Visible = Bool
			end

			function Slider:Set(Value)
				Slider.Value = Library:Round(MathClamp(Value, Data.Min, Data.Max), Data.Decimals)

				Library.Flags[Slider.Flag] = Slider.Value

				Items["Accent"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Size = UDim2New((Slider.Value - Data.Min) / (Data.Max - Data.Min), 0, 1, 0)})
				Items["Value"].Instance.Text = StringFormat("%s%s", tostring(Slider.Value), Data.Suffix)

				if Data.Callback then 
					Library:SafeCall(Data.Callback, Slider.Value)
				end
			end


			local PageSearchData = Library.SearchItems[Data.Page]

			if PageSearchData then
				local SearchData = {
					Element = Items["Slider"],
					Name = Data.Name,
				}

				TableInsert(PageSearchData, SearchData)
			end


			local InputChanged

			Items["RealSlider"]:Connect("InputBegan", function(Input)
				if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
					Slider.Sliding = true 

					local SizeX = (Mouse.X - Items["RealSlider"].Instance.AbsolutePosition.X) / Items["RealSlider"].Instance.AbsoluteSize.X
					local Value = ((Data.Max - Data.Min) * SizeX) + Data.Min

					Slider:Set(Value)

					if InputChanged then
						return
					end

					InputChanged = Input.Changed:Connect(function()
						if Input.UserInputState == Enum.UserInputState.End then
							Slider.Sliding = false

							InputChanged:Disconnect()
							InputChanged = nil
						end
					end)
				end
			end)

			Library:Connect(UserInputService.InputChanged, function(Input)
				if Input.UserInputType == Enum.UserInputType.MouseMovement or Input.UserInputType == Enum.UserInputType.Touch then
					if Slider.Sliding then
						local SizeX = (Mouse.X - Items["RealSlider"].Instance.AbsolutePosition.X) / Items["RealSlider"].Instance.AbsoluteSize.X
						local Value = ((Data.Max - Data.Min) * SizeX) + Data.Min

						Slider:Set(Value)
					end
				end
			end)

			Items["Slider"]:OnHover(function()
				Items["RealSlider"]:ChangeItemTheme({BackgroundColor3 = "Hovered Element", BorderColor3 = "Border"})
				Items["RealSlider"]:Tween(nil, {BackgroundColor3 = Library.Theme["Hovered Element"]})
			end)

			Items["Slider"]:OnHoverLeave(function()
				Items["RealSlider"]:ChangeItemTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})
				Items["RealSlider"]:Tween(nil, {BackgroundColor3 = Library.Theme["Element"]})
			end)

			if Data.Default then 
				Slider:Set(Data.Default)
			end

			Library.SetFlags[Slider.Flag] = function(Value)
				Slider:Set(Value)
			end

			return Slider, Items
		end

		Components.Label = function(self, Data)
			local Label = { }

			local Items = { } do
				Items["Label"] = Instances:Create("Frame", {
					Parent = Data.Parent.Instance,
					Name = "\0",
					BackgroundTransparency = 1,
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(1, 0, 0, 20),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Items["Text"] = Instances:Create("TextLabel", {
					Parent = Items["Label"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = Data.Name,
					Size = UDim2New(0, 0, 0, 15),
					AnchorPoint = Vector2New(0, 0.5),
					Position = UDim2New(0, 0, 0.5, 0),
					BackgroundTransparency = 1,
					TextXAlignment = Enum.TextXAlignment.Left,
					BorderSizePixel = 0,
					AutomaticSize = Enum.AutomaticSize.X,
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["Text"]:AddToTheme({TextColor3 = "Text"})

				Items["Text"]:TextBorder()

				Items["SubElements"] = Instances:Create("Frame", {
					Parent = Items["Label"].Instance,
					Name = "\0",
					BorderColor3 = FromRGB(0, 0, 0),
					BackgroundTransparency = 1,
					Position = UDim2New(0, Items["Text"].Instance.TextBounds.X + 8, 0, 0),
					Size = UDim2New(0, 0, 1, 0),
					BorderSizePixel = 0,
					AutomaticSize = Enum.AutomaticSize.X,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Instances:Create("UIListLayout", {
					Parent = Items["SubElements"].Instance,
					Name = "\0",
					VerticalAlignment = Enum.VerticalAlignment.Center,
					FillDirection = Enum.FillDirection.Horizontal,
					Padding = UDimNew(0, 6),
					SortOrder = Enum.SortOrder.LayoutOrder
				})
			end

			function Label:SetText(Text)
				Text = tostring(Text)

				Items["Text"].Instance.Text = Text
			end

			function Label:SetVisibility(Bool)
				Items["Label"].Instance.Visible = Bool
			end

			return Label, Items 
		end

		Components.Dropdown = function(self, Data)
			local Dropdown = {
				Flag = Data.Flag, 
				Value = { },
				Options = { },
				IsOpen = false
			}

			local Items = { } do
				Items["Dropdown"] = Instances:Create("Frame", {
					Parent = Data.Parent.Instance,
					Name = "\0",
					BackgroundTransparency = 1,
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(1, 0, 0, 40),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Items["Text"] = Instances:Create("TextLabel", {
					Parent = Items["Dropdown"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = Data.Name,
					BackgroundTransparency = 1,
					Size = UDim2New(0, 0, 0, 15),
					BorderSizePixel = 0,
					AutomaticSize = Enum.AutomaticSize.X,
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["Text"]:AddToTheme({TextColor3 = "Text"})

				Items["Text"]:TextBorder()

				Items["RealDropdown"] = Instances:Create("TextButton", {
					Parent = Items["Dropdown"].Instance,
					AutoButtonColor = false,
					Text = "",
					Name = "\0",
					AnchorPoint = Vector2New(0, 1),
					Position = UDim2New(0, 0, 1, 0),
					BorderColor3 = FromRGB(12, 12, 12),
					Size = UDim2New(1, 0, 0, 20),
					BorderSizePixel = 2,
					BackgroundColor3 = FromRGB(30, 36, 31)
				})  Items["RealDropdown"]:AddToTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})

				Instances:Create("UIGradient", {
					Parent = Items["RealDropdown"].Instance,
					Name = "\0",
					Rotation = -165,
					Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(208, 208, 208))}
				}):AddToTheme({Color = function()
					return RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, Library.Theme.Gradient)}
				end})

				Instances:Create("UIStroke", {
					Parent = Items["RealDropdown"].Instance,
					Name = "\0",
					Color = FromRGB(42, 49, 45),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Outline"})

				Items["Value"] = Instances:Create("TextLabel", {
					Parent = Items["RealDropdown"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = "--",
					AnchorPoint = Vector2New(0, 0.5),
					Size = UDim2New(1, -25, 0, 15),
					BackgroundTransparency = 1,
					TextXAlignment = Enum.TextXAlignment.Left,
					Position = UDim2New(0, 8, 0.5, 0),
					BorderSizePixel = 0,
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["Value"]:AddToTheme({TextColor3 = "Text"})

				Items["Value"]:TextBorder()

				Items["Icon"] = Instances:Create("ImageLabel", {
					Parent = Items["RealDropdown"].Instance,
					Name = "\0",
					ImageColor3 = FromRGB(202, 243, 255),
					ScaleType = Enum.ScaleType.Fit,
					BorderColor3 = FromRGB(0, 0, 0),
					AnchorPoint = Vector2New(1, 0.5),
					Image = "rbxassetid://113229176886493",
					BackgroundTransparency = 1,
					Position = UDim2New(1, -2, 0.5, 0),
					Size = UDim2New(0, 20, 0, 20),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["Icon"]:AddToTheme({ImageColor3 = "Accent"})

				Items["OptionHolder"] = Instances:Create("Frame", {
					Parent = Library.UnusedHolder.Instance,
					Name = "\0",
					Visible = false,
					BorderColor3 = FromRGB(12, 12, 12),
					BorderSizePixel = 2,
					Position = UDim2New(0, 0, 1, 8),
					Size = UDim2New(1, 0, 0, 25),
					ZIndex = 5,
					AutomaticSize = Enum.AutomaticSize.Y,
					BackgroundColor3 = FromRGB(20, 24, 21)
				})  Items["OptionHolder"]:AddToTheme({BackgroundColor3 = "Inline", BorderColor3 = "Border"})

				Instances:Create("UIStroke", {
					Parent = Items["OptionHolder"].Instance,
					Name = "\0",
					Color = FromRGB(42, 49, 45),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Outline"})

				Instances:Create("UIPadding", {
					Parent = Items["OptionHolder"].Instance,
					Name = "\0",
					PaddingTop = UDimNew(0, 5),
					PaddingBottom = UDimNew(0, 5),
					PaddingRight = UDimNew(0, 5),
					PaddingLeft = UDimNew(0, 8)
				})

				Instances:Create("UIListLayout", {
					Parent = Items["OptionHolder"].Instance,
					Name = "\0",
					Padding = UDimNew(0, 3),
					SortOrder = Enum.SortOrder.LayoutOrder
				})
			end

			function Dropdown:Get()
				return Dropdown.Value
			end

			local Debounce = false
			local RenderStepped  

			function Dropdown:SetOpen(Bool)
				if Debounce then 
					return
				end

				Dropdown.IsOpen = Bool

				Debounce = true 

				if Dropdown.IsOpen then 
					Items["OptionHolder"].Instance.Visible = true
					Items["OptionHolder"].Instance.Parent = Library.Holder.Instance
					Items["Icon"]:Tween(nil, {Rotation = -90})

					RenderStepped = RunService.RenderStepped:Connect(function()
						Items["OptionHolder"].Instance.Position = UDim2New(0, Items["RealDropdown"].Instance.AbsolutePosition.X, 0, Items["RealDropdown"].Instance.AbsolutePosition.Y + Items["RealDropdown"].Instance.AbsoluteSize.Y + 5)
						Items["OptionHolder"].Instance.Size = UDim2New(0, Items["RealDropdown"].Instance.AbsoluteSize.X, 0, 0)
					end)

					if not Debounce then 
						for Index, Value in Library.OpenFrames do 
							if Value ~= Dropdown then 
								Value:SetOpen(false)
							end
						end

						Library.OpenFrames[Dropdown] = Dropdown 
					end
				else
					if not Debounce then 
						if Library.OpenFrames[Dropdown] then 
							Library.OpenFrames[Dropdown] = nil
						end
					end

					if RenderStepped then 
						RenderStepped:Disconnect()
						RenderStepped = nil
					end

					Items["Icon"]:Tween(nil, {Rotation = 0})
				end

				local Descendants = Items["OptionHolder"].Instance:GetDescendants()
				TableInsert(Descendants, Items["OptionHolder"].Instance)

				local NewTween

				for Index, Value in Descendants do 
					local TransparencyProperty = Tween:GetProperty(Value)

					if not TransparencyProperty then
						continue 
					end

					if type(TransparencyProperty) == "table" then 
						for _, Property in TransparencyProperty do 
							NewTween = Tween:FadeItem(Value, Property, Bool, Library.FadeSpeed)
						end
					else
						NewTween = Tween:FadeItem(Value, TransparencyProperty, Bool, Library.FadeSpeed)
					end
				end

				NewTween.Tween.Completed:Connect(function()
					Debounce = false 
					Items["OptionHolder"].Instance.Visible = Dropdown.IsOpen
					task.wait(0.2)
					Items["OptionHolder"].Instance.Parent = not Dropdown.IsOpen and Library.UnusedHolder.Instance or Library.Holder.Instance
				end)
			end

			function Dropdown:SetVisibility(Bool)
				Items["Dropdown"].Instance.Visible = Bool
			end

			function Dropdown:Set(Option)
				if Data.Multi then 
					if type(Option) ~= "table" then 
						return
					end

					Dropdown.Value = Option
					Library.Flags[Dropdown.Flag] = Option

					for Index, Value in Option do
						local OptionData = Dropdown.Options[Value]

						if not OptionData then
							continue
						end

						OptionData.Selected = true 
						OptionData:Toggle("Active")
					end

					Items["Value"].Instance.Text = TableConcat(Option, ", ")
				else
					if not Dropdown.Options[Option] then
						return
					end

					local OptionData = Dropdown.Options[Option]

					Dropdown.Value = Option
					Library.Flags[Dropdown.Flag] = Option

					for Index, Value in Dropdown.Options do
						if Value ~= OptionData then
							Value.Selected = false 
							Value:Toggle("Inactive")
						else
							Value.Selected = true 
							Value:Toggle("Active")
						end
					end

					Items["Value"].Instance.Text = Option
				end

				if Data.Callback then   
					Library:SafeCall(Data.Callback, Dropdown.Value)
				end
			end

			function Dropdown:Add(Option)
				local OptionButton = Instances:Create("TextButton", {
					Parent = Items["OptionHolder"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = Option,
					AutoButtonColor = false,
					BorderSizePixel = 0,
					BackgroundTransparency = 1,
					TextXAlignment = Enum.TextXAlignment.Left,
					Size = UDim2New(1, 0, 0, 15),
					ZIndex = 5,
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  OptionButton:AddToTheme({TextColor3 = "Text"})

				local OptionData = {
					Button = OptionButton,
					Name = Option,
					Selected = false
				}

				function OptionData:Toggle(Status)
					if Status == "Active" then 
						OptionData.Button:ChangeItemTheme({TextColor3 = "Accent"})
						OptionData.Button:Tween(nil, {TextColor3 = Library.Theme.Accent})
					else
						OptionData.Button:ChangeItemTheme({TextColor3 = "Text"}) 
						OptionData.Button:Tween(nil, {TextColor3 = Library.Theme.Text})
					end
				end

				function OptionData:Set()
					OptionData.Selected = not OptionData.Selected

					if Data.Multi then 
						local Index = TableFind(Dropdown.Value, OptionData.Name)

						if Index then 
							TableRemove(Dropdown.Value, Index)
						else
							TableInsert(Dropdown.Value, OptionData.Name)
						end

						OptionData:Toggle(Index and "Inactive" or "Active")

						Library.Flags[Dropdown.Flag] = Dropdown.Value

						local TextFormat = #Dropdown.Value > 0 and TableConcat(Dropdown.Value, ", ") or "--"
						Items["Value"].Instance.Text = TextFormat
					else
						if OptionData.Selected then 
							Dropdown.Value = OptionData.Name
							Library.Flags[Dropdown.Flag] = OptionData.Name

							OptionData.Selected = true
							OptionData:Toggle("Active")

							for Index, Value in Dropdown.Options do 
								if Value ~= OptionData then
									Value.Selected = false 
									Value:Toggle("Inactive")
								end
							end

							Items["Value"].Instance.Text = OptionData.Name
						else
							Dropdown.Value = nil
							Library.Flags[Dropdown.Flag] = nil

							OptionData.Selected = false
							OptionData:Toggle("Inactive")

							Items["Value"].Instance.Text = "--"
						end
					end

					if Data.Callback then
						Library:SafeCall(Data.Callback, Dropdown.Value)
					end
				end

				OptionData.Button:Connect("MouseButton1Down", function()
					OptionData:Set()
				end)

				Dropdown.Options[OptionData.Name] = OptionData
				return OptionData
			end

			function Dropdown:Remove(Option)
				if not Dropdown.Options[Option] then
					return
				end

				Dropdown.Options[Option].Button:Clean()
				Dropdown.Options[Option] = nil
			end

			function Dropdown:Refresh(List)
				for Index, Value in Dropdown.Options do 
					Dropdown:Remove(Value.Name)
				end

				for Index, Value in List do 
					Dropdown:Add(Value)
				end
			end

			Items["RealDropdown"]:Connect("MouseButton1Down", function()
				Dropdown:SetOpen(not Dropdown.IsOpen)
			end)

			Items["Dropdown"]:OnHover(function()
				Items["RealDropdown"]:ChangeItemTheme({BackgroundColor3 = "Hovered Element", BorderColor3 = "Border"})
				Items["RealDropdown"]:Tween(nil, {BackgroundColor3 = Library.Theme["Hovered Element"]})
			end)

			Items["Dropdown"]:OnHoverLeave(function()
				Items["RealDropdown"]:ChangeItemTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})
				Items["RealDropdown"]:Tween(nil, {BackgroundColor3 = Library.Theme["Element"]})
			end)

			Library:Connect(UserInputService.InputBegan, function(Input)
				if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
					if not Dropdown.IsOpen then
						return 
					end

					if Library:IsMouseOverFrame(Items["OptionHolder"]) then 
						return
					end

					Dropdown:SetOpen(false)
				end
			end)

			for Index, Value in Data.Items do 
				Dropdown:Add(Value)
			end

			if Data.Default then 
				Dropdown:Set(Data.Default)
			end

			Library.SetFlags[Dropdown.Flag] = function(Value)
				Dropdown:Set(Value)
			end

			return Dropdown, Items 
		end

		Components.ColorpickerTab = function(self, Data)
			if not Data.Pages then 
				return
			end

			local NewTab = { 
				Name = Data.Name,
				Active = false
			}

			local Items = { } do
				Items["Inactive"] = Instances:Create("TextButton", {
					Parent = Data.PageHolder.Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = NewTab.Name,
					AutoButtonColor = false,
					Size = UDim2New(1, 0, 1, 0),
					BorderSizePixel = 0,
					TextSize = 9,
					BackgroundColor3 = FromRGB(20, 24, 21)
				})  Items["Inactive"]:AddToTheme({BackgroundColor3 = "Inline"})

				Items["Inactive"]:TextBorder()

				Items["PageContent"] = Instances:Create("Frame", {
					Parent = Data.ContentHolder.Instance,
					Name = "\0",
					Visible = false,
					BackgroundTransparency = 1,
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(1, 0, 1, 0),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})
			end

			function NewTab:Turn(Bool)
				NewTab.Active = Bool 

				if NewTab.Active then
					Items["PageContent"].Instance.Visible = true 
					Items["PageContent"].Instance.Parent = Data.ContentHolder.Instance 

					Items["Inactive"]:ChangeItemTheme({BackgroundColor3 = "Background"})
					Items["Inactive"]:Tween(nil, {BackgroundColor3 = Library.Theme.Background})
				else
					Items["PageContent"].Instance.Visible = false
					Items["PageContent"].Instance.Parent = Library.UnusedHolder.Instance 

					Items["Inactive"]:ChangeItemTheme({BackgroundColor3 = "Inline"})
					Items["Inactive"]:Tween(nil, {BackgroundColor3 = Library.Theme.Inline})
				end
			end

			Items["Inactive"]:Connect("MouseButton1Down", function()
				for Index, Value in Data.Stack do 
					Value:Turn(Value == NewTab)
				end
			end)

			if #Data.Stack == 0 then 
				NewTab:Turn(true)
			end

			TableInsert(Data.Stack, NewTab)
			return NewTab, Items 
		end

		Components.CreateSubPaletteItems = function(self, Items)
			Items["ColorpickerWindow"].Instance.Size = UDim2New(0, 171, 0, 168)

			Items["Palette"] = Instances:Create("TextButton", {
				Parent = Items["ColorpickerWindow"].Instance,
				Name = "\0",
				FontFace = Library.Font,
				TextColor3 = FromRGB(0, 0, 0),
				BorderColor3 = FromRGB(42, 49, 45),
				Text = "",
				AutoButtonColor = false,
				Position = UDim2New(0, 8, 0, 8),
				Size = UDim2New(1, -41, 1, -41),
				BorderSizePixel = 2,
				TextSize = 14,
				BackgroundColor3 = FromRGB(157, 175, 255)
			})  Items["Palette"]:AddToTheme({BorderColor3 = "Outline"})

			Instances:Create("UIStroke", {
				Parent = Items["Palette"].Instance,
				Name = "\0",
				Color = FromRGB(12, 12, 12),
				LineJoinMode = Enum.LineJoinMode.Miter,
				ApplyStrokeMode = Enum.ApplyStrokeMode.Border
			}):AddToTheme({Color = "Border"})

			Items["Saturation"] = Instances:Create("ImageLabel", {
				Parent = Items["Palette"].Instance,
				Name = "\0",
				BorderColor3 = FromRGB(0, 0, 0),
				Image = Library:GetImage("Saturation"),
				BackgroundTransparency = 1,
				Size = UDim2New(1, 0, 1, 0),
				ZIndex = 2,
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})

			Items["Value"] = Instances:Create("ImageLabel", {
				Parent = Items["Palette"].Instance,
				Name = "\0",
				BorderColor3 = FromRGB(0, 0, 0),
				Size = UDim2New(1, 2, 1, 0),
				Image = Library:GetImage("Value"),
				BackgroundTransparency = 1,
				Position = UDim2New(0, -1, 0, 0),
				ZIndex = 3,
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})

			Items["PaletteDragger"] = Instances:Create("Frame", {
				Parent = Items["Palette"].Instance,
				Name = "\0",
				Position = UDim2New(0, 8, 0, 8),
				ZIndex = 5,
				BorderColor3 = FromRGB(0, 0, 0),
				Size = UDim2New(0, 2, 0, 2),
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})

			Instances:Create("UIStroke", {
				Parent = Items["PaletteDragger"].Instance,
				Name = "\0",
				Color = FromRGB(12, 12, 12),
				LineJoinMode = Enum.LineJoinMode.Miter,
				ApplyStrokeMode = Enum.ApplyStrokeMode.Border
			}):AddToTheme({Color = "Border"})

			Items["Hue"] = Instances:Create("Frame", {
				Parent = Items["ColorpickerWindow"].Instance,
				Name = "\0",
				Active = true,
				BorderColor3 = FromRGB(42, 49, 45),
				AnchorPoint = Vector2New(1, 0),
				Position = UDim2New(1, -8, 0, 8),
				Size = UDim2New(0, 15, 1, -16),
				Selectable = true,
				BorderSizePixel = 2,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})  Items["Hue"]:AddToTheme({BorderColor3 = "Outline"})

			Instances:Create("UIStroke", {
				Parent = Items["Hue"].Instance,
				Name = "\0",
				Color = FromRGB(12, 12, 12),
				LineJoinMode = Enum.LineJoinMode.Miter,
				ApplyStrokeMode = Enum.ApplyStrokeMode.Border
			}):AddToTheme({Color = "Border"})

			Items["HueInline"] = Instances:Create("TextButton", {
				Parent = Items["Hue"].Instance,
				Text = "",
				AutoButtonColor = false,
				Name = "\0",
				BorderColor3 = FromRGB(0, 0, 0),
				Size = UDim2New(1, 0, 1, 0),
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})

			Instances:Create("UIGradient", {
				Parent = Items["HueInline"].Instance,
				Name = "\0",
				Rotation = 90,
				Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 0, 0)), RGBSequenceKeypoint(0.17, FromRGB(255, 255, 0)), RGBSequenceKeypoint(0.33, FromRGB(0, 255, 0)), RGBSequenceKeypoint(0.5, FromRGB(0, 255, 255)), RGBSequenceKeypoint(0.67, FromRGB(0, 0, 255)), RGBSequenceKeypoint(0.83, FromRGB(255, 0, 255)), RGBSequenceKeypoint(1, FromRGB(255, 0, 0))}
			})

			Items["HueDragger"] = Instances:Create("Frame", {
				Parent = Items["Hue"].Instance,
				Name = "\0",
				BorderColor3 = FromRGB(0, 0, 0),
				Size = UDim2New(1, 0, 0, 1),
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})

			Instances:Create("UIStroke", {
				Parent = Items["HueDragger"].Instance,
				Name = "\0",
				Color = FromRGB(12, 12, 12),
				LineJoinMode = Enum.LineJoinMode.Miter,
				ApplyStrokeMode = Enum.ApplyStrokeMode.Border
			}):AddToTheme({Color = "Border"})

			Items["Alpha"] = Instances:Create("TextButton", {
				Parent = Items["ColorpickerWindow"].Instance,
				Name = "\0",
				FontFace = Library.Font,
				TextColor3 = FromRGB(0, 0, 0),
				BorderColor3 = FromRGB(42, 49, 45),
				Text = "",
				AutoButtonColor = false,
				AnchorPoint = Vector2New(0, 1),
				Position = UDim2New(0, 8, 1, -8),
				Size = UDim2New(1, -41, 0, 15),
				BorderSizePixel = 2,
				TextSize = 14,
				BackgroundColor3 = FromRGB(157, 175, 255)
			})  Items["Alpha"]:AddToTheme({BorderColor3 = "Outline"})

			Instances:Create("UIStroke", {
				Parent = Items["Alpha"].Instance,
				Name = "\0",
				Color = FromRGB(12, 12, 12),
				LineJoinMode = Enum.LineJoinMode.Miter,
				ApplyStrokeMode = Enum.ApplyStrokeMode.Border
			}):AddToTheme({Color = "Border"})

			Items["Checkers"] = Instances:Create("ImageLabel", {
				Parent = Items["Alpha"].Instance,
				Name = "\0",
				ScaleType = Enum.ScaleType.Tile,
				BorderColor3 = FromRGB(0, 0, 0),
				TileSize = UDim2New(0, 6, 0, 6),
				Image = Library:GetImage("Checkers"),
				BackgroundTransparency = 1,
				Size = UDim2New(1, 0, 1, 0),
				ZIndex = 2,
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})  

			Instances:Create("UIGradient", {
				Parent = Items["Checkers"].Instance,
				Name = "\0",
				Transparency = NumSequence{NumSequenceKeypoint(0, 1), NumSequenceKeypoint(0.37, 0.5), NumSequenceKeypoint(1, 0)}
			})

			Items["AlphaDragger"] = Instances:Create("Frame", {
				Parent = Items["Alpha"].Instance,
				Name = "\0",
				ZIndex = 5,
				BorderColor3 = FromRGB(0, 0, 0),
				Size = UDim2New(0, 1, 1, 0),
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})

			Instances:Create("UIStroke", {
				Parent = Items["AlphaDragger"].Instance,
				Name = "\0",
				Color = FromRGB(12, 12, 12),
				LineJoinMode = Enum.LineJoinMode.Miter,
				ApplyStrokeMode = Enum.ApplyStrokeMode.Border
			}):AddToTheme({Color = "Border"})
		end

		Components.Colorpicker = function(self, Data) -- poetry warning ()
			local Colorpicker = {
				IsOpen = false,

				Hue = 0,
				Saturation = 0,
				Value = 0,
				Alpha = 0,

				Color = FromRGB(255, 255, 255),
				HexValue = "#ffffff",

				Pages = Data.Pages and { } or nil,
				Flag = Data.Flag,
			}

			local UpdateSync

			local Items = { } do
				Items["ColorpickerButton"] = Instances:Create("TextButton", {
					Parent = Data.Parent.Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(0, 0, 0),
					BorderColor3 = FromRGB(12, 12, 12),
					Text = "",
					AutoButtonColor = false,
					Position = UDim2New(0, -123, 0, 0),
					Size = UDim2New(0, 15, 0, 15),
					BorderSizePixel = 2,
					TextSize = 14,
					BackgroundColor3 = FromRGB(157, 175, 255)
				})  Items["ColorpickerButton"]:AddToTheme({BorderColor3 = "Border"})

				Instances:Create("UIStroke", {
					Parent = Items["ColorpickerButton"].Instance,
					Name = "\0",
					Color = FromRGB(42, 49, 45),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Outline"})

				Items["ColorpickerButtonInline"] = Instances:Create("Frame", {
					Parent = Items["ColorpickerButton"].Instance,
					Name = "\0",
					Position = UDim2New(0, 1, 0, 1),
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(1, -2, 1, -2),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(157, 175, 255)
				})

				Instances:Create("UIGradient", {
					Parent = Items["ColorpickerButtonInline"].Instance,
					Name = "\0",
					Rotation = -165,
					Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(208, 208, 208))}
				}):AddToTheme({Color = function()
					return RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, Library.Theme.Gradient)}
				end})

				Items["ColorpickerWindow"] = Instances:Create("TextButton", {
					Parent = Library.UnusedHolder.Instance,
					Text = "",
					AutoButtonColor = false,
					Name = "\0",
					Position = UDim2New(0, 12, 0, 12),
					BorderColor3 = FromRGB(12, 12, 12),
					Size = UDim2New(0, 266, 0, 258),
					BorderSizePixel = 2,
					BackgroundColor3 = FromRGB(14, 17, 15)
				})  Items["ColorpickerWindow"]:AddToTheme({BorderColor3 = "Border", BackgroundColor3 = "Background"})

				Instances:Create("UIStroke", {
					Parent = Items["ColorpickerWindow"].Instance,
					Name = "\0",
					Color = FromRGB(42, 49, 45),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Outline"})

				if Data.Pages then 
					Items["Pages"] = Instances:Create("Frame", {
						Parent = Items["ColorpickerWindow"].Instance,
						Name = "\0",
						BackgroundTransparency = 1,
						BorderColor3 = FromRGB(0, 0, 0),
						Size = UDim2New(1, 0, 0, 20),
						BorderSizePixel = 0,
						BackgroundColor3 = FromRGB(255, 255, 255)
					})

					Instances:Create("UIListLayout", {
						Parent = Items["Pages"].Instance,
						Name = "\0",
						FillDirection = Enum.FillDirection.Horizontal,
						SortOrder = Enum.SortOrder.LayoutOrder,
						HorizontalFlex = Enum.UIFlexAlignment.Fill
					})

					Items["Content"] = Instances:Create("Frame", {
						Parent = Items["ColorpickerWindow"].Instance,
						Name = "\0",
						BackgroundTransparency = 1,
						Position = UDim2New(0, 0, 0, 25),
						BorderColor3 = FromRGB(0, 0, 0),
						Size = UDim2New(1, 0, 1, -25),
						BorderSizePixel = 0,
						BackgroundColor3 = FromRGB(255, 255, 255)
					})
				else
					Components:CreateSubPaletteItems(Items)
				end
			end

			local ColorTab, ColorTabItems = Components:ColorpickerTab({
				ContentHolder = Items["Content"],
				Pages = Colorpicker.Pages,
				PageHolder = Items["Pages"],
				Stack = Colorpicker.Pages,
				Name = "Color"
			})

			local AnimationsTab, AnimationsTabItems = Components:ColorpickerTab({
				ContentHolder = Items["Content"],
				Pages = Colorpicker.Pages,
				PageHolder = Items["Pages"],
				Stack = Colorpicker.Pages,
				Name = "Animations"
			})

			local OtherTab, OtherTabItems = Components:ColorpickerTab({
				ContentHolder = Items["Content"],
				Pages = Colorpicker.Pages,
				PageHolder = Items["Pages"],
				Stack = Colorpicker.Pages,
				Name = "Other"
			})

			local OldColor = Colorpicker.Color
			local OldAlpha = Colorpicker.Alpha
			local CurrentAnimation

			local AnimationsDropdown, AnimationsDropdownItems
			local KeyframeOneLabel, KeyframeOneLabelItems
			local KeyframeTwoLabel, KeyframeTwoLabelItems

			local KeyframeOneColorpicker, KeyframeOneColorpickerItems
			local KeyframeTwoColorpicker, KeyframeTwoColorpickerItems

			local AnimationSpeedSlider, AnimationSpeedSliderItems

			if ColorTab then
				Items["Palette"] = Instances:Create("TextButton", {
					Parent = ColorTabItems["PageContent"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(0, 0, 0),
					BorderColor3 = FromRGB(42, 49, 45),
					Text = "",
					AutoButtonColor = false,
					Position = UDim2New(0, 8, 0, 8),
					Size = UDim2New(1, -46, 1, -46),
					BorderSizePixel = 2,
					TextSize = 14,
					BackgroundColor3 = FromRGB(157, 175, 255)
				})  Items["Palette"]:AddToTheme({BorderColor3 = "Outline"})

				Instances:Create("UIStroke", {
					Parent = Items["Palette"].Instance,
					Name = "\0",
					Color = FromRGB(12, 12, 12),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Border"})

				Items["Saturation"] = Instances:Create("ImageLabel", {
					Parent = Items["Palette"].Instance,
					Name = "\0",
					BorderColor3 = FromRGB(0, 0, 0),
					Image = Library:GetImage("Saturation"),
					BackgroundTransparency = 1,
					Size = UDim2New(1, 0, 1, 0),
					ZIndex = 2,
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Items["Value"] = Instances:Create("ImageLabel", {
					Parent = Items["Palette"].Instance,
					Name = "\0",
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(1, 2, 1, 0),
					Image = Library:GetImage("Value"),
					BackgroundTransparency = 1,
					Position = UDim2New(0, -1, 0, 0),
					ZIndex = 3,
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Items["PaletteDragger"] = Instances:Create("Frame", {
					Parent = Items["Palette"].Instance,
					Name = "\0",
					Position = UDim2New(0, 8, 0, 8),
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(0, 2, 0, 2),
					BorderSizePixel = 0,
					ZIndex = 5,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Instances:Create("UIStroke", {
					Parent = Items["PaletteDragger"].Instance,
					Name = "\0",
					Color = FromRGB(12, 12, 12),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Border"})

				Items["Hue"] = Instances:Create("Frame", {
					Parent = ColorTabItems["PageContent"].Instance,
					Name = "\0",
					Active = true,
					BorderColor3 = FromRGB(42, 49, 45),
					AnchorPoint = Vector2New(1, 0),
					Position = UDim2New(1, -8, 0, 8),
					Size = UDim2New(0, 20, 1, -16),
					Selectable = true,
					BorderSizePixel = 2,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["Hue"]:AddToTheme({BorderColor3 = "Outline"})

				Instances:Create("UIStroke", {
					Parent = Items["Hue"].Instance,
					Name = "\0",
					Color = FromRGB(12, 12, 12),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Border"})

				Items["HueInline"] = Instances:Create("TextButton", {
					Parent = Items["Hue"].Instance,
					AutoButtonColor = false,
					Text = "",
					Name = "\0",
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(1, 0, 1, 0),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Instances:Create("UIGradient", {
					Parent = Items["HueInline"].Instance,
					Name = "\0",
					Rotation = 90,
					Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 0, 0)), RGBSequenceKeypoint(0.17, FromRGB(255, 255, 0)), RGBSequenceKeypoint(0.33, FromRGB(0, 255, 0)), RGBSequenceKeypoint(0.5, FromRGB(0, 255, 255)), RGBSequenceKeypoint(0.67, FromRGB(0, 0, 255)), RGBSequenceKeypoint(0.83, FromRGB(255, 0, 255)), RGBSequenceKeypoint(1, FromRGB(255, 0, 0))}
				})

				Items["HueDragger"] = Instances:Create("Frame", {
					Parent = Items["Hue"].Instance,
					Name = "\0",
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(1, 0, 0, 1),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Instances:Create("UIStroke", {
					Parent = Items["HueDragger"].Instance,
					Name = "\0",
					Color = FromRGB(12, 12, 12),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Border"})

				Items["Alpha"] = Instances:Create("TextButton", {
					Parent = ColorTabItems["PageContent"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(0, 0, 0),
					BorderColor3 = FromRGB(42, 49, 45),
					Text = "",
					AutoButtonColor = false,
					AnchorPoint = Vector2New(0, 1),
					Position = UDim2New(0, 8, 1, -8),
					Size = UDim2New(1, -46, 0, 20),
					BorderSizePixel = 2,
					TextSize = 14,
					BackgroundColor3 = FromRGB(157, 175, 255)
				})  Items["Alpha"]:AddToTheme({BorderColor3 = "Outline"})

				Instances:Create("UIStroke", {
					Parent = Items["Alpha"].Instance,   
					Name = "\0",
					Color = FromRGB(12, 12, 12),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Border"})

				Items["Checkers"] = Instances:Create("ImageLabel", {
					Parent = Items["Alpha"].Instance,
					Name = "\0",
					ScaleType = Enum.ScaleType.Tile,
					BorderColor3 = FromRGB(0, 0, 0),
					TileSize = UDim2New(0, 6, 0, 6),
					Image = Library:GetImage("Checkers"),
					BackgroundTransparency = 1,
					Size = UDim2New(1, 0, 1, 0),
					ZIndex = 2,
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  

				Instances:Create("UIGradient", {
					Parent = Items["Checkers"].Instance,
					Name = "\0",
					Transparency = NumSequence{NumSequenceKeypoint(0, 1), NumSequenceKeypoint(0.37, 0.5), NumSequenceKeypoint(1, 0)}
				})

				Items["AlphaDragger"] = Instances:Create("Frame", {
					Parent = Items["Alpha"].Instance,
					Name = "\0",
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(0, 1, 1, 0),
					ZIndex = 5,
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Instances:Create("UIStroke", {
					Parent = Items["AlphaDragger"].Instance,
					Name = "\0",
					Color = FromRGB(12, 12, 12),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Border"})
			end

			if AnimationsTab then
				AnimationsDropdown, AnimationsDropdownItems = Components:Dropdown({
					Parent = AnimationsTabItems["PageContent"],
					Name = "Animations",
					Items = {"Rainbow", "Fade", "Fade alpha", "Linear"},
					Default = nil,
					Flag = Colorpicker.Flag.."Animation",
					Multi = false,
					Debounce = Colorpicker,
					Callback = function(Value)
						CurrentAnimation = Value
						if Value == "Rainbow" then 
							if KeyframeOneLabel and KeyframeTwoLabel and AnimationSpeedSlider then
								KeyframeOneLabel:SetVisibility(false)
								KeyframeTwoLabel:SetVisibility(false)

								AnimationSpeedSliderItems["Slider"].Instance.Position = UDim2New(0, 8, 0, 45)
							end

							OldColor = Colorpicker.Color

							Library:Thread(function()
								while task.wait() do 
									local RainbowHue = MathAbs(MathSin(tick() * (AnimationSpeedSlider.Value / 25)))
									local Color = FromHSV(RainbowHue, 1, 1)

									Colorpicker:Set(Color, Colorpicker.Alpha)
									UpdateSync(true)

									if CurrentAnimation ~= "Rainbow" then
										Colorpicker:Set(OldColor, Colorpicker.Alpha)
										break
									end
								end
							end)
						elseif Value == "Fade" then 
							if KeyframeOneLabel and KeyframeTwoLabel and AnimationSpeedSlider then
								KeyframeOneLabel:SetVisibility(true)
								KeyframeTwoLabel:SetVisibility(false)

								AnimationSpeedSliderItems["Slider"].Instance.Position = UDim2New(0, 8, 0, 65)

								OldColor = Colorpicker.Color

								Library:Thread(function()
									while task.wait() do 
										local Speed = MathAbs(MathSin(tick() * (AnimationSpeedSlider.Value / 25)))
										Colorpicker:Set(KeyframeOneColorpicker.Color:Lerp(FromRGB(0, 0, 0), Speed), Colorpicker.Alpha)
										UpdateSync(true)

										if CurrentAnimation ~= "Fade" then
											Colorpicker:Set(OldColor, Colorpicker.Alpha)
											break
										end
									end
								end)
							end
						elseif Value == "Fade alpha" then
							if KeyframeOneLabel and KeyframeTwoLabel then
								KeyframeOneLabel:SetVisibility(false)
								KeyframeTwoLabel:SetVisibility(false)

								AnimationSpeedSliderItems["Slider"].Instance.Position = UDim2New(0, 8, 0, 45)

								OldColor = Colorpicker.Alpha

								Library:Thread(function()
									while task.wait() do 
										local AlphaValue = MathAbs(MathSin(tick() * (AnimationSpeedSlider.Value / 25)))
										Colorpicker:Set(Colorpicker.Color, AlphaValue)
										UpdateSync(true)

										if CurrentAnimation ~= "Fade alpha" then
											Colorpicker:Set(Colorpicker.Color, OldAlpha)
											break
										end
									end
								end)
							end
						elseif Value == "Linear" then
							if KeyframeOneLabel and KeyframeTwoLabel then
								KeyframeOneLabel:SetVisibility(true)
								KeyframeTwoLabel:SetVisibility(true)

								AnimationSpeedSliderItems["Slider"].Instance.Position = UDim2New(0, 8, 0, 85)

								OldColor = Colorpicker.Color

								Library:Thread(function()
									while task.wait() do 
										local Speed = MathAbs(MathSin(tick() * (AnimationSpeedSlider.Value / 25)))
										Colorpicker:Set(KeyframeOneColorpicker.Color:Lerp(KeyframeTwoColorpicker.Color, Speed), Colorpicker.Alpha)
										UpdateSync(true)

										if CurrentAnimation ~= "Linear" then
											Colorpicker:Set(OldColor, Colorpicker.Alpha)
											break
										end
									end
								end)
							end
						end
					end
				})

				AnimationsDropdownItems["Dropdown"].Instance.Position = UDim2New(0, 8, 0, 0)
				AnimationsDropdownItems["Dropdown"].Instance.Size = UDim2New(1, -16, 0, 40)

				KeyframeOneLabel, KeyframeOneLabelItems = Components:Label({
					Parent = AnimationsTabItems["PageContent"],
					Name = "Keyframe 1",
				})

				KeyframeOneLabelItems["Label"].Instance.Position = UDim2New(0, 8, 0, 45)
				KeyframeOneLabelItems["Label"].Instance.Size = UDim2New(1, -16, 0, 20)

				KeyframeTwoLabel, KeyframeTwoLabelItems = Components:Label({
					Parent = AnimationsTabItems["PageContent"],
					Name = "Keyframe 2",
				})

				KeyframeTwoLabelItems["Label"].Instance.Position = UDim2New(0, 8, 0, 65)
				KeyframeTwoLabelItems["Label"].Instance.Size = UDim2New(1, -16, 0, 20)

				KeyframeOneColorpicker, KeyframeOneColorpickerItems = Components:Colorpicker({
					Parent = KeyframeOneLabelItems["SubElements"],
					Alpha = 0,
					Pages = false,
					Default = Color3.fromRGB(255, 255, 255),
					Flag = Colorpicker.Flag.."Animation".."Keyframe1",
					Debounce = Colorpicker,
				})

				KeyframeTwoColorpicker, KeyframeTwoColorpickerItems = Components:Colorpicker({
					Parent = KeyframeTwoLabelItems["SubElements"],
					Alpha = 0,
					Pages = false,
					Default = Color3.fromRGB(0, 0, 0),
					Debounce = Colorpicker,
					Flag = Colorpicker.Flag.."Animation".."Keyframe2",
				})

				AnimationSpeedSlider, AnimationSpeedSliderItems = Components:Slider({
					Parent = AnimationsTabItems["PageContent"],
					Name = "Speed",
					Flag = Colorpicker.Flag .. "AnimationSpeed",
					Min = 0,
					Max = 100,
					Decimals = 0.1,
					Default = 20,
					Suffix = "%",
				})

				AnimationSpeedSliderItems["Slider"].Instance.Position = UDim2New(0, 8, 0, 85)
				AnimationSpeedSliderItems["Slider"].Instance.Size = UDim2New(1, -16, 0, 28)
			end

			local IsSyncToggled

			if OtherTab then
				Items["CurrentColor"] = Instances:Create("Frame", {
					Parent = OtherTabItems["PageContent"].Instance,
					Name = "\0",
					Position = UDim2New(0, 8, 0, 8),
					BorderColor3 = FromRGB(42, 49, 45),
					Size = UDim2New(1, -16, 0, 50),
					BorderSizePixel = 2,
					BackgroundColor3 = FromRGB(157, 175, 255)
				})  Items["CurrentColor"]:AddToTheme({BorderColor3 = "Outline"})

				Instances:Create("UIStroke", {
					Parent = Items["CurrentColor"].Instance,
					Name = "\0",
					Color = FromRGB(12, 12, 12),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Border"})

				Instances:Create("UIGradient", {
					Parent = Items["CurrentColor"].Instance,
					Name = "\0",
					Rotation = 82,
					Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(154, 154, 154))}
				})

				Items["RGBColor"] = Instances:Create("TextLabel", {
					Parent = OtherTabItems["PageContent"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = "RGB:",
					Size = UDim2New(1, -16, 0, 15),
					Position = UDim2New(0, 8, 0, 65),
					BackgroundTransparency = 1,
					TextXAlignment = Enum.TextXAlignment.Left,
					BorderSizePixel = 0,
					RichText = true,
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Items["HEXColor"] = Instances:Create("TextLabel", {
					Parent = OtherTabItems["PageContent"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = "HEX:",
					Size = UDim2New(1, -16, 0, 15),
					Position = UDim2New(0, 8, 0, 85),
					BackgroundTransparency = 1,
					TextXAlignment = Enum.TextXAlignment.Left,
					BorderSizePixel = 0,
					RichText = true,
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Items["HSVColor"] = Instances:Create("TextLabel", {
					Parent = OtherTabItems["PageContent"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = "HSV:",
					Size = UDim2New(1, -16, 0, 15),
					Position = UDim2New(0, 8, 0, 105),
					BackgroundTransparency = 1,
					TextXAlignment = Enum.TextXAlignment.Left,
					BorderSizePixel = 0,
					RichText = true,
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				local CopyNPasteButton, CopyNPasteButtonItems = Components:Button({
					Parent = OtherTabItems["PageContent"],
				})

				CopyNPasteButtonItems["Button"].Instance.Position = UDim2New(0, 8, 0, 145)
				CopyNPasteButtonItems["Button"].Instance.Size = UDim2New(1, -16, 0, 20)

				CopyNPasteButton:Add("Copy", function()
					Library.CopiedColor = Colorpicker.Color
				end)

				CopyNPasteButton:Add("Paste", function()
					if Library.CopiedColor then
						Colorpicker:Set(Library.CopiedColor)
					end
				end)

				local Stash = { }

				IsSyncToggled = false

				local SyncColorpickersToggle, SyncColorpickerToggleItems = Components:Toggle({
					Parent = OtherTabItems["PageContent"],
					Flag = "SyncColorpickers"..Colorpicker.Flag,
					Name = "Sync colorpickers",
					Default = false,
					Callback = function(Value)
						IsSyncToggled = Value
						if Value then 
							for Index, Value in Library.Colorpickers do 
								Stash[Value] = Value.Color
								Value:Set(Colorpicker.Color)
							end
						else
							for Index, Value in Library.Colorpickers do 
								if Stash[Value] then
									Value:Set(Stash[Value])
								end
							end
						end
					end
				})

				SyncColorpickerToggleItems["Toggle"].Instance.Position = UDim2New(0, 8, 0, 125)
				SyncColorpickerToggleItems["Toggle"].Instance.Size = UDim2New(1, -16, 0, 12)
			end

			local Debounce = false
			local RenderStepped  

			function Colorpicker:SetOpen(Bool)
				if Debounce then 
					return
				end

				Colorpicker.IsOpen = Bool

				Debounce = true 

				if Colorpicker.IsOpen then 
					Items["ColorpickerWindow"].Instance.Visible = true
					Items["ColorpickerWindow"].Instance.Parent = Library.Holder.Instance

					RenderStepped = RunService.RenderStepped:Connect(function()
						Items["ColorpickerWindow"].Instance.Position = UDim2New(0, Items["ColorpickerButton"].Instance.AbsolutePosition.X, 0, Items["ColorpickerButton"].Instance.AbsolutePosition.Y + Items["ColorpickerButton"].Instance.AbsoluteSize.Y + 5)
					end)

					if not Data.Debounce then
						for Index, Value in Library.OpenFrames do 
							if Value ~= Colorpicker and Value ~= AnimationsDropdownItems then 
								Value:SetOpen(false)
							end
						end

						Library.OpenFrames[Colorpicker] = Colorpicker 
					end
				else
					if not Data.Debounce then 
						if Library.OpenFrames[Colorpicker] then 
							Library.OpenFrames[Colorpicker] = nil
						end
					end

					if RenderStepped then 
						RenderStepped:Disconnect()
						RenderStepped = nil
					end
				end

				local Descendants = Items["ColorpickerWindow"].Instance:GetDescendants()
				TableInsert(Descendants, Items["ColorpickerWindow"].Instance)

				local NewTween

				for Index, Value in Descendants do 
					local TransparencyProperty = Tween:GetProperty(Value)

					if not TransparencyProperty then
						continue 
					end

					if type(TransparencyProperty) == "table" then 
						for _, Property in TransparencyProperty do 
							NewTween = Tween:FadeItem(Value, Property, Bool, Library.FadeSpeed)
						end
					else
						NewTween = Tween:FadeItem(Value, TransparencyProperty, Bool, Library.FadeSpeed)
					end
				end

				NewTween.Tween.Completed:Connect(function()
					Debounce = false 
					Items["ColorpickerWindow"].Instance.Visible = Colorpicker.IsOpen
					task.wait(0.2)
					Items["ColorpickerWindow"].Instance.Parent = not Colorpicker.IsOpen and Library.UnusedHolder.Instance or Library.Holder.Instance
				end)
			end

			UpdateSync = function(Bool)
				if IsSyncToggled and Bool then 
					for Index, Value in Library.Colorpickers do 
						if Value ~= Colorpicker and not StringFind(Value.Flag, "Theme") then
							Value:Set(Colorpicker.Color)
						end
					end
				end
			end

			function Colorpicker:Update(IsFromAlpha, UpdateSyncc)
				local Hue, Saturation, Value = Colorpicker.Hue, Colorpicker.Saturation, Colorpicker.Value
				Colorpicker.Color = FromHSV(Hue, Saturation, Value)
				Colorpicker.HexValue = Colorpicker.Color:ToHex()

				Library.Flags[Colorpicker.Flag] = {
					Alpha = Colorpicker.Alpha,
					Color = Colorpicker.HexValue
				}

				Items["ColorpickerButton"]:Tween(nil, {BackgroundColor3 = Colorpicker.Color})
				Items["ColorpickerButtonInline"]:Tween(nil, {BackgroundColor3 = Colorpicker.Color})

				UpdateSync(UpdateSyncc)

				if OtherTab then
					Items["CurrentColor"]:Tween(nil, {BackgroundColor3 = Colorpicker.Color})

					local Red = MathFloor(Colorpicker.Color.R * 255)
					local Green = MathFloor(Colorpicker.Color.G * 255)
					local Blue = MathFloor(Colorpicker.Color.B * 255)
					local RedGreenBlue = tostring(Red) .. ", " .. tostring(Green) .. ", " .. tostring(Blue)

					local FloorHue, FloorSat, FloorVal = nil, nil, nil

					Items["RGBColor"].Instance.Text = "RGB: "..RedGreenBlue
					Items["HSVColor"].Instance.Text = `HSV: %1, %1, %1`
					Items["HEXColor"].Instance.Text = "HEX: " .. "#" .. Colorpicker.HexValue
				end

				Items["Palette"]:Tween(nil, {BackgroundColor3 = FromHSV(Hue, 1, 1)})

				if not IsFromAlpha then 
					Items["Alpha"]:Tween(nil, {BackgroundColor3 = Colorpicker.Color})
				end

				if Data.Callback then 
					Library:SafeCall(Data.Callback, Colorpicker.Color, Colorpicker.Alpha)
				end
			end

			function Colorpicker:Set(Color, Alpha)
				if type(Color) == "table" then
					Color = FromRGB(Color[1], Color[2], Color[3])
					Alpha = Color[4]
				elseif type(Color) == "string" then
					Color = FromHex(Color)
				end 

				Colorpicker.Hue, Colorpicker.Saturation, Colorpicker.Value = Color:ToHSV()
				Colorpicker.Alpha = Alpha or 0  

				local PaletteValueX = MathClamp(1 - Colorpicker.Saturation, 0, 0.99)
				local PaletteValueY = MathClamp(1 - Colorpicker.Value, 0, 0.99)

				local AlphaPositionX = MathClamp(Colorpicker.Alpha, 0, 0.995)

				local HuePositionY = MathClamp(Colorpicker.Hue, 0, 0.995)

				Items["PaletteDragger"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2New(PaletteValueX, 0, PaletteValueY, 0)})
				Items["HueDragger"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2New(0, 0, HuePositionY, 0)})
				Items["AlphaDragger"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2New(AlphaPositionX, 0, 0, 0)})
				Colorpicker:Update(true, true)
			end

			Items["ColorpickerButton"]:Connect("MouseButton1Down", function()
				Colorpicker:SetOpen(not Colorpicker.IsOpen)
			end)

			local SlidingPalette = false
			local PaletteChanged

			function Colorpicker:SlidePalette(Input)
				if not Input or not SlidingPalette then
					return
				end

				local ValueX = MathClamp(1 - (Input.Position.X - Items["Palette"].Instance.AbsolutePosition.X) / Items["Palette"].Instance.AbsoluteSize.X, 0, 1)
				local ValueY = MathClamp(1 - (Input.Position.Y - Items["Palette"].Instance.AbsolutePosition.Y) / Items["Palette"].Instance.AbsoluteSize.Y, 0, 1)

				Colorpicker.Saturation = ValueX
				Colorpicker.Value = ValueY

				local SlideX = MathClamp((Input.Position.X - Items["Palette"].Instance.AbsolutePosition.X) / Items["Palette"].Instance.AbsoluteSize.X, 0, 0.99)
				local SlideY = MathClamp((Input.Position.Y - Items["Palette"].Instance.AbsolutePosition.Y) / Items["Palette"].Instance.AbsoluteSize.Y, 0, 0.99)

				Items["PaletteDragger"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2New(SlideX, 0, SlideY, 0)})
				Colorpicker:Update(false, true)
			end

			local SlidingHue = false
			local HueChanged

			function Colorpicker:SlideHue(Input)
				if not Input or not SlidingHue then
					return
				end

				local ValueY = MathClamp((Input.Position.Y - Items["Hue"].Instance.AbsolutePosition.Y) / Items["Hue"].Instance.AbsoluteSize.Y, 0, 1)

				Colorpicker.Hue = ValueY

				local SlideY = MathClamp((Input.Position.Y - Items["Hue"].Instance.AbsolutePosition.Y) / Items["Hue"].Instance.AbsoluteSize.Y, 0, 0.995)

				Items["HueDragger"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2New(0, 0, SlideY, 0)})
				Colorpicker:Update(false, true)
			end

			local SlidingAlpha = false 
			local AlphaChanged

			function Colorpicker:SlideAlpha(Input)
				if not Input or not SlidingAlpha then
					return
				end

				local ValueX = MathClamp((Input.Position.X - Items["Alpha"].Instance.AbsolutePosition.X) / Items["Alpha"].Instance.AbsoluteSize.X, 0, 1)

				Colorpicker.Alpha = ValueX

				local SlideX = MathClamp((Input.Position.X - Items["Alpha"].Instance.AbsolutePosition.X) / Items["Alpha"].Instance.AbsoluteSize.X, 0, 0.995)

				Items["AlphaDragger"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2New(SlideX, 0, 0, 0)})
				Colorpicker:Update(true, true)
			end

			Items["Palette"]:Connect("InputBegan", function(Input)
				if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
					SlidingPalette = true 

					Colorpicker:SlidePalette(Input)

					if PaletteChanged then
						return
					end

					PaletteChanged = Input.Changed:Connect(function()
						if Input.UserInputState == Enum.UserInputState.End then
							SlidingPalette = false

							PaletteChanged:Disconnect()
							PaletteChanged = nil
						end
					end)
				end
			end)

			Items["HueInline"]:Connect("InputBegan", function(Input)
				if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
					SlidingHue = true 

					Colorpicker:SlideHue(Input)

					if HueChanged then
						return
					end

					HueChanged = Input.Changed:Connect(function()
						if Input.UserInputState == Enum.UserInputState.End then
							SlidingHue = false

							HueChanged:Disconnect()
							HueChanged = nil
						end
					end)
				end
			end)

			Items["Alpha"]:Connect("InputBegan", function(Input)
				if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
					SlidingAlpha = true 

					Colorpicker:SlideAlpha(Input)

					if AlphaChanged then
						return
					end

					AlphaChanged = Input.Changed:Connect(function()
						if Input.UserInputState == Enum.UserInputState.End then
							SlidingAlpha = false

							AlphaChanged:Disconnect()
							AlphaChanged = nil
						end
					end)
				end
			end)

			Library:Connect(UserInputService.InputChanged, function(Input)
				if Input.UserInputType == Enum.UserInputType.MouseMovement or Input.UserInputType == Enum.UserInputType.Touch then
					if SlidingPalette then 
						Colorpicker:SlidePalette(Input)
					end

					if SlidingHue then
						Colorpicker:SlideHue(Input)
					end

					if SlidingAlpha then
						Colorpicker:SlideAlpha(Input)
					end
				end
			end)

			Library:Connect(UserInputService.InputBegan, function(Input)
				if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
					if not Colorpicker.IsOpen then
						return
					end

					if Library:IsMouseOverFrame(Items["ColorpickerWindow"]) then
						return
					end

					if KeyframeOneLabel and KeyframeTwoLabel then
						if Library:IsMouseOverFrame(KeyframeOneColorpickerItems["ColorpickerWindow"]) then
							return
						end

						if Library:IsMouseOverFrame(KeyframeTwoColorpickerItems["ColorpickerWindow"]) then
							return
						end
					end

					Colorpicker:SetOpen(false)
				end
			end)

			if Data.Default then
				Colorpicker:Set(Data.Default, Data.Alpha)
				OldColor = Colorpicker.Color
			end

			Library.Colorpickers[Colorpicker] = Colorpicker

			Library.SetFlags[Colorpicker.Flag] = function(Value, Alpha)
				Colorpicker:Set(Value, Alpha)
			end

			return Colorpicker, Items
		end

		Components.Keybind = function(self, Data)
			local Keybind = { 
				IsOpen = false,

				Key = "",
				Value = "",

				Flag = Data.Flag,

				Mode = "",

				Toggled = false,

				Picking = false
			}

			local KeylistItem

			if Library.KeyList then
				KeylistItem = Library.KeyList:Add("", "", "")
			end

			local Items = { } do
				Items["KeyButton"] = Instances:Create("TextButton", {
					Parent = Data.Parent.Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					TextTransparency = 0.4000000059604645,
					Text = "MB2",
					AutoButtonColor = false,
					Size = UDim2New(0, 0, 1, 0),
					BackgroundTransparency = 1,
					BorderSizePixel = 0,
					BorderColor3 = FromRGB(0, 0, 0),
					AutomaticSize = Enum.AutomaticSize.X,
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["KeyButton"]:AddToTheme({TextColor3 = "Text"})

				Items["KeyButton"]:TextBorder()

				Items["KeybindWindow"] = Instances:Create("Frame", {
					Parent = Library.UnusedHolder.Instance,
					Name = "\0",
					Position = UDim2New(0.007692307699471712, 0, 0.35323384404182434, 0),
					BorderColor3 = FromRGB(12, 12, 12),
					Size = UDim2New(0, 70, 0, 90),
					BorderSizePixel = 2,
					BackgroundColor3 = FromRGB(14, 17, 15)
				})  Items["KeybindWindow"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Border"})

				Items["Toggle"] = Instances:Create("TextButton", {
					Parent = Items["KeybindWindow"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = "Toggle",
					AutoButtonColor = false,
					Position = UDim2New(0, 8, 0, 8),
					Size = UDim2New(1, -16, 0, 20),
					BorderSizePixel = 0,
					TextSize = 9,
					BackgroundColor3 = FromRGB(202, 243, 255)
				})  Items["Toggle"]:AddToTheme({BackgroundColor3 = "Accent", TextColor3 = "Text"})

				Items["Toggle"]:TextBorder()

				Instances:Create("UIStroke", {
					Parent = Items["KeybindWindow"].Instance,
					Name = "\0",
					Color = FromRGB(42, 49, 45),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Outline"})

				Items["Hold"] = Instances:Create("TextButton", {
					Parent = Items["KeybindWindow"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = "Hold",
					AutoButtonColor = false,
					BackgroundTransparency = 1,
					Position = UDim2New(0, 8, 0, 38),
					Size = UDim2New(1, -16, 0, 20),
					BorderSizePixel = 0,
					TextSize = 9,
					BackgroundColor3 = FromRGB(202, 243, 255)
				})  Items["Hold"]:AddToTheme({BackgroundColor3 = "Accent", TextColor3 = "Text"})

				Items["Hold"]:TextBorder()

				Items["Always"] = Instances:Create("TextButton", {
					Parent = Items["KeybindWindow"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = "Always",
					AutoButtonColor = false,
					BackgroundTransparency = 1,
					Position = UDim2New(0, 8, 0, 68),
					Size = UDim2New(1, -16, 0, 20),
					BorderSizePixel = 0,
					TextSize = 9,
					BackgroundColor3 = FromRGB(202, 243, 255)
				})  Items["Always"]:AddToTheme({BackgroundColor3 = "Accent", TextColor3 = "Text"})  

				Items["Always"]:TextBorder()
			end

			local Modes = {
				["Toggle"] = Items["Toggle"],
				["Hold"] = Items["Hold"],
				["Always"] = Items["Always"]
			}

			local Update = function()
				if KeylistItem then
					KeylistItem:SetText(Keybind.Value, Data.Name, Keybind.Mode)
					KeylistItem:SetStatus(Keybind.Toggled)
				end
			end

			function Keybind:Get()
				return Keybind.Key, Keybind.Mode, Keybind.Toggled
			end

			function Keybind:Set(Key)
				if StringFind(tostring(Key), "Enum") then 
					Keybind.Key = tostring(Key)

					Key = Key.Name == "Backspace" and "None" or Key.Name

					local KeyString = Keys[Keybind.Key] or StringGSub(Key, "Enum.", "") or "None"
					local TextToDisplay = StringGSub(StringGSub(KeyString, "KeyCode.", ""), "UserInputType.", "") or "None"

					Keybind.Value = TextToDisplay
					Items["KeyButton"].Instance.Text = TextToDisplay

					Library.Flags[Keybind.Flag] = {
						Mode = Keybind.Mode,
						Key = Keybind.Key,
						Toggled = Keybind.Toggled
					}

					if Data.Callback then 
						Library:SafeCall(Data.Callback, Keybind.Toggled)
					end

					Update()
				elseif type(Key) == "table" then
					local RealKey = Key.Key == "Backspace" and "None" or Key.Key
					Keybind.Key = tostring(Key.Key)

					if Key.Mode then
						Keybind.Mode = Key.Mode
						Keybind:SetMode(Key.Mode)
					else
						Keybind.Mode = "Toggle"
						Keybind:SetMode("Toggle")
					end

					local KeyString = Keys[Keybind.Key] or StringGSub(tostring(RealKey), "Enum.", "") or RealKey
					local TextToDisplay = KeyString and StringGSub(StringGSub(KeyString, "KeyCode.", ""), "UserInputType.", "") or "None"

					TextToDisplay = StringGSub(StringGSub(KeyString, "KeyCode.", ""), "UserInputType.", "")

					Keybind.Value = TextToDisplay
					Items["KeyButton"].Instance.Text = TextToDisplay

					if Data.Callback then 
						Library:SafeCall(Data.Callback, Keybind.Toggled)
					end

					Update()
				elseif TableFind({"Toggle", "Hold", "Always"}, Key) then
					Keybind.Mode = Key
					Keybind:SetMode(Keybind.Mode)

					if Data.Callback then 
						Library:SafeCall(Data.Callback, Keybind.Toggled)
					end

					Update()
				end

				Keybind.Picking = false
			end

			local Debounce = false
			local RenderStepped  

			function Keybind:SetOpen(Bool)
				if Debounce then 
					return
				end

				Keybind.IsOpen = Bool

				Debounce = true 

				if Keybind.IsOpen then 
					Items["KeybindWindow"].Instance.Visible = true
					Items["KeybindWindow"].Instance.Parent = Library.Holder.Instance

					RenderStepped = RunService.RenderStepped:Connect(function()
						Items["KeybindWindow"].Instance.Position = UDim2New(0, Items["KeyButton"].Instance.AbsolutePosition.X, 0, Items["KeyButton"].Instance.AbsolutePosition.Y + Items["KeyButton"].Instance.AbsoluteSize.Y + 5)
					end)

					if not Debounce then 
						for Index, Value in Library.OpenFrames do 
							if Value ~= Keybind then 
								Value:SetOpen(false)
							end
						end

						Library.OpenFrames[Keybind] = Keybind 
					end
				else
					if not Debounce then 
						if Library.OpenFrames[Keybind] then 
							Library.OpenFrames[Keybind] = nil
						end
					end

					if RenderStepped then 
						RenderStepped:Disconnect()
						RenderStepped = nil
					end
				end

				local Descendants = Items["KeybindWindow"].Instance:GetDescendants()
				TableInsert(Descendants, Items["KeybindWindow"].Instance)

				local NewTween

				for Index, Value in Descendants do 
					local TransparencyProperty = Tween:GetProperty(Value)

					if not TransparencyProperty then
						continue 
					end

					if type(TransparencyProperty) == "table" then 
						for _, Property in TransparencyProperty do 
							NewTween = Tween:FadeItem(Value, Property, Bool, Library.FadeSpeed)
						end
					else
						NewTween = Tween:FadeItem(Value, TransparencyProperty, Bool, Library.FadeSpeed)
					end
				end

				NewTween.Tween.Completed:Connect(function()
					Debounce = false 
					Items["KeybindWindow"].Instance.Visible = Keybind.IsOpen
					task.wait(0.2)
					Items["KeybindWindow"].Instance.Parent = not Keybind.IsOpen and Library.UnusedHolder.Instance or Library.Holder.Instance
				end)
			end

			function Keybind:SetMode(Mode)
				for Index, Value in Modes do 
					if Index == Mode then
						Value:Tween(nil, {BackgroundTransparency = 0})
					else
						Value:Tween(nil, {BackgroundTransparency = 1})
					end
				end

				Library.Flags[Keybind.Flag] = {
					Mode = Keybind.Mode,
					Key = Keybind.Key,
					Toggled = Keybind.Toggled
				}

				if Data.Callback then 
					Library:SafeCall(Data.Callback, Keybind.Toggled)
				end

				Update()
			end

			function Keybind:Press(Bool)
				if Keybind.Mode == "Toggle" then 
					Keybind.Toggled = not Keybind.Toggled
				elseif Keybind.Mode == "Hold" then 
					Keybind.Toggled = Bool
				elseif Keybind.Mode == "Always" then 
					Keybind.Toggled = true
				end

				Library.Flags[Keybind.Flag] = {
					Mode = Keybind.Mode,
					Key = Keybind.Key,
					Toggled = Keybind.Toggled
				}

				if Data.Callback then 
					Library:SafeCall(Data.Callback, Keybind.Toggled)
				end

				Update()
			end

			Items["KeyButton"]:Connect("MouseButton1Click", function()
				Keybind.Picking = true 

				Items["KeyButton"].Instance.Text = "."
				Library:Thread(function()
					local Count = 1

					while true do 
						if not Keybind.Picking then 
							break
						end

						if Count == 4 then
							Count = 1
						end

						Items["KeyButton"].Instance.Text = Count == 1 and "." or Count == 2 and ".." or Count == 3 and "..."
						Count += 1
						task.wait(0.5)
					end
				end)

				local InputBegan
				InputBegan = UserInputService.InputBegan:Connect(function(Input)
					if Input.UserInputType == Enum.UserInputType.Keyboard then 
						Keybind:Set(Input.KeyCode)
					else
						Keybind:Set(Input.UserInputType)
					end

					InputBegan:Disconnect()
					InputBegan = nil
				end)
			end)

			Items["KeyButton"]:Connect("MouseButton2Down", function()
				Keybind:SetOpen(not Keybind.IsOpen)
			end)

			Library:Connect(UserInputService.InputBegan, function(Input)
				if Keybind.Value == "None" then
					return
				end

				if tostring(Input.KeyCode) == Keybind.Key then
					if Keybind.Mode == "Toggle" then 
						Keybind:Press()
					elseif Keybind.Mode == "Hold" then 
						Keybind:Press(true)
					elseif Keybind.Mode == "Always" then 
						Keybind:Press(true)
					end
				elseif tostring(Input.UserInputType) == Keybind.Key then
					if Keybind.Mode == "Toggle" then 
						Keybind:Press()
					elseif Keybind.Mode == "Hold" then 
						Keybind:Press(true)
					elseif Keybind.Mode == "Always" then 
						Keybind:Press(true)
					end
				end

				if Input.UserInputType == Enum.UserInputType.MouseButton1 then
					if not Keybind.IsOpen then
						return
					end

					if Library:IsMouseOverFrame(Items["KeybindWindow"]) then
						return
					end

					Keybind:SetOpen(false)
				end
			end)

			Library:Connect(UserInputService.InputEnded, function(Input)
				if Keybind.Value == "None" then
					return
				end

				if tostring(Input.KeyCode) == Keybind.Key then
					if Keybind.Mode == "Hold" then 
						Keybind:Press(false)
					elseif Keybind.Mode == "Always" then 
						Keybind:Press(true)
					end
				elseif tostring(Input.UserInputType) == Keybind.Key then
					if Keybind.Mode == "Hold" then 
						Keybind:Press(false)
					elseif Keybind.Mode == "Always" then 
						Keybind:Press(true)
					end
				end
			end)

			Items["Toggle"]:Connect("MouseButton1Down", function()
				Keybind.Mode = "Toggle"
				Keybind:SetMode("Toggle")
			end)

			Items["Hold"]:Connect("MouseButton1Down", function()
				Keybind.Mode = "Hold"
				Keybind:SetMode("Hold")
			end)

			Items["Always"]:Connect("MouseButton1Down", function()
				Keybind.Mode = "Always"
				Keybind:SetMode("Always")
			end)

			if Data.Default then
				Keybind:Set({Key = Data.Default, Mode = Data.Mode or "Toggle"})
			end

			Library.SetFlags[Keybind.Flag] = function(Value)
				Keybind:Set(Value)
			end

			return Keybind, Items 
		end

		Components.Textbox = function(self, Data)
			local Textbox = {
				Flag = Data.Flag,
				Value = ""
			}

			local Items = { } do
				Items["Textbox"] = Instances:Create("Frame", {
					Parent = Data.Parent.Instance,
					Name = "\0",
					BackgroundTransparency = 1,
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(1, 0, 0, 40),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Items["Text"] = Instances:Create("TextLabel", {
					Parent = Items["Textbox"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = Data.Name,
					BackgroundTransparency = 1,
					Size = UDim2New(0, 0, 0, 15),
					BorderSizePixel = 0,
					AutomaticSize = Enum.AutomaticSize.X,
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["Text"]:AddToTheme({TextColor3 = "Text"})

				Items["Text"]:TextBorder()

				Items["Background"] = Instances:Create("Frame", {
					Parent = Items["Textbox"].Instance,
					Name = "\0",
					AnchorPoint = Vector2New(0, 1),
					Position = UDim2New(0, 0, 1, 0),
					BorderColor3 = FromRGB(12, 12, 12),
					Size = UDim2New(1, 0, 0, 20),
					BorderSizePixel = 2,
					BackgroundColor3 = FromRGB(30, 36, 31)
				})  Items["Background"]:AddToTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})

				Instances:Create("UIGradient", {
					Parent = Items["Background"].Instance,
					Name = "\0",
					Rotation = -165,
					Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(208, 208, 208))}
				}):AddToTheme({Color = function()
					return RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, Library.Theme.Gradient)}
				end})

				Instances:Create("UIStroke", {
					Parent = Items["Background"].Instance,
					Name = "\0",
					Color = FromRGB(42, 49, 45),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Outline"})

				Items["Input"] = Instances:Create("TextBox", {
					Parent = Items["Background"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					PlaceholderColor3 = FromRGB(185, 185, 185),
					PlaceholderText = Data.Placeholder,
					TextSize = 9,
					Size = UDim2New(1, 0, 1, 0),
					ClipsDescendants = true,
					BorderColor3 = FromRGB(0, 0, 0),
					Text = "",
					TextColor3 = FromRGB(235, 235, 235),
					BackgroundTransparency = 1,
					TextXAlignment = Enum.TextXAlignment.Left,
					Position = UDim2New(0, 0, 0, 0),
					ClearTextOnFocus = false,
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["Input"]:AddToTheme({TextColor3 = "Text", PlaceholderColor3 = "Placeholder Text"})

				Items["Input"]:TextBorder()

				Instances:Create("UIPadding", {
					Parent = Items["Input"].Instance,
					Name = "\0",
					PaddingLeft = UDimNew(0, 8),
					PaddingRight = UDimNew(0, 8)
				})
			end

			function Textbox:Get()
				return Textbox.Value
			end

			function Textbox:SetVisibility(Bool)
				Items["Textbox"].Instance.Visible = Bool
			end

			function Textbox:Set(Value)
				if Data.Numeric then
					if (not tonumber(Value)) and StringLen(tostring(Value)) > 0 then
						Value = Textbox.Value
					end
				end

				Textbox.Value = Value
				Items["Input"].Instance.Text = Value
				Library.Flags[Textbox.Flag] = Value

				if Data.Callback then
					Library:SafeCall(Data.Callback, Value)
				end
			end

			if Data.Finished then 
				Items["Input"]:Connect("FocusLost", function(PressedEnterQuestionMark)
					if PressedEnterQuestionMark then
						Textbox:Set(Items["Input"].Instance.Text)
					end
				end)
			else
				Items["Input"].Instance:GetPropertyChangedSignal("Text"):Connect(function()
					Textbox:Set(Items["Input"].Instance.Text)
				end)
			end

			if Data.Default then
				Textbox:Set(Data.Default)
			end

			Library.SetFlags[Textbox.Flag] = function(Value)
				Textbox:Set(Value)
			end

			return Textbox, Items
		end

		Components.Searchbox = function(self, Data) -- just pasted the entire dropdown fucntion with different instances, i cant be asked to make a whole new functionality
			local Dropdown = {
				Flag = Data.Flag, 
				Value = { },
				Options = { },
				IsOpen = false
			}

			local Items = { } do
				Items["Listbox"] = Instances:Create("Frame", {
					Parent = Data.Parent.Instance,
					Name = "\0",
					BackgroundTransparency = 1,
					BorderColor3 = FromRGB(0, 0, 0),
					Size = UDim2New(1, 0, 0, 185),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})

				Items["Search"] = Instances:Create("Frame", {
					Parent = Items["Listbox"].Instance,
					Name = "\0",
					BackgroundTransparency = 0.4000000059604645,
					Size = UDim2New(0, 0, 0, 20),
					BorderColor3 = FromRGB(12, 12, 12),
					BorderSizePixel = 2,
					AutomaticSize = Enum.AutomaticSize.X,
					BackgroundColor3 = FromRGB(14, 17, 15)
				})  Items["Search"]:AddToTheme({BorderColor3 = "Border", BackgroundColor3 = "Background"})

				Instances:Create("UIStroke", {
					Parent = Items["Search"].Instance,
					Name = "\0",
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border,
					Transparency = 0.4000000059604645,
					Color = FromRGB(42, 49, 45),
					LineJoinMode = Enum.LineJoinMode.Miter
				}):AddToTheme({Color = "Outline"})

				Items["Icon"] = Instances:Create("ImageLabel", {
					Parent = Items["Search"].Instance,
					Name = "\0",
					ScaleType = Enum.ScaleType.Fit,
					BorderColor3 = FromRGB(0, 0, 0),
					AnchorPoint = Vector2New(0, 0.5),
					Image = "rbxassetid://71197946135150",
					BackgroundTransparency = 1,
					Position = UDim2New(0, 0, 0.5, 0),
					Size = UDim2New(0, 16, 0, 16),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["Icon"]:AddToTheme({ImageColor3 = "Text"})

				Items["Input"] = Instances:Create("TextBox", {
					Parent = Items["Search"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = "",
					Size = UDim2New(0, 0, 1, 0),
					Position = UDim2New(0, 22, 0, 0),
					BorderSizePixel = 0,
					BackgroundTransparency = 1,
					PlaceholderColor3 = FromRGB(185, 185, 185),
					AutomaticSize = Enum.AutomaticSize.X,
					PlaceholderText = "search..",
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["Input"]:AddToTheme({TextColor3 = "Text", PlaceholderColor3 = "Placeholder Text"})

				Items["Input"]:TextBorder()

				Instances:Create("UIPadding", {
					Parent = Items["Search"].Instance,
					Name = "\0",
					PaddingRight = UDimNew(0, 5),
					PaddingLeft = UDimNew(0, 3)
				})

				Items["RealListbox"] = Instances:Create("Frame", {
					Parent = Items["Listbox"].Instance,
					Name = "\0",
					ClipsDescendants = true,
					BorderColor3 = FromRGB(12, 12, 12),
					Size = UDim2New(1, 0, 1, -28),
					SelectionGroup = true,
					Position = UDim2New(0, 0, 0, 28),
					Selectable = true,
					Active = true,
					BorderSizePixel = 2,
					BackgroundColor3 = FromRGB(30, 36, 31)
				})  Items["RealListbox"]:AddToTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})

				Instances:Create("UIStroke", {
					Parent = Items["RealListbox"].Instance,
					Name = "\0",
					Color = FromRGB(42, 49, 45),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Outline"})

				Instances:Create("UIGradient", {
					Parent = Items["RealListbox"].Instance,
					Name = "\0",
					Rotation = -165,
					Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(208, 208, 208))}
				}):AddToTheme({Color = function()
					return RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, Library.Theme.Gradient)}
				end})

				Items["List"] = Instances:Create("ScrollingFrame", {
					Parent = Items["RealListbox"].Instance,
					Name = "\0",
					Active = true,
					AutomaticCanvasSize = Enum.AutomaticSize.Y,
					BorderSizePixel = 0,
					CanvasSize = UDim2New(0, 0, 0, 0),
					ScrollBarImageColor3 = FromRGB(202, 243, 255),
					MidImage = "rbxassetid://136419474381965",
					BorderColor3 = FromRGB(0, 0, 0),
					ScrollBarThickness = 2,
					Size = UDim2New(1, -12, 1, -10),
					Position = UDim2New(0, 3, 0, 5),
					TopImage = "rbxassetid://136419474381965",
					CanvasPosition = Vector2New(0, 57),
					BottomImage = "rbxassetid://136419474381965",
					BackgroundTransparency = 1,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  Items["List"]:AddToTheme({ScrollBarImageColor3 = "Accent"})

				Instances:Create("UIListLayout", {
					Parent = Items["List"].Instance,
					Name = "\0",
					Padding = UDimNew(0, 2),
					SortOrder = Enum.SortOrder.LayoutOrder
				})

				Instances:Create("UIPadding", {
					Parent = Items["List"].Instance,
					Name = "\0",
					PaddingBottom = UDimNew(0, 8),
					PaddingLeft = UDimNew(0, 5),
				})
			end

			function Dropdown:Get()
				return Dropdown.Value
			end

			function Dropdown:SetVisibility(Bool)
				Items["Listbox"].Instance.Visible = Bool
			end

			function Dropdown:Set(Option)
				if Data.Multi then 
					if type(Option) ~= "table" then 
						return
					end

					Dropdown.Value = Option
					Library.Flags[Dropdown.Flag] = Option

					for Index, Value in Option do
						local OptionData = Dropdown.Options[Value]

						if not OptionData then
							continue
						end

						OptionData.Selected = true 
						OptionData:Toggle("Active")
					end
				else
					if not Dropdown.Options[Option] then
						return
					end

					local OptionData = Dropdown.Options[Option]

					Dropdown.Value = Option
					Library.Flags[Dropdown.Flag] = Option

					for Index, Value in Dropdown.Options do
						if Value ~= OptionData then
							Value.Selected = false 
							Value:Toggle("Inactive")
						else
							Value.Selected = true 
							Value:Toggle("Active")
						end
					end
				end

				if Data.Callback then   
					Library:SafeCall(Data.Callback, Dropdown.Value)
				end
			end

			function Dropdown:Add(Option)
				local OptionButton = Instances:Create("TextButton", {
					Parent = Items["List"].Instance,
					Name = "\0",
					FontFace = Library.Font,
					TextColor3 = FromRGB(235, 235, 235),
					BorderColor3 = FromRGB(0, 0, 0),
					Text = Option,
					AutoButtonColor = false,
					BorderSizePixel = 0,
					BackgroundTransparency = 1,
					TextXAlignment = Enum.TextXAlignment.Left,
					Size = UDim2New(1, 0, 0, 20),
					ZIndex = 1,
					TextSize = 9,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  OptionButton:AddToTheme({TextColor3 = "Text"})

				OptionButton:TextBorder()

				local OptionData = {
					Button = OptionButton,
					Name = Option,
					Selected = false
				}

				function OptionData:Toggle(Status)
					if Status == "Active" then 
						OptionData.Button:ChangeItemTheme({TextColor3 = "Accent"})
						OptionData.Button:Tween(nil, {TextColor3 = Library.Theme.Accent})
					else
						OptionData.Button:ChangeItemTheme({TextColor3 = "Text"}) 
						OptionData.Button:Tween(nil, {TextColor3 = Library.Theme.Text})
					end
				end

				function OptionData:Set()
					OptionData.Selected = not OptionData.Selected

					if Data.Multi then 
						local Index = TableFind(Dropdown.Value, OptionData.Name)

						if Index then 
							TableRemove(Dropdown.Value, Index)
						else
							TableInsert(Dropdown.Value, OptionData.Name)
						end

						OptionData:Toggle(Index and "Inactive" or "Active")

						Library.Flags[Dropdown.Flag] = Dropdown.Value
					else
						if OptionData.Selected then 
							Dropdown.Value = OptionData.Name
							Library.Flags[Dropdown.Flag] = OptionData.Name

							OptionData.Selected = true
							OptionData:Toggle("Active")

							for Index, Value in Dropdown.Options do 
								if Value ~= OptionData then
									Value.Selected = false 
									Value:Toggle("Inactive")
								end
							end
						else
							Dropdown.Value = nil
							Library.Flags[Dropdown.Flag] = nil

							OptionData.Selected = false
							OptionData:Toggle("Inactive")
						end
					end

					if Data.Callback then
						Library:SafeCall(Data.Callback, Dropdown.Value)
					end
				end

				OptionData.Button:Connect("MouseButton1Down", function()
					OptionData:Set()
				end)

				Dropdown.Options[OptionData.Name] = OptionData
				return OptionData
			end

			function Dropdown:Remove(Option)
				if not Dropdown.Options[Option] then
					return
				end

				Dropdown.Options[Option].Button:Clean()
				Dropdown.Options[Option] = nil
			end

			function Dropdown:Refresh(List)
				for Index, Value in Dropdown.Options do 
					Dropdown:Remove(Value.Name)
				end

				for Index, Value in List do 
					Dropdown:Add(Value)
				end
			end

			Items["Listbox"]:OnHover(function()
				Items["Listbox"]:ChangeItemTheme({BackgroundColor3 = "Hovered Element", BorderColor3 = "Border"})
				Items["Listbox"]:Tween(nil, {BackgroundColor3 = Library.Theme["Hovered Element"]})
			end)

			Items["Listbox"]:OnHoverLeave(function()
				Items["Listbox"]:ChangeItemTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})
				Items["Listbox"]:Tween(nil, {BackgroundColor3 = Library.Theme["Element"]})
			end)

			local SearchStepped

			Items["Input"]:Connect("Focused", function()
				SearchStepped = RunService.RenderStepped:Connect(function()
					for Index, Value in Dropdown.Options do
						if Items["Input"].Instance.Text ~= "" then
							if StringFind(StringLower(Value.Name), StringLower(Items["Input"].Instance.Text)) then
								Value.Button.Instance.Visible = true
							else
								Value.Button.Instance.Visible = false
							end
						else
							Value.Button.Instance.Visible = true
						end
					end
				end)
			end)

			Items["Input"]:Connect("FocusLost", function()
				if SearchStepped then
					SearchStepped:Disconnect()
					SearchStepped = nil
				end
			end)

			for Index, Value in Data.Items do 
				Dropdown:Add(Value)
			end

			if Data.Default then 
				Dropdown:Set(Data.Default)
			end

			Library.SetFlags[Dropdown.Flag] = function(Value)
				Dropdown:Set(Value)
			end

			return Dropdown, Items 
		end
	end

	-- Library components
	Library.Watermark = function(self, Name)
		local Watermark = { }

		local Items = { } do 
			Items["Watermark"] = Instances:Create("Frame", {
				Parent = Library.Holder.Instance,
				Name = "\0",
				AnchorPoint = Vector2New(0.5, 1),
				Position = UDim2New(0.5, 0, 1, -12),
				BorderColor3 = FromRGB(12, 12, 12),
				BorderSizePixel = 2,
				AutomaticSize = Enum.AutomaticSize.XY,
				BackgroundColor3 = FromRGB(14, 17, 15)
			})  Items["Watermark"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Border"})

			Items["Watermark"]:MakeDraggable()

			Instances:Create("UIStroke", {
				Parent = Items["Watermark"].Instance,
				Name = "\0",
				Color = FromRGB(42, 49, 45),
				LineJoinMode = Enum.LineJoinMode.Miter,
				ApplyStrokeMode = Enum.ApplyStrokeMode.Border
			}):AddToTheme({Color = "Outline"})

			Instances:Create("UIPadding", {
				Parent = Items["Watermark"].Instance,
				Name = "\0",
				PaddingTop = UDimNew(0, 5),
				PaddingBottom = UDimNew(0, 7),
				PaddingRight = UDimNew(0, 5),
				PaddingLeft = UDimNew(0, 5)
			})

			Items["Text"] = Instances:Create("TextLabel", {
				Parent = Items["Watermark"].Instance,
				Name = "\0",
				FontFace = Library.Font,
				TextColor3 = FromRGB(235, 235, 235),
				BorderColor3 = FromRGB(0, 0, 0),
				Text = Name,
				Position = UDim2New(0, 0, 0, 2),
				BackgroundTransparency = 1,
				TextXAlignment = Enum.TextXAlignment.Left,
				BorderSizePixel = 0,
				AutomaticSize = Enum.AutomaticSize.XY,
				TextSize = 9,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})  Items["Text"]:AddToTheme({TextColor3 = "Text"})

			Items["Text"]:TextBorder()

			Items["Liner"] = Instances:Create("Frame", {
				Parent = Items["Watermark"].Instance,
				Name = "\0",
				Position = UDim2New(0, -5, 0, -5),
				BorderColor3 = FromRGB(0, 0, 0),
				Size = UDim2New(1, 10, 0, 1),
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(202, 243, 255)
			})  Items["Liner"]:AddToTheme({BackgroundColor3 = "Accent"})
		end

		function Watermark:SetVisibility(Bool)
			Items["Watermark"].Instance.Visible = Bool
		end

		return Watermark
	end

	Library.KeybindList = function(self)
		local KeybindList = { }
		Library.KeyList = KeybindList

		local Items = { } do
			Items["KeybindList"] = Instances:Create("Frame", {
				Parent = Library.Holder.Instance,
				Name = "\0",
				AnchorPoint = Vector2New(0, 0.5),
				Position = UDim2New(0, 12, 0.5, 55),
				BorderColor3 = FromRGB(12, 12, 12),
				Size = UDim2New(0, 116, 0, 32),
				BorderSizePixel = 2,
				BackgroundColor3 = FromRGB(14, 17, 15)
			})  Items["KeybindList"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Border"})

			Items["KeybindList"]:MakeDraggable()

			Instances:Create("UIStroke", {
				Parent = Items["KeybindList"].Instance,
				Name = "\0",
				Color = FromRGB(42, 49, 45),
				LineJoinMode = Enum.LineJoinMode.Miter,
				ApplyStrokeMode = Enum.ApplyStrokeMode.Border
			}):AddToTheme({Color = "Outline"})

			Items["Title"] = Instances:Create("TextLabel", {
				Parent = Items["KeybindList"].Instance,
				Name = "\0",
				FontFace = Library.Font,
				TextColor3 = FromRGB(235, 235, 235),
				BorderColor3 = FromRGB(0, 0, 0),
				Text = "Keybinds",
				Size = UDim2New(0, 0, 0, 20),
				BackgroundTransparency = 1,
				Position = UDim2New(0, 0, 0, -4),
				BorderSizePixel = 0,
				AutomaticSize = Enum.AutomaticSize.X,
				TextSize = 9,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})  Items["Title"]:AddToTheme({TextColor3 = "Text"})

			Items["Title"]:TextBorder()

			Instances:Create("UIPadding", {
				Parent = Items["KeybindList"].Instance,
				Name = "\0",
				PaddingTop = UDimNew(0, 8),
				PaddingBottom = UDimNew(0, 8),
				PaddingRight = UDimNew(0, 8),
				PaddingLeft = UDimNew(0, 8)
			})

			Items["Liner"] = Instances:Create("Frame", {
				Parent = Items["KeybindList"].Instance,
				Name = "\0",
				Position = UDim2New(0, 0, 0, 15),
				BorderColor3 = FromRGB(0, 0, 0),
				Size = UDim2New(1, 0, 0, 1),
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(202, 243, 255)
			})  Items["Liner"]:AddToTheme({BackgroundColor3 = "Accent"})

			Items["Content"] = Instances:Create("Frame", {
				Parent = Items["KeybindList"].Instance,
				Name = "\0",
				BorderColor3 = FromRGB(0, 0, 0),
				BackgroundTransparency = 1,
				Position = UDim2New(0, 0, 0, 32),
				Size = UDim2New(1, 0, 0, 0),
				BorderSizePixel = 0,
				AutomaticSize = Enum.AutomaticSize.Y,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})

			Instances:Create("UIListLayout", {
				Parent = Items["Content"].Instance,
				Name = "\0",
				SortOrder = Enum.SortOrder.LayoutOrder
			})
		end

		function KeybindList:Add(Key, Name, Mode)
			local NewKey = Instances:Create("TextLabel", {
				Parent = Items["Content"].Instance,
				Name = "\0",
				FontFace = Library.Font,
				TextColor3 = FromRGB(235, 235, 235),
				BorderColor3 = FromRGB(0, 0, 0),
				Text = "" ..Key .." - " ..Name .. " ("..Mode..")",
				BackgroundTransparency = 1,
				Size = UDim2New(0, 0, 0, 15),
				BorderSizePixel = 0,
				AutomaticSize = Enum.AutomaticSize.X,
				TextTransparency = 1,
				Visible = false,
				TextSize = 9,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})  NewKey:AddToTheme({TextColor3 = "Text"})

			NewKey:TextBorder()

			function NewKey:SetText(Key, Name, Mode)
				NewKey.Instance.Text = "" ..Key .." - " ..Name .. " ("..Mode..")"
			end

			function NewKey:SetStatus(Bool)
				if Bool then
					NewKey.Instance.Visible = true
					NewKey:Tween(nil, {TextTransparency = 0})
				else
					NewKey:Tween(nil, {TextTransparency = 1}).Tween.Completed:Connect(function()
						NewKey.Instance.Visible = false
					end)
				end
			end

			return NewKey
		end

		function KeybindList:SetVisibility(Bool)
			Items["KeybindList"].Instance.Visible = Bool
		end

		return KeybindList
	end

	Library.Notification = function(self, Title, Description, Duration)
		local Items = { } do 
			local NotificationSound = Instance.new("Sound")
			NotificationSound.SoundId = "rbxassetid://124951621656853"
			NotificationSound.Volume = 1
			NotificationSound.Parent = game:GetService("SoundService")
			NotificationSound:Play()
			game:GetService("Debris"):AddItem(NotificationSound, 5)

			Items["Notification"] = Instances:Create("Frame", {
				Parent = Library.NotifHolder.Instance,
				Name = "\0",
				Size = UDim2New(0, 0, 0, 25),
				BorderColor3 = FromRGB(12, 12, 12),
				BorderSizePixel = 2,
				AutomaticSize = Enum.AutomaticSize.XY,
				BackgroundColor3 = FromRGB(14, 17, 15)
			})  Items["Notification"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Border"})

			Items["UIStroke1"] = Instances:Create("UIStroke", {
				Parent = Items["Notification"].Instance,
				Name = "\0",
				Color = FromRGB(42, 49, 45),
				LineJoinMode = Enum.LineJoinMode.Miter,
				ApplyStrokeMode = Enum.ApplyStrokeMode.Border
			})  Items["UIStroke1"]:AddToTheme({Color = "Outline"})

			Instances:Create("UIPadding", {
				Parent = Items["Notification"].Instance,
				Name = "\0",
				PaddingTop = UDimNew(0, 5),
				PaddingBottom = UDimNew(0, 12),
				PaddingRight = UDimNew(0, 5),
				PaddingLeft = UDimNew(0, 5)
			})

			Items["Title"] = Instances:Create("TextLabel", {
				Parent = Items["Notification"].Instance,
				Name = "\0",
				FontFace = Library.Font,
				TextColor3 = FromRGB(235, 235, 235),
				BorderColor3 = FromRGB(0, 0, 0),
				Text = Title,
				BackgroundTransparency = 1,
				TextXAlignment = Enum.TextXAlignment.Left,
				BorderSizePixel = 0,
				AutomaticSize = Enum.AutomaticSize.XY,
				TextSize = 9,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})  Items["Title"]:AddToTheme({TextColor3 = "Text"})

			Items["UIStroke2"] =  Items["Title"]:TextBorder()

			Items["Description"] = Instances:Create("TextLabel", {
				Parent = Items["Notification"].Instance,
				Name = "\0",
				FontFace = Library.Font,
				TextColor3 = FromRGB(235, 235, 235),
				TextTransparency = 0.4000000059604645,
				Text = Description,
				Position = UDim2New(0, 0, 0, 15),
				BorderSizePixel = 0,
				BackgroundTransparency = 1,
				TextXAlignment = Enum.TextXAlignment.Left,
				BorderColor3 = FromRGB(0, 0, 0),
				AutomaticSize = Enum.AutomaticSize.XY,
				TextSize = 9,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})  Items["Description"]:AddToTheme({TextColor3 = "Text"})

			Items["UIStroke3"] = Items["Description"]:TextBorder()

			Items["Liner"] = Instances:Create("Frame", {
				Parent = Items["Notification"].Instance,
				Name = "\0",
				Position = UDim2New(0, 0, 1, 8),
				BorderColor3 = FromRGB(0, 0, 0),
				Size = UDim2New(1, 0, 0, 1),
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(202, 243, 255)
			})  Items["Liner"]:AddToTheme({BackgroundColor3 = "Accent"})
		end

		local Size = Items["Notification"].Instance.AbsoluteSize

		for Index, Value in Items do 
			if Value.Instance:IsA("Frame") then
				Value.Instance.BackgroundTransparency = 1
			elseif Value.Instance:IsA("TextLabel") then 
				Value.Instance.TextTransparency = 1
			elseif Value.Instance:IsA("UIStroke") then
				Value.Instance.Transparency = 1
			end
		end 

		Items["Notification"].Instance.AutomaticSize = Enum.AutomaticSize.Y

		Library:Thread(function()
			for Index, Value in Items do 
				if Value.Instance:IsA("Frame") then
					Value:Tween(nil, {BackgroundTransparency = 0})
				elseif Value.Instance:IsA("TextLabel") and Index ~= "Description" then 
					Value:Tween(nil, {TextTransparency = 0})
				elseif Value.Instance:IsA("TextLabel") and Index == "Description" then 
					Value:Tween(nil, {TextTransparency = 0.4})
				elseif Value.Instance:IsA("UIStroke") then
					Value:Tween(nil, {Transparency = 0})
				end
			end

			Items["Notification"]:Tween(nil, {Size = UDim2New(0, Size.X, 0, 0)})
			Items["Liner"]:Tween(TweenInfo.new(Duration, Enum.EasingStyle.Linear, Enum.EasingDirection.Out), {Size = UDim2New(0, 0, 0, 1)})

			task.wait(Duration)

			for Index, Value in Items do 
				if Value.Instance:IsA("Frame") then
					Value:Tween(nil, {BackgroundTransparency = 1})
				elseif Value.Instance:IsA("TextLabel") then 
					Value:Tween(nil, {TextTransparency = 1})
				elseif Value.Instance:IsA("UIStroke") then
					Value:Tween(nil, {Transparency = 1})
				end
			end

			Items["Notification"]:Tween(nil, {Size = UDim2New(0, 0, 0, 0)})

			task.wait(0.5)

			if Items["Notification"].Instance then
				Items["Notification"].Instance:Destroy()
			end

			Items["Notification"]:Clean()
		end)
	end
	
	Library.InventoryViewer = function(self)
		local Viewer = { }
		Viewer.Items = { } 

		local Items = { } do
			Items["InventoryViewer"] = Instances:Create("Frame", {
				Parent = Library.Holder.Instance,
				Name = "\0",
				Position = UDim2New(0.007766990456730127, 0, 0.11442785710096359, 0),
				BorderColor3 = FromRGB(12, 12, 12),
				Size = UDim2New(0, 325, 0, 277),
				BorderSizePixel = 2,
				BackgroundColor3 = FromRGB(14, 17, 15)
			})  Items["InventoryViewer"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Border"})

			Instances:Create("UIStroke", {
				Parent = Items["InventoryViewer"].Instance,
				Name = "\0",
				Color = FromRGB(42, 49, 45),
				LineJoinMode = Enum.LineJoinMode.Miter,
				ApplyStrokeMode = Enum.ApplyStrokeMode.Border
			}):AddToTheme({Color = "Outline"})

			Items["Title"] = Instances:Create("TextLabel", {
				Parent = Items["InventoryViewer"].Instance,
				Name = "\0",
				FontFace = Library.Font,
				TextColor3 = FromRGB(235, 235, 235),
				BorderColor3 = FromRGB(0, 0, 0),
				Text = "Inventory",
				Size = UDim2New(0, 0, 0, 15),
				BackgroundTransparency = 1,
				Position = UDim2New(0, 8, 0, 4),
				BorderSizePixel = 0,
				AutomaticSize = Enum.AutomaticSize.X,
				TextSize = 9,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})  Items["Title"]:AddToTheme({TextColor3 = "Text"})

			Items["Tools"] = Instances:Create("Frame", {
				Parent = Items["InventoryViewer"].Instance,
				Name = "\0",
				Position = UDim2New(0, 8, 0, 27),
				BorderColor3 = FromRGB(42, 49, 45),
				Size = UDim2New(1, -16, 1, -108),
				BorderSizePixel = 2,
				BackgroundColor3 = FromRGB(20, 24, 21)
			})  Items["Tools"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Outline"})

			Instances:Create("UIStroke", {
				Parent = Items["Tools"].Instance,
				Name = "\0",
				Color = FromRGB(12, 12, 12),
				LineJoinMode = Enum.LineJoinMode.Miter,
				ApplyStrokeMode = Enum.ApplyStrokeMode.Border
			}):AddToTheme({Color = "Border"})

			Items["Holder"] = Instances:Create("ScrollingFrame", {
				Parent = Items["Tools"].Instance,
				Name = "\0",
				Active = true,
				AutomaticCanvasSize = Enum.AutomaticSize.Y,
				BorderSizePixel = 0,
				CanvasSize = UDim2New(0, 0, 0, 0),
				ScrollBarImageColor3 = FromRGB(202, 243, 255),
				MidImage = "rbxassetid://123708228368098",
				BorderColor3 = FromRGB(0, 0, 0),
				ScrollBarThickness = 2,
				Size = UDim2New(1, -4, 1, -8),
				BackgroundTransparency = 1,
				Position = UDim2New(0, 0, 0, 4),
				BottomImage = "rbxassetid://123708228368098",
				TopImage = "rbxassetid://123708228368098",
				BackgroundColor3 = FromRGB(255, 255, 255)
			})  Items["Holder"]:AddToTheme({ScrollBarImageColor3 = "Accent"})

			Instances:Create("UIGridLayout", {
				Parent = Items["Holder"].Instance,
				Name = "\0",
				SortOrder = Enum.SortOrder.LayoutOrder,
				CellSize = UDim2New(0, 65, 0, 65)
			})

			Instances:Create("UIPadding", {
				Parent = Items["Holder"].Instance,
				Name = "\0",
				PaddingTop = UDimNew(0, 4),
				PaddingLeft = UDimNew(0, 8)
			})

			Items["PlayerAvatar"] = Instances:Create("ImageLabel", {
				Parent = Items["InventoryViewer"].Instance,
				Name = "\0",
				BorderColor3 = FromRGB(42, 49, 45),
				AnchorPoint = Vector2New(0, 1),
				Image = "rbxasset://textures/ui/GuiImagePlaceholder.png",
				Position = UDim2New(0, 8, 1, -8),
				Size = UDim2New(0, 60, 0, 60),
				BorderSizePixel = 2,
				BackgroundColor3 = FromRGB(14, 17, 15)
			})  Items["PlayerAvatar"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Outline"})

			Instances:Create("UIStroke", {
				Parent = Items["PlayerAvatar"].Instance,
				Name = "\0",
				Color = FromRGB(12, 12, 12),
				LineJoinMode = Enum.LineJoinMode.Miter,
				ApplyStrokeMode = Enum.ApplyStrokeMode.Border
			}):AddToTheme({Color = "Outline"})

			Items["PlayerHealth"] = Instances:Create("TextLabel", {
				Parent = Items["InventoryViewer"].Instance,
				Name = "\0",
				FontFace = Library.Font,
				TextColor3 = FromRGB(235, 235, 235),
				BorderColor3 = FromRGB(0, 0, 0),
				Text = "Health: ",
				AnchorPoint = Vector2New(0, 1),
				Size = UDim2New(0, 0, 0, 15),
				BackgroundTransparency = 1,
				Position = UDim2New(0, 75, 1, -55),
				BorderSizePixel = 0,
				AutomaticSize = Enum.AutomaticSize.X,
				TextSize = 9,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})  Items["PlayerHealth"]:AddToTheme({TextColor3 = "Text"})

			Items["PlayerDistance"] = Instances:Create("TextLabel", {
				Parent = Items["InventoryViewer"].Instance,
				Name = "\0",
				FontFace = Library.Font,
				TextColor3 = FromRGB(235, 235, 235),
				BorderColor3 = FromRGB(0, 0, 0),
				Text = "Distance:  studs",
				AnchorPoint = Vector2New(0, 1),
				Size = UDim2New(0, 0, 0, 15),
				BackgroundTransparency = 1,
				Position = UDim2New(0, 75, 1, -35),
				BorderSizePixel = 0,
				AutomaticSize = Enum.AutomaticSize.X,
				TextSize = 9,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})  Items["PlayerDistance"]:AddToTheme({TextColor3 = "Text"})
		end

		function Viewer:SetPlayerHealth(Value)
			Items["PlayerHealth"].Instance.Text = tostring(Value)
		end

		function Viewer:SetPlayerDistance(Value)
			Items["PlayerDistance"].Instance.Text = "Distance: "..tostring(Value).." studs"
		end

		function Viewer:SetPlayer(Value)
			local PlayerAvatar, _ = Players:GetUserThumbnailAsync(Value.UserId)
			Items["PlayerAvatar"].Instance.Image = PlayerAvatar
			Items["Title"].Instance.Text = Value.Name .. "'s Inventory"
		end

		function Viewer:AddTool(Name, Image)
			local NewItem = { }

			local SubItems = { } do
				SubItems["Item"] = Instances:Create("Frame", {
					Parent = Items["Holder"].Instance,
					Name = "\0",
					BorderColor3 = FromRGB(12, 12, 12),
					Size = UDim2New(0, 100, 0, 100),
					BorderSizePixel = 2,
					BackgroundColor3 = FromRGB(20, 24, 21)
				})  SubItems["Item"]:AddToTheme({BackgroundColor3 = "Inline", BorderColor3 = "Border"})

				Instances:Create("UIStroke", {
					Parent = SubItems["Item"].Instance,
					Name = "\0",
					Color = FromRGB(42, 49, 45),
					LineJoinMode = Enum.LineJoinMode.Miter,
					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
				}):AddToTheme({Color = "Outline"})

				SubItems["Image"] = Instances:Create("ImageLabel", {
					Parent = SubItems["Item"].Instance,
					Name = "\0",
					ImageColor3 = FromRGB(202, 243, 255),
					ScaleType = Enum.ScaleType.Fit,
					BorderColor3 = FromRGB(0, 0, 0),
					AnchorPoint = Vector2New(0.5, 0.5),
					Image = "rbxassetid://"..Image,
					BackgroundTransparency = 1,
					Position = UDim2New(0.5, 0, 0.5, 0),
					Size = UDim2New(0, 45, 0, 45),
					BorderSizePixel = 0,
					BackgroundColor3 = FromRGB(255, 255, 255)
				})  SubItems["Image"]:AddToTheme({ImageColor3 = "Accent"})
			end

			function NewItem:Remove()
				Viewer.Items[Name] = nil
				SubItems["Item"]:Clean()
			end

			Viewer.Items[Name] = NewItem
			return NewItem
		end

		function Viewer:RemoveAllTools()
			for Index, Value in Viewer.Items do 
				Value:Remove()
			end
		end

		return Viewer
	end

	Library.Window = function(self, Data)
		Data = Data or { }

		local Window = { 
			Logo = Data.Logo or Data.logo or "",
			FadeTime = Data.FadeTime or Data.fadetime or 0.4,
			Size = Data.Size or Data.size or UDim2New(0, 751, 0, 539),

			Pages = { },
			Items = { },

			IsOpen = false,
		}

		local Items = Components:Window({
			Parent = Library.Holder,
			Draggable = true,
			Resizeable = true,
			AnchorPoint = Vector2New(0, 0),
			Position = UDim2New(0, Camera.ViewportSize.X / 3.3, 0, Camera.ViewportSize.Y / 3.3),
			Size = Window.Size
		}) do
			Items["Side"] = Instances:Create("Frame", {
				Parent = Items["Window"].Instance,
				Name = "\0",
				Position = UDim2New(0, 12, 0, 12),
				BorderColor3 = FromRGB(42, 49, 45),
				Size = UDim2New(0, 200, 1, -24),
				BorderSizePixel = 2,
				BackgroundColor3 = FromRGB(20, 24, 21)
			})  Items["Side"]:AddToTheme({BackgroundColor3 = "Inline", BorderColor3 = "Outline"})

			Items["Side"]:Border("Border")

			Items["Window"].Instance.Visible = false

			Items["Logo"] = Instances:Create("ImageLabel", {
				Parent = Items["Side"].Instance,
				Name = "\0",
				ImageColor3 = FromRGB(202, 243, 255),
				ScaleType = Enum.ScaleType.Fit,
				BorderColor3 = FromRGB(0, 0, 0),
				AnchorPoint = Vector2New(0.5, 0),
				Image = "rbxassetid://" .. Window.Logo,
				BackgroundTransparency = 1,
				Position = UDim2New(0.5, 0, 0, 12),
				Size = UDim2New(0, 75, 0, 75),
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})  Items["Logo"]:AddToTheme({ImageColor3 = "Accent"})

			Items["Search"] = Instances:Create("Frame", {
				Parent = Items["Side"].Instance,
				Name = "\0",
				BorderColor3 = FromRGB(12, 12, 12),
				AnchorPoint = Vector2New(0, 1),
				BackgroundTransparency = 0.4000000059604645,
				Position = UDim2New(0, 6, 1, -6),
				Size = UDim2New(0, 0, 0, 20),
				BorderSizePixel = 2,
				AutomaticSize = Enum.AutomaticSize.X,
				BackgroundColor3 = FromRGB(14, 17, 15)
			})  Items["Search"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Border"})

			Items["SearchStroke"] = Items["Search"]:Border("Outline")

			Items["Icon"] = Instances:Create("ImageLabel", {
				Parent = Items["Search"].Instance,
				Name = "\0",
				ScaleType = Enum.ScaleType.Fit,
				BorderColor3 = FromRGB(0, 0, 0),
				AnchorPoint = Vector2New(0, 0.5),
				Image = "rbxassetid://71197946135150",
				BackgroundTransparency = 1,
				Position = UDim2New(0, 0, 0.5, 0),
				Size = UDim2New(0, 16, 0, 16),
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})

			Items["Input"] = Instances:Create("TextBox", {
				Parent = Items["Search"].Instance,
				Name = "\0",
				FontFace = Library.Font,
				CursorPosition = -1,
				TextColor3 = FromRGB(235, 235, 235),
				BorderColor3 = FromRGB(0, 0, 0),
				Text = "",
				Size = UDim2New(0, 0, 1, 0),
				Position = UDim2New(0, 22, 0, 0),
				BorderSizePixel = 0,
				BackgroundTransparency = 1,
				PlaceholderColor3 = FromRGB(185, 185, 185),
				AutomaticSize = Enum.AutomaticSize.X,
				PlaceholderText = "..",
				TextSize = 9,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})  Items["Input"]:AddToTheme({TextColor3 = "Text", PlaceholderColor3 = "Placeholder Text"})

			Items["Input"]:TextBorder()

			Instances:Create("UIPadding", {
				Parent = Items["Search"].Instance,
				Name = "\0",
				PaddingRight = UDimNew(0, 5),
				PaddingLeft = UDimNew(0, 3)
			})

			Items["Pages"] = Instances:Create("Frame", {
				Parent = Items["Side"].Instance,
				Name = "\0",
				BackgroundTransparency = 1,
				Position = UDim2New(0, 0, 0, 100),
				BorderColor3 = FromRGB(0, 0, 0),
				Size = UDim2New(1, 0, 1, -135),
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})

			Instances:Create("UIPadding", {
				Parent = Items["Pages"].Instance,
				Name = "\0",
				PaddingRight = UDimNew(0, 8),
				PaddingLeft = UDimNew(0, 8)
			})

			Instances:Create("UIListLayout", {
				Parent = Items["Pages"].Instance,
				Name = "\0",
				Padding = UDimNew(0, 8),
				SortOrder = Enum.SortOrder.LayoutOrder
			})

			local Content, _ = Players:GetUserThumbnailAsync(LocalPlayer.UserId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size420x420)

			Items["Avatar"] = Instances:Create("ImageLabel", {
				Parent = Items["Side"].Instance,
				Name = "\0",
				BorderColor3 = FromRGB(0, 0, 0),
				AnchorPoint = Vector2New(1, 1),
				Image = Content,
				BackgroundTransparency = 1,
				Position = UDim2New(1, -6, 1, -6),
				Size = UDim2New(0, 25, 0, 25),
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})

			Items["Avatar"]:Border("Outline").Instance.LineJoinMode = Enum.LineJoinMode.Round

			Instances:Create("UICorner", {
				Parent = Items["Avatar"].Instance,
				Name = "\0",
				CornerRadius = UDimNew(1, 0)
			})

			Items["Content"] = Instances:Create("Frame", {
				Parent = Items["Window"].Instance,
				Name = "\0",
				BackgroundTransparency = 1,
				Position = UDim2New(0, 226, 0, 12),
				BorderColor3 = FromRGB(0, 0, 0),
				Size = UDim2New(1, -238, 1, -24),
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})

			Items["MouseBackground"] = Instances:Create("Frame", {
				Parent = Library.Holder.Instance,
				Name = "\0",
				BackgroundTransparency = 1,
				Position = UDim2New(0, 0, 0, 0),
				BorderColor3 = FromRGB(0, 0, 0),
				Size = UDim2New(0, 16, 0, 16),
				BorderSizePixel = 0,
				ZIndex = 9999,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})

			Items["MouseImage"] = Instances:Create("ImageLabel", {
				Parent = Items["MouseBackground"].Instance,
				Name = "\0",
				BorderColor3 = FromRGB(0, 0, 0),
				Image = "rbxassetid://76631660114196",
				BackgroundTransparency = 1,
				Size = UDim2New(1, 0, 1, 0),
				BorderSizePixel = 0,
				ZIndex = 9999,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})  Items["MouseImage"]:AddToTheme({ImageColor3 = "Accent"})

			Instances:Create("UIGradient", {
				Parent = Items["MouseImage"].Instance,
				Name = "\0",
				Rotation = 90,
				Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(99, 108, 117))}
			})

			UserInputService.MouseIconEnabled = false

			Window.Items = Items
		end

		local Debounce = false

		Items["Input"]:Connect("Focused", function()
			Items["Search"]:Tween(nil, {BackgroundTransparency = 0})
			Items["SearchStroke"]:Tween(nil, {Transparency = 0})
		end)

		Items["Input"]:Connect("FocusLost", function()
			Items["Search"]:Tween(nil, {BackgroundTransparency = 0.4})
			Items["SearchStroke"]:Tween(nil, {Transparency = 0.4})
		end)

		Items["Input"]:OnHover(function()
			Items["Search"]:ChangeItemTheme({BackgroundColor3 = "Hovered Element", BorderColor3 = "Border"})
			Items["Search"]:Tween(nil, {BackgroundColor3 = Library.Theme["Hovered Element"]})
		end)

		Items["Input"]:OnHoverLeave(function()
			Items["Search"]:ChangeItemTheme({BackgroundColor3 = "Background", BorderColor3 = "Border"})
			Items["Search"]:Tween(nil, {BackgroundColor3 = Library.Theme.Background})
		end)

		Library:Connect(RunService.RenderStepped, function()
			local MouseLocation = UserInputService:GetMouseLocation() 
			Items["MouseBackground"].Instance.Position = UDim2New(0, MouseLocation.X - 1, 0, MouseLocation.Y - 56)           
		end)

		local OldSizes = { }

		function Window:AddToOldSizes(Item, Size)
			if not OldSizes[Item] then
				OldSizes[Item] = Size
			end
		end

		function Window:GetOldSize(Item)
			if OldSizes[Item] then
				return OldSizes[Item]
			end
		end

		function Window:SetOpen(Bool)
			if Debounce then 
				return
			end

			Window.IsOpen = Bool

			Debounce = true 

			if Window.IsOpen then 
				Items["Window"].Instance.Visible = true 
			end

			local Descendants = Items["Window"].Instance:GetDescendants()
			TableInsert(Descendants, Items["Window"].Instance)

			local NewTween

			for Index, Value in Descendants do 
				local TransparencyProperty = Tween:GetProperty(Value)

				if not TransparencyProperty then
					continue 
				end

				if type(TransparencyProperty) == "table" then 
					for _, Property in TransparencyProperty do 
						NewTween = Tween:FadeItem(Value, Property, Bool, Library.FadeSpeed)
					end
				else
					NewTween = Tween:FadeItem(Value, TransparencyProperty, Bool, Library.FadeSpeed)
				end
			end

			NewTween.Tween.Completed:Connect(function()
				Debounce = false 
				Items["Window"].Instance.Visible = Window.IsOpen
				if Window.IsOpen then
					Items["MouseBackground"].Instance.Visible = true
				UserInputService.MouseIconEnabled = false
				else
					Items["MouseBackground"].Instance.Visible = true
				UserInputService.MouseIconEnabled = false
				end
			end)
		end

		Library:Connect(UserInputService.InputBegan, function(Input)
			if tostring(Input.KeyCode) == Library.MenuKeybind or tostring(Input.UserInputType) == Library.MenuKeybind then
				Window:SetOpen(not Window.IsOpen)
			end
		end)

		local SearchStepped

		Items["Input"]:Connect("Focused", function()
			local PageSearchData = Library.SearchItems[Library.CurrentPage]

			if not PageSearchData then
				return 
			end

			SearchStepped = RunService.RenderStepped:Connect(function()
				for Index, Value in PageSearchData do 
					local Name = Value.Name
					local Element = Value.Element

					if StringFind(StringLower(Name), StringLower(Items["Input"].Instance.Text)) then
						if Items["Input"].Instance.Text ~= "" then 
							Element.Instance.Visible  = true 
							Element:Tween(TweenInfo.new(0.08, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = Window:GetOldSize(Element)})
						else
							Element.Instance.Visible  = true 
							Element:Tween(TweenInfo.new(0.08, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = Window:GetOldSize(Element)})
						end
					else
						Window:AddToOldSizes(Element, Element.Instance.Size)
						Element:Tween(TweenInfo.new(0.08, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = UDim2New(Window:GetOldSize(Element).X.Scale, Window:GetOldSize(Element).X.Offset, 0, 0)})
						task.wait(0.1)
						Element.Instance.Visible = false
					end
				end
			end)
		end)

		Items["Input"]:Connect("FocusLost", function()
			if SearchStepped then 
				SearchStepped:Disconnect()
				SearchStepped = nil
			end
		end)

		Window:SetOpen(true)
		return setmetatable(Window, self)
	end

	Library.Page = function(self, Data)
		Data = Data or { }

		local Page = {
			Window = self,

			Name = Data.Name or Data.name or "Page",
			Columns = Data.Columns or Data.columns or 2,
			SubPages = Data.SubPages or Data.subpages or false,
		}

		Library.SearchItems[Page] = { }

		local NewPage, Items = Components:WindowPage({
			Name = Page.Name,
			ContentHolder = Page.Window.Items["Content"],
			Stack = Page.Window.Pages,
			Parent = Page.Window.Items["Pages"],
			Columns = Page.Columns,
			SubPages = Page.SubPages,
			FadeTime = Page.Window.FadeTime,
			Window = Page.Window
		})

		return setmetatable(NewPage, Library.Pages)
	end

	Library.Pages.SubPage = function(self, Data)
		Data = Data or { }

		local SubPage = {
			Window = self.Window,
			Page = self,

			Name = Data.Name or Data.name or "SubPage",
			Columns = Data.Columns or Data.columns or 2,
		}

		Library.SearchItems[SubPage] = { }

		local NewSubPage, Items = Components:WindowSubPage({
			Page = SubPage.Page,
			Name = SubPage.Name,
			Columns = SubPage.Columns,
			Window = SubPage.Page.Window
		})

		return setmetatable(NewSubPage, Library.Pages)
	end

	Library.Pages.Section = function(self, Data)
		Data = Data or { }

		local Section = {
			Window = self.Window,
			Page = self,

			Name = Data.Name or Data.name or "Section",
			Side = Data.Side or Data.side or 1,

			Items = { }
		}

		local Items = { } do
			Items["Section"] = Instances:Create("Frame", {
				Parent = Section.Page.ColumnsData[Section.Side].Instance,
				Name = "\0",
				Size = UDim2New(1, 0, 0, 25),
				BorderColor3 = FromRGB(42, 49, 45),
				BorderSizePixel = 2,
				AutomaticSize = Enum.AutomaticSize.Y,
				BackgroundColor3 = FromRGB(20, 24, 21)
			})  Items["Section"]:AddToTheme({BackgroundColor3 = "Inline", BorderColor3 = "Outline"})

			Items["Section"]:Border("Border")

			Items["Liner"] = Instances:Create("Frame", {
				Parent = Items["Section"].Instance,
				Name = "\0",
				BorderColor3 = FromRGB(0, 0, 0),
				Size = UDim2New(1, 0, 0, 1),
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(202, 243, 255)
			})  Items["Liner"]:AddToTheme({BackgroundColor3  = "Accent"})

			Items["Glow"] = Instances:Create("Frame", {
				Parent = Items["Section"].Instance,
				Name = "\0",
				BorderColor3 = FromRGB(0, 0, 0),
				Size = UDim2New(1, 0, 0, 15),
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(202, 243, 255)
			})  Items["Glow"]:AddToTheme({BackgroundColor3  = "Accent"})

			Instances:Create("UIGradient", {
				Parent = Items["Glow"].Instance,
				Name = "\0",
				Rotation = 90,
				Transparency = NumSequence{NumSequenceKeypoint(0, 0), NumSequenceKeypoint(0.193, 0.8687499761581421), NumSequenceKeypoint(0.504, 0.96875), NumSequenceKeypoint(1, 1)}
			})

			Items["Text"] = Instances:Create("TextLabel", {
				Parent = Items["Section"].Instance,
				Name = "\0",
				FontFace = Library.Font,
				TextColor3 = FromRGB(235, 235, 235),
				BorderColor3 = FromRGB(0, 0, 0),
				Text = Section.Name,
				Size = UDim2New(0, 0, 0, 15),
				BackgroundTransparency = 1,
				Position = UDim2New(0, 6, 0, 5),
				BorderSizePixel = 0,
				AutomaticSize = Enum.AutomaticSize.X,
				TextSize = 9,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})  Items["Text"]:AddToTheme({TextColor3 = "Text"})

			Items["Text"]:TextBorder()

			Instances:Create("UIPadding", {
				Parent = Items["Section"].Instance,
				Name = "\0",
				PaddingBottom = UDimNew(0, 8)
			})

			Items["Content"] = Instances:Create("Frame", {
				Parent = Items["Section"].Instance,
				Name = "\0",
				BorderColor3 = FromRGB(0, 0, 0),
				BackgroundTransparency = 1,
				Position = UDim2New(0, 10, 0, 26),
				Size = UDim2New(1, -20, 0, 0),
				BorderSizePixel = 0,
				AutomaticSize = Enum.AutomaticSize.Y,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})

			Instances:Create("UIListLayout", {
				Parent = Items["Content"].Instance,
				Name = "\0",
				Padding = UDimNew(0, 8),
				SortOrder = Enum.SortOrder.LayoutOrder
			})

			Section.Items = Items
		end

		return setmetatable(Section, Library.Sections)
	end

	Library.Sections.Toggle = function(self, Data)
		Data = Data or { }

		local Toggle = {
			Window = self.Window,
			Page = self.Page,
			Section = self,

			Name = Data.Name or Data.name or "Toggle",
			Flag = Data.Flag or Data.flag or Library:NextFlag(),
			Default = Data.Default or Data.default or false,
			Callback = Data.Callback or Data.callback or function() end
		}

		local NewToggle, ToggleItems = Components:Toggle({
			Name = Toggle.Name,
			Parent = Toggle.Section.Items["Content"],
			Flag = Toggle.Flag,
			Default = Toggle.Default,
			Page = Toggle.Page,
			Callback = Toggle.Callback
		})

		function NewToggle:Colorpicker(Data)
			local Colorpicker = {
				Window = self.Window,
				Page = self.Page,
				Section = self,

				Flag = Data.Flag or Data.flag or Library:NextFlag(),
				Default = Data.Default or Data.default or Color3.fromRGB(255, 255, 255),
				Callback = Data.Callback or Data.callback or function() end,
				Alpha = Data.Alpha or Data.alpha or 0,
			}

			local NewColorpicker, ColorpickerItems = Components:Colorpicker({
				Name = Colorpicker.Name,
				Parent = ToggleItems["SubElements"],
				Pages = true,
				Page = Colorpicker.Page,
				Flag = Colorpicker.Flag,
				Default = Colorpicker.Default,
				Alpha = Colorpicker.Alpha,
				Callback = Colorpicker.Callback,
			})

			return NewColorpicker
		end

		function NewToggle:Keybind(Data)
			Data = Data or { }

			local Keybind = {
				Window = self.Window,
				Page = self.Page,
				Section = self.Section,

				Flag = Data.Flag or Data.flag or Library:NextFlag(),
				Default = Data.Default or Data.default or Enum.KeyCode.RightShift,
				Callback = Data.Callback or Data.callback or function() end,
				Mode = Data.Mode or Data.mode or "Toggle",
			}

			local NewKeybind, KeybindItems = Components:Keybind({
				Name = Toggle.Name,
				Parent = ToggleItems["SubElements"],
				Page = Keybind.Page,
				Flag = Keybind.Flag,
				Default = Keybind.Default,
				Mode = Keybind.Mode,
				Callback = Keybind.Callback
			})

			return NewKeybind
		end

		return NewToggle
	end

	Library.Sections.Button = function(self)
		local Button = {
			Window = self.Window,
			Page = self.Page,
			Section = self
		}

		local NewButton, ButtonItems = Components:Button({
			Parent = Button.Section.Items["Content"],
			Page = Button.Page
		})

		return NewButton
	end

	Library.Sections.Slider = function(self, Data)
		Data = Data or { }

		local Slider = {
			Window = self.Window,
			Page = self.Page,
			Section = self,

			Name = Data.Name or Data.name or "Slider",
			Flag = Data.Flag or Data.flag or Library:NextFlag(),
			Min = Data.Min or Data.min or 0,
			Decimals = Data.Decimals or Data.decimals or 1,
			Suffix = Data.Suffix or Data.suffix or "",
			Max = Data.Max or Data.max or 100,
			Default = Data.Default or Data.Default or 0,
			Callback = Data.Callback or Data.callback or function() end,
		}

		local NewSlider, SliderItems = Components:Slider({
			Name = Slider.Name,
			Parent = Slider.Section.Items["Content"],
			Flag = Slider.Flag,
			Min = Slider.Min,
			Page = Slider.Page,
			Decimals = Slider.Decimals,
			Suffix = Slider.Suffix,
			Max = Slider.Max,
			Default = Slider.Default,
			Callback = Slider.Callback,
		})

		local PageSearchData = Library.SearchItems[Slider.Page]

		if PageSearchData then
			local SearchData = {
				Element = SliderItems["Slider"],
				Name = Slider.Name,
			}

			TableInsert(PageSearchData, SearchData)
		end

		return NewSlider 
	end

	Library.Sections.Dropdown = function(self, Data)
		Data = Data or { }

		local Dropdown = {
			Window = self.Window,
			Page = self.Page,
			Section = self,

			Name = Data.Name or Data.name or "Dropdown",
			Flag = Data.Flag or Data.flag or Library:NextFlag(),
			Items = Data.Items or Data.items or { },
			Default = Data.Default or Data.default or nil,
			Multi = Data.Multi or Data.multi or false,
			Callback = Data.Callback or Data.callback or function() end            
		}

		local NewDropdown, DropdownItems = Components:Dropdown({
			Name = Dropdown.Name,
			Parent = Dropdown.Section.Items["Content"],
			Flag = Dropdown.Flag,
			Items = Dropdown.Items,
			Page = Dropdown.Page,
			Default = Dropdown.Default,
			Multi = Dropdown.Multi,
			Callback = Dropdown.Callback,
		})

		local PageSearchData = Library.SearchItems[Dropdown.Page]

		if PageSearchData then
			local SearchData = {
				Element = DropdownItems["Dropdown"],
				Name = Dropdown.Name,
			}

			TableInsert(PageSearchData, SearchData)
		end

		return NewDropdown 
	end

	Library.Sections.Label = function(self, Name)
		local Label = {
			Window = self.Window,
			Page = self.Page,
			Section = self,

			Name = Name or "Label"
		}

		local NewLabel, LabelItems = Components:Label({
			Name = Label.Name,
			Parent = Label.Section.Items["Content"],
			Page = Label.Page,
		})

		function NewLabel:Colorpicker(Data)
			Data = Data or { }

			local Colorpicker = {
				Window = self.Window,
				Page = self.Page,
				Section = self.Section,

				Flag = Data.Flag or Data.flag or Library:NextFlag(),
				Default = Data.Default or Data.default or Color3.fromRGB(255, 255, 255),
				Callback = Data.Callback or Data.callback or function() end,
				Alpha = Data.Alpha or Data.alpha or 0,
			}

			local NewColorpicker, ColorpickerItems = Components:Colorpicker({
				Name = Colorpicker.Name,
				Parent = LabelItems["SubElements"],
				Pages = true,
				Page = Colorpicker.Page,
				Flag = Colorpicker.Flag,
				Default = Colorpicker.Default,
				Alpha = Colorpicker.Alpha,
				Callback = Colorpicker.Callback,
			})

			return NewColorpicker
		end

		function NewLabel:Keybind(Data)
			Data = Data or { }

			local Keybind = {
				Window = self.Window,
				Page = self.Page,
				Section = self.Section,

				Flag = Data.Flag or Data.flag or Library:NextFlag(),
				Default = Data.Default or Data.default or Enum.KeyCode.RightShift,
				Callback = Data.Callback or Data.callback or function() end,
				Mode = Data.Mode or Data.mode or "Toggle",
			}

			local NewKeybind, KeybindItems = Components:Keybind({
				Name = Label.Name,
				Parent = LabelItems["SubElements"],
				Page = Keybind.Page,
				Flag = Keybind.Flag,
				Default = Keybind.Default,
				Mode = Keybind.Mode,
				Callback = Keybind.Callback
			})

			return NewKeybind
		end

		local PageSearchData = Library.SearchItems[Label.Page]

		if PageSearchData then
			local SearchData = {
				Element = LabelItems["Label"],
				Name = Label.Name,
			}

			TableInsert(PageSearchData, SearchData)
		end

		return NewLabel
	end

	Library.Sections.Textbox = function(self, Data)
		Data = Data or { }

		local Textbox = {
			Window = self.Window,
			Page = self.Page,
			Section = self,

			Name = Data.Name or Data.name or "Textbox",
			Flag = Data.Flag or Data.flag or Library:NextFlag(),
			Default = Data.Default or Data.default or "",
			Numeric = Data.Numeric or Data.numeric or false,
			Finished = Data.Finished or Data.finished or false,
			Placeholder = Data.Placeholder or Data.placeholder or "...",
			Callback = Data.Callback or Data.callback or function() end,
		}

		local NewTextbox, TextboxItems = Components:Textbox({
			Name = Textbox.Name,
			Placeholder = Textbox.Placeholder,
			Parent = Textbox.Section.Items["Content"],
			Flag = Textbox.Flag,
			Page = Textbox.Page,
			Default = Textbox.Default,
			Numeric = Textbox.Numeric,
			Finished = Textbox.Finished,
			Callback = Textbox.Callback,
		})

		local PageSearchData = Library.SearchItems[Textbox.Page]

		if PageSearchData then
			local SearchData = {
				Element = TextboxItems["Textbox"],
				Name = Textbox.Name,
			}

			TableInsert(PageSearchData, SearchData)
		end

		return NewTextbox
	end

	Library.Sections.Searchbox = function(self, Data)
		Data = Data or { }

		local Searchbox = {
			Window = self.Window,
			Page = self.Page,
			Section = self,

			Name = Data.Name or Data.name or "Searchbox",
			Flag = Data.Flag or Data.flag or Library:NextFlag(),
			Items = Data.Items or Data.items or { },
			Default = Data.Default or Data.default or nil,
			Multi = Data.Multi or Data.multi or false,
			Callback = Data.Callback or Data.callback or function() end            
		}

		local NewSearchbox, SearchboxItems = Components:Searchbox({
			Parent = Searchbox.Section.Items["Content"],
			Flag = Searchbox.Flag,
			Items = Searchbox.Items,
			Page = Searchbox.Page,
			Default = Searchbox.Default,
			Multi = Searchbox.Multi,
			Callback = Searchbox.Callback,
		})

		local PageSearchData = Library.SearchItems[Searchbox.Page]

		if PageSearchData then
			local SearchData = {
				Element = SearchboxItems["Listbox"],
				Name = Searchbox.Name,
			}

			TableInsert(PageSearchData, SearchData)
		end

		return NewSearchbox 
	end

	Library.BlankElement = function(self, Data)
		local BlankElement = {
			Name = Data.Name or Data.name or "Blank",
			Size = Data.Size or Data.size or 18
		}

		local Items = { } do
			Items["BlankElement"] = Instances:Create("Frame", {
				Parent = Library.Holder.Instance,
				Name = "\0",
				BackgroundTransparency = 1,
				BorderColor3 = FromRGB(0, 0, 0),
				Size = UDim2New(1, 0, 0, BlankElement.Size),
				BorderSizePixel = 0,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})

			Items["Text"] = Instances:Create("TextLabel", {
				Parent = Items["Label"].Instance,
				Name = "\0",
				FontFace = Library.Font,
				TextColor3 = FromRGB(235, 235, 235),
				BorderColor3 = FromRGB(0, 0, 0),
				Text = BlankElement.Name,
				Size = UDim2New(0, 0, 0, 15),
				AnchorPoint = Vector2New(0, 0.5),
				Position = UDim2New(0, 0, 0.5, 0),
				BackgroundTransparency = 1,
				TextXAlignment = Enum.TextXAlignment.Left,
				BorderSizePixel = 0,
				AutomaticSize = Enum.AutomaticSize.X,
				TextSize = 9,
				BackgroundColor3 = FromRGB(255, 255, 255)
			})  Items["Text"]:AddToTheme({TextColor3 = "Text"})

			Items["Text"]:TextBorder()
		end

		return BlankElement, Items
	end

	Library.CreateSettingsPage = function(self, Window, Watermark, KeybindList)
		local SettingsPage = Window:Page({Name = "Settings", SubPages = true}) do 
			local ThemingSubPage = SettingsPage:SubPage({Name = "Theming", Columns = 2}) do 
				local ThemesSection = ThemingSubPage:Section({Name = "Themes", Side = 1}) do
					for Index, Value in Library.Theme do 
						ThemesSection:Label(Index):Colorpicker({
							Name = Index,
							Flag = "Theme_" .. Index,
							Default = Value,
							Callback = function(Value)
								Library.Theme[Index] = Value
								Library:ChangeTheme(Index, Value)
							end
						})
					end
				end
			end
			
			local ConfigsSubPage = SettingsPage:SubPage({Name = "Configs", Columns = 2}) do 
				local ConfigsSection = ConfigsSubPage:Section({Name = "Configs", Side = 1}) do
					local ConfigName = ""
					local ConfigSelected = nil

					local ConfigsSearchbox = ConfigsSection:Searchbox({
						Name = "Select Config",
						Flag = "ConfigsSearchbox",
						Items = {},
						Multi = false,
						Callback = function(Value)
							ConfigSelected = Value
						end
					})

					ConfigsSection:Textbox({
						Name = "Config name", 
						Default = "", 
						Flag = "ConfigName", 
						Placeholder = "Enter text", 
						Callback = function(Value)
							ConfigName = Value
						end
					})

					local CreateAndDeleteButton = ConfigsSection:Button()

					CreateAndDeleteButton:Add("Create", function()
						if ConfigName and ConfigName ~= "" then
							local FileName = ConfigName .. ".json"
							local Path = Library.Folders.Configs .. "/" .. FileName
							if not isfile(Path) then
								writefile(Path, Library:GetConfig())
								Library:Notification("Success", "Created config " .. ConfigName .. " successfully", 5)
								Library:RefreshConfigsList(ConfigsSearchbox)
							else
								Library:Notification("Error", "Config already exists", 5)
							end
						end
					end)

					CreateAndDeleteButton:Add("Delete", function()
						if ConfigSelected then
							Library:DeleteConfig(ConfigSelected)
							Library:Notification("Success", "Deleted config " .. ConfigSelected, 5)
							ConfigSelected = nil
							Library:RefreshConfigsList(ConfigsSearchbox)
						end
					end)

					local LoadAndSaveButton = ConfigsSection:Button()    

					LoadAndSaveButton:Add("Load", function()
						if ConfigSelected then
							local Path = Library.Folders.Configs .. "/" .. ConfigSelected
							if isfile(Path) then
								local ConfigData = game:GetService("HttpService"):JSONDecode(readfile(Path))

								for Flag, Value in pairs(ConfigData) do
									if Library.Flags[Flag] ~= nil then

										local Option = Library.Options[Flag]
										if Option and Option.Set then
											Option:Set(Value)
										end
									end
								end

								Library:Notification("Success", "Loaded config " .. ConfigSelected, 5)
							else
								Library:Notification("Error", "File no longer exists", 5)
								Library:RefreshConfigsList(ConfigsSearchbox)
							end
						end
					end)

					LoadAndSaveButton:Add("Save", function()
						local Target = (ConfigName ~= "" and ConfigName .. ".json") or ConfigSelected
						if Target then
							if not Target:find("%.json$") then Target = Target .. ".json" end
							writefile(Library.Folders.Configs .. "/" .. Target, Library:GetConfig())
							Library:Notification("Success", "Saved config " .. Target, 5)
							Library:RefreshConfigsList(ConfigsSearchbox)
						else
							Library:Notification("Error", "Provide a name or select a config", 5)
						end
					end)

					Library:RefreshConfigsList(ConfigsSearchbox)
				end
			end
			
			local SettingsSubPage = SettingsPage:SubPage({Name = "Settings", Columns = 2}) do 
				local SettingsSection = SettingsSubPage:Section({Name = "Settings", Side = 1}) do
					SettingsSection:Toggle({
						Name = "Watermark",
						Flag = "Watermark",
						Default = false,
						Callback = function(Value)
							Watermark:SetVisibility(Value)
						end
					})

					SettingsSection:Toggle({
						Name = "Keybind list",
						Flag = "Keybind list",
						Default = false,
						Callback = function(Value)
							KeybindList:SetVisibility(Value)
						end
					})

					SettingsSection:Slider({
						Name = "Fade time",
						Flag = "FadeTime",
						Default = Library.FadeSpeed,
						Min = 0,
						Max = 1,
						Decimals = 0.01,
						Callback = function(Value)
							Library.FadeSpeed = Value
						end
					})

					SettingsSection:Slider({
						Name = "Tween time",
						Flag = "TweenTime",
						Default = Library.Tween.Time,
						Min = 0,
						Max = 1,
						Decimals = 0.01,
						Callback = function(Value)
							Library.Tween.Time = Value
						end
					})

					SettingsSection:Dropdown({
						Name = "Tween style",
						Flag = "Tween style",
						Items = { "Linear", "Quad", "Quart", "Back", "Bounce", "Circular", "Cubic", "Elastic", "Exponential", "Sine", "Quint" },
						Default = "Cubic",
						Callback = function(Value)
							Library.Tween.Style = Enum.EasingStyle[Value]
						end
					})

					SettingsSection:Dropdown({
						Name = "Tween direction",
						Flag = "Tween direction",
						Items = { "In", "Out", "InOut" },
						Default = "Out",
						Callback = function(Value)
							Library.Tween.Direction = Enum.EasingDirection[Value]
						end
					})

					SettingsSection:Button():Add("Unload", function()
						Library:Unload()
					end)

					SettingsSection:Label("UI Keybind"):Keybind({
						Name = "Menu keybind",
						Flag = "UIKeybind",
						Default = Library.MenuKeybind,
						Mode = "Toggle",
						Callback = function()
							Library.MenuKeybind = Library.Flags["UIKeybind"].Key
						end
					})
				end
			end
		end

		return SettingsPage
	end
end

local Window = Library:Window({
	Logo = "77218680285262",
	FadeTime = 0.3,
})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local UserInputService = game:GetService("UserInputService")
local Debris = game:GetService("Debris")
local Camera = workspace.CurrentCamera

local Watermark = Library:Watermark("Archangel")
local KeybindList = Library:KeybindList()

local CombatPage = Window:Page({ Name = "Combat", SubPages = true })
local VisualsPage = Window:Page({ Name = "Visuals", SubPages = true })
local PlayersPage = Window:Page({ Name = "Players", SubPages = true })

local VisualClone = Instance.new("Model")
VisualClone.Name = "DesyncVisual"
VisualClone.Parent = workspace

local NoJumpConnection
local NoclipConnection
local AntiModConnection
local AutoStompConnection
local AntiModLeaveConnection

local CombatSubPage = CombatPage:SubPage({ Name = "Main", Columns = 2 }) do
	local AimbotSection = CombatSubPage:Section({ Name = "Aimbot Settings", Side = 1 }) do
		local AimbotTgl = AimbotSection:Toggle({
			Name = "Enable Aimbot",
			Default = false,
			Flag = "AimbotEnabled",
			Callback = function(v) 
				getgenv().AimbotEnabled = v 
				if not v then
					getgenv().AimbotActive = false
					_G.LockedAimbotTarget = nil
				end
			end
		})

		AimbotTgl:Keybind({
			Name = "Aimbot Key",
			Default = Enum.KeyCode.Q,
			Mode = "Toggle",
			Flag = "AimbotKeybind",
			Callback = function(v) getgenv().AimbotActive = v end
		})

		AimbotSection:Toggle({
			Name = "Sticky Aim",
			Default = false,
			Flag = "AimbotSticky",
			Callback = function(v) getgenv().AimbotSticky = v end
		})

		AimbotSection:Dropdown({
			Name = "Aimbot Mode",
			Items = {"Mouse", "Camlock"},
			Default = "Mouse",
			Flag = "AimbotMode",
			Callback = function(v) getgenv().AimbotMode = v end
		})

		AimbotSection:Dropdown({
			Name = "Aim Part",
			Items = {"Head", "UpperTorso", "HumanoidRootPart", "LowerTorso"},
			Default = "Head",
			Flag = "AimbotPart",
			Callback = function(v) getgenv().AimbotPart = v end
		})

		AimbotSection:Textbox({
			Name = "Static Prediction",
			Default = "0.135",
			Flag = "AimbotPred",
			Callback = function(v) getgenv().AimbotPredAmount = tonumber(v) end
		})

		AimbotSection:Slider({
			Name = "Aimbot Smoothness",
			Min = 1, Max = 10, Default = 3,
			Flag = "AimbotSmooth",
			Callback = function(v) getgenv().AimbotSmoothness = v end
		})

		local AimbotFOVTgl = AimbotSection:Toggle({
			Name = "Show FOV",
			Default = false,
			Flag = "AimbotShowFOV",
			Callback = function(v) getgenv().ShowFOV = v end
		})

		AimbotFOVTgl:Colorpicker({
			Name = "FOV Color",
			Default = Color3.fromRGB(255, 200, 60),
			Flag = "AimbotFOVCol",
			Callback = function(v) getgenv().AimbotFOVColor = v end
		})

		AimbotSection:Dropdown({
			Name = "FOV Shape",
			Items = {"Circle", "Triangle", "Square", "Hexagon", "Octagon"},
			Default = "Circle",
			Flag = "AimbotFOVShape",
			Callback = function(v) getgenv().FOVShape = v end
		})

		AimbotSection:Slider({
			Name = "FOV Radius",
			Min = 10, Max = 800, Default = 100,
			Flag = "AimbotFOVRadius",
			Callback = function(v) getgenv().AimbotFOVRadius = v end
		})
	end

	local SilentSection = CombatSubPage:Section({ Name = "Silent Aim Settings", Side = 2 }) do
		local SilentTgl = SilentSection:Toggle({
			Name = "Enable Silent Aim",
			Default = false,
			Flag = "SilentEnabled",
			Callback = function(v) 
				getgenv().SilentAimEnabled = v 
				if not v then getgenv().SilentAimActive = false end
			end
		})

		SilentTgl:Keybind({
			Name = "Silent Key",
			Default = Enum.KeyCode.E,
			Mode = "Always",
			Flag = "SilentKeybind",
			Callback = function(v) getgenv().SilentAimActive = v end
		})

		SilentSection:Dropdown({
			Name = "Aim Part",
			Items = {"Head", "UpperTorso", "HumanoidRootPart", "LowerTorso"},
			Default = "HumanoidRootPart",
			Flag = "SilentPart",
			Callback = function(v) getgenv().SilentPart = v end
		})

		SilentSection:Toggle({
			Name = "Hit All Parts",
			Default = false,
			Flag = "SilentHitAll",
			Callback = function(v) getgenv().SilentHitAllParts = v end
		})

		SilentSection:Textbox({
			Name = "Static Prediction",
			Default = "0.123",
			Flag = "SilentPred",
			Callback = function(v) getgenv().SilentPredAmount = tonumber(v) end
		})

		local SilentFOVTgl = SilentSection:Toggle({
			Name = "Show Silent FOV",
			Default = false,
			Flag = "SilentShowFOV",
			Callback = function(v) getgenv().ShowSilentFOV = v end
		})

		SilentFOVTgl:Colorpicker({
			Name = "Silent FOV Color",
			Default = Color3.fromRGB(255, 200, 60),
			Flag = "SilentFOVCol",
			Callback = function(v) getgenv().SilentFOVColor = v end
		})

		SilentSection:Dropdown({
			Name = "Silent FOV Shape",
			Items = {"Circle", "Triangle", "Square", "Hexagon", "Octagon"},
			Default = "Circle",
			Flag = "SilentFOVShape",
			Callback = function(v) getgenv().SilentFOVShape = v end
		})

		SilentSection:Slider({
			Name = "Silent FOV Radius",
			Min = 10, Max = 800, Default = 100,
			Flag = "SilentFOVRadius",
			Callback = function(v) getgenv().SilentFOVRadius = v end
		})

		SilentSection:Slider({
			Name = "Hit Chance",
			Min = 0, Max = 100, Default = 100,
			Flag = "SilentHitChance",
			Callback = function(v) getgenv().HitChance = v end
		})
	end
	
	local UniversalChecks = CombatSubPage:Section({ Name = "Checks & Resolvers", Side = 1 }) do
		UniversalChecks:Label("Aimbot")
		UniversalChecks:Toggle({
			Name = "Velocity Resolver",
			Default = false,
			Flag = "AimbotResolver",
			Callback = function(v) getgenv().AimbotResolverEnabled = v end
		})
		UniversalChecks:Toggle({
			Name = "Wall Check",
			Default = false,
			Flag = "AimbotWallCheck",
			Callback = function(v) getgenv().AimbotWallCheck = v end
		})
		UniversalChecks:Toggle({
			Name = "Knocked Check",
			Default = false,
			Flag = "AimbotKnockedCheck",
			Callback = function(v) getgenv().AimbotKnockedCheck = v end
		})

		UniversalChecks:Label("Silent Aim")
		UniversalChecks:Toggle({
			Name = "Velocity Resolver",
			Default = false,
			Flag = "SilentResolver",
			Callback = function(v) getgenv().SilentResolverEnabled = v end
		})
		UniversalChecks:Toggle({
			Name = "Wall Check",
			Default = false,
			Flag = "SilentWallCheck",
			Callback = function(v) getgenv().SilentWallCheck = v end
		})
		UniversalChecks:Toggle({
			Name = "Knocked Check",
			Default = false,
			Flag = "SilentKnockedCheck",
			Callback = function(v) getgenv().SilentKnockedCheck = v end
		})
	end
end

_G.LockedAimbotTarget = nil
_G.LockedSilentTarget = nil

local Shapes = {
	Aimbot = { Circle = Drawing.new("Circle"), Square = Drawing.new("Square"), Triangle = Drawing.new("Triangle"), Hexagon = Drawing.new("Polyline"), Octagon = Drawing.new("Polyline") },
	Silent = { Circle = Drawing.new("Circle"), Square = Drawing.new("Square"), Triangle = Drawing.new("Triangle"), Hexagon = Drawing.new("Polyline"), Octagon = Drawing.new("Polyline") }
}

local function GetPolygonPoints(center, radius, sides)
	local points = {}
	for i = 0, sides do
		local angle = math.rad(i * (360 / sides))
		table.insert(points, center + Vector2.new(math.cos(angle) * radius, math.sin(angle) * radius))
	end
	return points
end

local function UpdateDrawing(group, shape, radius, color, pos)
	local drawing = Shapes[group][shape]
	if not drawing then return end
	drawing.Visible = true
	drawing.Color = color
	drawing.Thickness = 1
	if shape == "Circle" then
		drawing.Radius = radius
		drawing.Position = pos
	elseif shape == "Square" then
		drawing.Size = Vector2.new(radius * 2, radius * 2)
		drawing.Position = pos - Vector2.new(radius, radius)
	elseif shape == "Triangle" then
		drawing.PointA = pos + Vector2.new(0, -radius)
		drawing.PointB = pos + Vector2.new(radius, radius)
		drawing.PointC = pos + Vector2.new(-radius, radius)
	elseif shape == "Hexagon" or shape == "Octagon" then
		drawing.Points = GetPolygonPoints(pos, radius, (shape == "Hexagon" and 6 or 8))
	end
end

local function IsAlive(player, mode)
	local char = player.Character
	if not char or not char:FindFirstChild("Humanoid") or not char:FindFirstChild("HumanoidRootPart") then return false end

	local knockedCheck = (mode == "Aimbot" and getgenv().AimbotKnockedCheck) or (mode == "Silent" and getgenv().SilentKnockedCheck)
	local wallCheck = (mode == "Aimbot" and getgenv().AimbotWallCheck) or (mode == "Silent" and getgenv().SilentWallCheck)

	if knockedCheck then
		if char.Humanoid.Health <= 0 then return false end
		if char:FindFirstChild("BodyEffects") and char.BodyEffects:FindFirstChild("K.O") and char.BodyEffects["K.O"].Value then return false end
	end

	if wallCheck then
		local hit = Camera:GetPartsObscuringTarget({char.HumanoidRootPart.Position}, {LocalPlayer.Character, char})
		if #hit > 0 then return false end
	end
	return true
end

local function GetResolvedVelocity(player, mode)
	local hrp = player.Character.HumanoidRootPart
	local vel = hrp.Velocity
	local resolver = (mode == "Aimbot" and getgenv().AimbotResolverEnabled) or (mode == "Silent" and getgenv().SilentResolverEnabled)

	if resolver then
		if vel.Magnitude > 35 or math.abs(vel.Y) > 35 then
			return hrp.AssemblyLinearVelocity
		end
	end
	return vel
end

local function GetTarget(radius, mode)
	local Target, Distance = nil, radius or 100
	local MousePos = UserInputService:GetMouseLocation()
	for _, v in pairs(Players:GetPlayers()) do
		if v ~= LocalPlayer and IsAlive(v, mode) then
			local ScreenPos, OnScreen = Camera:WorldToViewportPoint(v.Character.HumanoidRootPart.Position)
			if OnScreen then
				local MouseDist = (Vector2.new(ScreenPos.X, ScreenPos.Y) - MousePos).Magnitude
				if MouseDist < Distance then
					Distance = MouseDist
					Target = v
				end
			end
		end
	end
	return Target
end

RunService.RenderStepped:Connect(function()
	local MousePos = UserInputService:GetMouseLocation()
	for _, group in pairs(Shapes) do for _, drawing in pairs(group) do drawing.Visible = false end end

	if getgenv().AimbotEnabled and getgenv().ShowFOV then 
		UpdateDrawing("Aimbot", getgenv().FOVShape, getgenv().AimbotFOVRadius or 100, getgenv().AimbotFOVColor or Color3.fromRGB(255, 255, 255), MousePos) 
	end
	if getgenv().SilentAimEnabled and getgenv().ShowSilentFOV then 
		UpdateDrawing("Silent", getgenv().SilentFOVShape, getgenv().SilentFOVRadius or 100, getgenv().SilentFOVColor or Color3.fromRGB(255, 200, 60), MousePos) 
	end

	if getgenv().SilentAimEnabled and getgenv().SilentAimActive then
		_G.LockedSilentTarget = GetTarget(getgenv().SilentFOVRadius, "Silent")
	else
		_G.LockedSilentTarget = nil
	end

	if getgenv().AimbotEnabled and getgenv().AimbotActive then
		if getgenv().AimbotSticky and _G.LockedAimbotTarget and IsAlive(_G.LockedAimbotTarget, "Aimbot") then
		else
			_G.LockedAimbotTarget = GetTarget(getgenv().AimbotFOVRadius, "Aimbot")
		end

		if _G.LockedAimbotTarget then
			local targetChar = _G.LockedAimbotTarget.Character
			local hitPart = targetChar:FindFirstChild(getgenv().AimbotPart or "Head") or targetChar.HumanoidRootPart
			local pos = hitPart.Position

			local pred = getgenv().AimbotPredAmount or 0.135
			pos = pos + (GetResolvedVelocity(_G.LockedAimbotTarget, "Aimbot") * pred)

			if getgenv().AimbotMode == "Camlock" then
				local smoothedCF = CFrame.new(Camera.CFrame.Position, pos)
				Camera.CFrame = Camera.CFrame:Lerp(smoothedCF, 1 / (getgenv().AimbotSmoothness or 1))
			elseif getgenv().AimbotMode == "Mouse" then
				local sPos = Camera:WorldToViewportPoint(pos)
				local move = (Vector2.new(sPos.X, sPos.Y) - MousePos) / (getgenv().AimbotSmoothness or 1)
				mousemoverel(move.X, move.Y)
			end
		end
	else 
		_G.LockedAimbotTarget = nil 
	end
end)

local OldIndex = nil
OldIndex = hookmetamethod(game, "__index", function(self, index)
	if not checkcaller() and self == LocalPlayer:GetMouse() and getgenv().SilentAimEnabled and getgenv().SilentAimActive then
		if index == "Hit" or index == "Target" then
			local Target = _G.LockedSilentTarget

			if Target and math.random(1, 100) <= (getgenv().HitChance or 100) then
				local char = Target.Character
				local targetPart

				if getgenv().SilentHitAllParts then
					local parts = {"Head", "UpperTorso", "LowerTorso", "HumanoidRootPart", "LeftUpperArm", "RightUpperArm", "LeftUpperLeg", "RightUpperLeg"}
					targetPart = char:FindFirstChild(parts[math.random(1, #parts)]) or char.HumanoidRootPart
				else
					targetPart = char:FindFirstChild(getgenv().SilentPart or "HumanoidRootPart") or char.HumanoidRootPart
				end

				local pred = getgenv().SilentPredAmount or 0.123
				local targetCF = targetPart.CFrame + (GetResolvedVelocity(Target, "Silent") * pred)

				return (index == "Hit" and targetCF or targetPart)
			end
		end
	end
	return OldIndex(self, index)
end)

local TargetDot = Drawing.new("Circle")
TargetDot.Filled = true
TargetDot.Thickness = 1
TargetDot.NumSides = 20
TargetDot.Radius = 7
TargetDot.Visible = false
TargetDot.Color = Color3.fromRGB(255, 0, 0)

local TargetAimTable = {
	Enabled = false,
	Active = false,
	Part = "HumanoidRootPart",
	Prediction = 0.125,
	ShowDot = false,
	DotColor = Color3.fromRGB(255, 0, 0),
	LookAt = false,
	Notify = false,
	Resolver = false,
	WallCheck = false,
	KnockedCheck = false,
	Charms = false,
	CharmsColor = Color3.fromRGB(255, 0, 255)
}

local function ClearCharms(player)
	if player and player.Character then
		local highlight = player.Character:FindFirstChild("TargetHighlight")
		if highlight then
			highlight:Destroy()
		end
	end
end

local TargetAimSubPage = CombatPage:SubPage({ Name = "Target Aim", Columns = 2 }) do
	local TargetAimSection = TargetAimSubPage:Section({ Name = "Target Aim Settings", Side = 1 }) do
		local TargetTgl = TargetAimSection:Toggle({
			Name = "Enable Target Aim",
			Default = false,
			Flag = "TargetAimEnabled",
			Callback = function(v)
				TargetAimTable.Enabled = v
				if not v then 
					TargetAimTable.Active = false
					ClearCharms(_G.LockedTarget)
					_G.LockedTarget = nil 
				end
			end
		})

		TargetTgl:Keybind({
			Name = "Target Key",
			Default = Enum.KeyCode.C,
			Mode = "Toggle",
			Flag = "TargetAimKey",
			Callback = function(v)
				TargetAimTable.Active = v
				if not v then 
					ClearCharms(_G.LockedTarget)
					_G.LockedTarget = nil 
				end
			end
		})

		TargetAimSection:Dropdown({
			Name = "Aim Part",
			Items = {"Head", "UpperTorso", "HumanoidRootPart", "LowerTorso"},
			Default = "HumanoidRootPart",
			Flag = "TargetAimPart",
			Callback = function(v) TargetAimTable.Part = v end
		})

		TargetAimSection:Textbox({
			Name = "Prediction",
			Default = "0.125",
			Flag = "TargetAimPred",
			Callback = function(v) TargetAimTable.Prediction = tonumber(v) or 0.125 end
		})
	end

	local TargetVisuals = TargetAimSubPage:Section({ Name = "Target Visuals", Side = 2 }) do
		local DotTgl = TargetVisuals:Toggle({
			Name = "Show Target Dot",
			Default = false,
			Flag = "TargetAimDot",
			Callback = function(v) TargetAimTable.ShowDot = v end
		})

		DotTgl:Colorpicker({
			Name = "Dot Color",
			Default = Color3.fromRGB(255, 0, 0),
			Flag = "TargetDotCol",
			Callback = function(v) 
				TargetAimTable.DotColor = v 
				TargetDot.Color = v
			end
		})

		TargetVisuals:Toggle({
			Name = "Look At",
			Default = false,
			Flag = "TargetAimLookAt",
			Callback = function(v) TargetAimTable.LookAt = v end
		})

		TargetVisuals:Toggle({
			Name = "Notify On Lock",
			Default = false,
			Flag = "TargetAimNotify",
			Callback = function(v) TargetAimTable.Notify = v end
		})

		local CharmsTgl = TargetVisuals:Toggle({
			Name = "Target Charms",
			Default = false,
			Flag = "TargetCharms",
			Callback = function(v) 
				TargetAimTable.Charms = v 
				if not v then ClearCharms(_G.LockedTarget) end
			end
		})

		CharmsTgl:Colorpicker({
			Name = "Charms Color",
			Default = Color3.fromRGB(255, 0, 255),
			Flag = "TargetCharmsCol",
			Callback = function(v) TargetAimTable.CharmsColor = v end
		})
	end

	local TargetChecks = TargetAimSubPage:Section({ Name = "Target Checks", Side = 1 }) do
		TargetChecks:Toggle({
			Name = "Velocity Resolver",
			Default = false,
			Flag = "TargetResolver",
			Callback = function(v) TargetAimTable.Resolver = v end
		})
		TargetChecks:Toggle({
			Name = "Wall Check",
			Default = false,
			Flag = "TargetWallCheck",
			Callback = function(v) TargetAimTable.WallCheck = v end
		})
		TargetChecks:Toggle({
			Name = "Knocked Check",
			Default = false,
			Flag = "TargetKnockedCheck",
			Callback = function(v) TargetAimTable.KnockedCheck = v end
		})
	end
end

RunService.RenderStepped:Connect(function()
	TargetDot.Visible = false

	if TargetAimTable.Enabled and TargetAimTable.Active then
		local OldTarget = _G.LockedTarget

		if not _G.LockedTarget then
			local newTarget = GetTarget(getgenv().AimbotFOVRadius or 200, "Target")
			if newTarget then
				_G.LockedTarget = newTarget
				if TargetAimTable.Notify then
					Library:Notification("Target Locked", "Locked onto: " .. tostring(_G.LockedTarget.DisplayName or _G.LockedTarget.Name), 2)
				end
			end
		end

		if _G.LockedTarget and IsAlive(_G.LockedTarget) then
			if OldTarget and OldTarget ~= _G.LockedTarget then
				ClearCharms(OldTarget)
				if TargetAimTable.Notify then
					Library:Notification("Target Switched", "New target: " .. tostring(_G.LockedTarget.DisplayName or _G.LockedTarget.Name), 2)
				end
			end

			local targetChar = _G.LockedTarget.Character
			local hitPart = targetChar:FindFirstChild(TargetAimTable.Part)

			if hitPart then
				local velocity = TargetAimTable.Resolver and GetResolvedVelocity(_G.LockedTarget, "Target") or _G.LockedTarget.Character.HumanoidRootPart.Velocity
				local finalPos = hitPart.Position + (velocity * TargetAimTable.Prediction)

				if TargetAimTable.LookAt then
					Camera.CFrame = CFrame.new(Camera.CFrame.Position, finalPos)
				end

				if TargetAimTable.ShowDot then
					local screenPos, onScreen = Camera:WorldToViewportPoint(finalPos)
					if onScreen then
						TargetDot.Position = Vector2.new(screenPos.X, screenPos.Y)
						TargetDot.Visible = true
					end
				end

				if TargetAimTable.Charms then
					local highlight = targetChar:FindFirstChild("TargetHighlight")
					if not highlight then
						highlight = Instance.new("Highlight")
						highlight.Name = "TargetHighlight"
						highlight.Parent = targetChar
					end
					highlight.FillColor = TargetAimTable.CharmsColor
					highlight.OutlineColor = TargetAimTable.CharmsColor
					highlight.FillTransparency = 0.5
					highlight.OutlineTransparency = 0
				end
			end
		else
			ClearCharms(_G.LockedTarget)
			_G.LockedTarget = nil
		end
	else
		ClearCharms(_G.LockedTarget)
		_G.LockedTarget = nil
	end
end)

local OldIndex = nil
OldIndex = hookmetamethod(game, "__index", function(self, index)
	if not checkcaller() and self == LocalPlayer:GetMouse() then
		if TargetAimTable.Enabled and TargetAimTable.Active and _G.LockedTarget then
			if index == "Hit" or index == "Target" then
				local char = _G.LockedTarget.Character
				local targetPart = char:FindFirstChild(TargetAimTable.Part)

				if targetPart then
					local velocity = TargetAimTable.Resolver and GetResolvedVelocity(_G.LockedTarget, "Target") or _G.LockedTarget.Character.HumanoidRootPart.Velocity
					local targetCF = targetPart.CFrame + (velocity * TargetAimTable.Prediction)
					return (index == "Hit" and targetCF or targetPart)
				end
			end
		end
	end
	return OldIndex(self, index)
end)

local PlayersSubPage = PlayersPage:SubPage({ Name = "Main", Columns = 2 }) do
	local MiscSection = PlayersSubPage:Section({ Name = "Misc", Side = 1 })
	local DesyncSection = PlayersSubPage:Section({ Name = "Desync Network", Side = 1 })
	local AntiLockSection = PlayersSubPage:Section({ Name = "Anti Locks", Side = 1 })
	local AntiModSection = PlayersSubPage:Section({ Name = "Anti Mods", Side = 1 })

	local RunService = game:GetService("RunService")
	local UserInputService = game:GetService("UserInputService")
	local LocalPlayer = game:GetService("Players").LocalPlayer
	local VisualCloneFolder = workspace:FindFirstChild("VisualCloneFolder") or Instance.new("Folder", workspace)
	VisualCloneFolder.Name = "VisualCloneFolder"

	do
		AntiModSection:Toggle({
			Name = "Anti Mods",
			Default = false,
			Flag = "AntiModEnabled",
			Callback = function(v)
				getgenv().AntiModEnabled = v
				if AntiModConnection then AntiModConnection:Disconnect() AntiModConnection = nil end
				if AntiModLeaveConnection then AntiModLeaveConnection:Disconnect() AntiModLeaveConnection = nil end
				if v then
					local function isStaff(player)
						return player:GetRankInGroup(693335996) > 0 or player.UserId < 0
					end
					local function checkStaff(player)
						if isStaff(player) then
							Library:Notification("Void Falls", "Mod Joined: " .. player.DisplayName .. " (@" .. player.Name .. ")", 10)
						end
					end
					local function onPlayerRemoving(player)
						if isStaff(player) then
							Library:Notification("Void Falls", "Mod Left: " .. player.DisplayName .. " (@" .. player.Name .. ")", 10)
						end
					end
					for _, player in ipairs(game:GetService("Players"):GetPlayers()) do
						if player ~= LocalPlayer then checkStaff(player) end
					end
					AntiModConnection = game:GetService("Players").PlayerAdded:Connect(checkStaff)
					AntiModLeaveConnection = game:GetService("Players").PlayerRemoving:Connect(onPlayerRemoving)
					task.spawn(function()
						while getgenv().AntiModEnabled do
							if getgenv().AutoKickMod then
								for _, player in ipairs(game:GetService("Players"):GetPlayers()) do
									if player ~= LocalPlayer and isStaff(player) then
										LocalPlayer:Kick("\n[Anti-Mod]\nStaff Member Detected: " .. player.Name)
										break
									end
								end
							end
							task.wait(1)
						end
					end)
				end
			end
		})

		AntiModSection:Dropdown({
			Name = "Anti Mod Mode",
			Items = {"None", "Void Falls"},
			Default = "None",
			Flag = "AntiModMode",
			Callback = function(v) getgenv().AntiModMode = v end
		})

		AntiModSection:Toggle({
			Name = "Auto Kick Player",
			Default = false,
			Flag = "AutoKickMod",
			Callback = function(v) getgenv().AutoKickMod = v end
		})

		MiscSection:Toggle({
			Name = "Auto Stomp",
			Default = false,
			Flag = "AutoStomp",
			Callback = function(v)
				getgenv().AutoStomp = v
				if AutoStompConnection then AutoStompConnection:Disconnect() AutoStompConnection = nil end
				if v then
					task.spawn(function()
						while getgenv().AutoStomp do
							if not getgenv().AutoStomp then break end
							local TargetName = getgenv().StompTarget
							for _, Player in pairs(game:GetService("Players"):GetPlayers()) do
								if Player.Character and Player ~= LocalPlayer then
									if TargetName == "All" or Player.Name == TargetName or Player.DisplayName == TargetName then
										local BodyEffects = Player.Character:FindFirstChild("BodyEffects")
										if BodyEffects and BodyEffects:FindFirstChild("K.O") and BodyEffects["K.O"].Value == true then
											local targetChar = Player.Character
											local targetPart = targetChar:FindFirstChild("UpperTorso") or targetChar:FindFirstChild("HumanoidRootPart")
											local char = LocalPlayer.Character
											local localHrp = char and char:FindFirstChild("HumanoidRootPart")

											if targetPart and localHrp then
												local isGrabbed = targetChar:FindFirstChild("GRABBING_CONSTRAINT")
												if not isGrabbed then
													local oldPos = localHrp.CFrame
													local stompPos = CFrame.new(targetPart.Position + Vector3.new(0, 3.5, 0))
													localHrp.CFrame = stompPos
													localHrp.Velocity = Vector3.zero
													localHrp.RotVelocity = Vector3.zero

													local MainEvent = game:GetService('ReplicatedStorage'):FindFirstChild("MainEvent")
													for i = 1, 5 do 
														if MainEvent then MainEvent:FireServer("Stomp") end 
														task.wait(0.05)
													end
													localHrp.CFrame = oldPos
												end
											end
										end
									end
								end
							end
							task.wait(0.2)
						end
					end)
				end
			end
		})

		local StompDropdown = MiscSection:Dropdown({
			Name = "Stomp Target",
			Items = {"All"},
			Default = "All",
			Flag = "StompTarget",
			Callback = function(v)
				local rawName = string.match(v, "@([%w_]+)") or v
				getgenv().StompTarget = rawName
			end
		})

		task.spawn(function()
			while task.wait(3) do
				local currentPlayers = {"All"}
				for _, p in pairs(game:GetService("Players"):GetPlayers()) do
					if p ~= LocalPlayer then table.insert(currentPlayers, p.DisplayName .. " (@" .. p.Name .. ")") end
				end
				if StompDropdown and StompDropdown.Refresh then StompDropdown:Refresh(currentPlayers) end
			end
		end)

		MiscSection:Toggle({
			Name = "Auto Reload",
			Default = false,
			Flag = "AutoReload",
			Callback = function(v)
				getgenv().AutoReload = v
				if v then
					task.spawn(function()
						while getgenv().AutoReload do
							local char = LocalPlayer.Character
							local tool = char and char:FindFirstChildWhichIsA("Tool")
							if tool and tool:FindFirstChild("Ammo") and tool.Ammo.Value <= 0 then
								game:GetService("ReplicatedStorage").MainEvent:FireServer("Reload", tool)
								task.wait(1)
							end
							if tool and tool.Script:FindFirstChild("Ammo") and tool.Ammo.Value <= 0 then
								game:GetService("ReplicatedStorage").MainEvent:FireServer("Reload", tool)
								task.wait(1)
							end
							RunService.Heartbeat:Wait()
						end
					end)
				end
			end
		})

		MiscSection:Toggle({
			Name = "No Jump Cooldown",
			Default = false,
			Flag = "NoJumpCooldown",
			Callback = function(v)
				getgenv().NoJumpCooldown = v
				if NoJumpConnection then NoJumpConnection:Disconnect() NoJumpConnection = nil end
				if v then
					NoJumpConnection = RunService.PostSimulation:Connect(function()
						if not getgenv().NoJumpCooldown then return end
						local character = LocalPlayer.Character
						local humanoid = character and character:FindFirstChildOfClass("Humanoid")
						if humanoid then
							humanoid.UseJumpPower = true
							if UserInputService:IsKeyDown(Enum.KeyCode.Space) then humanoid.Jump = true end
						end
					end)
				end
			end
		})

		MiscSection:Toggle({
			Name = "No Seats",
			Default = false,
			Flag = "NoSeats",
			Callback = function(state)
				getgenv().NoSeats = state
				for _, object in ipairs(game:GetDescendants()) do
					if object:IsA("Seat") or object:IsA("VehicleSeat") then object.CanTouch = not state end
				end
			end
		})

		MiscSection:Toggle({
			Name = "Anti Flying",
			Default = false,
			Flag = "AntiFlying",
			Callback = function(v)
				getgenv().AntiFlying = v
				if AntiFlyConnection then AntiFlyConnection:Disconnect() AntiFlyConnection = nil end
				if v then
					AntiFlyConnection = RunService.Heartbeat:Connect(function()
						if not getgenv().AntiFlying then return end
						for _, player in ipairs(game:GetService("Players"):GetPlayers()) do
							if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
								local hrp = player.Character.HumanoidRootPart
								local state = player.Character:FindFirstChildOfClass("Humanoid"):GetState()
								if state == Enum.HumanoidStateType.Freefall and math.abs(hrp.Velocity.Y) < 5 and hrp.Position.Y > 20 then
									hrp.Anchored = true
									task.wait(0.1)
									hrp.Anchored = false
								end
							end
						end
					end)
				end
			end
		})
	end

	do
		local DesyncTgl = DesyncSection:Toggle({
			Name = "Enable Network Desync",
			Default = false,
			Flag = "DesyncEnabled",
			Callback = function(v)
				getgenv().DesyncEnabled = v
				if v then
					task.spawn(function()
						while getgenv().DesyncEnabled do
							local char = LocalPlayer.Character
							local hrp = char and char:FindFirstChild("HumanoidRootPart")
							if hrp and getgenv().DesyncActive then
								local oldVel = hrp.Velocity
								hrp.Velocity = Vector3.new(0, -getgenv().DesyncIntensity, 0)
								RunService.RenderStepped:Wait()
								hrp.Velocity = oldVel
							end
							RunService.Heartbeat:Wait()
						end
					end)
				end
			end
		})
		DesyncTgl:Keybind({
			Name = "Desync Keybind",
			Default = Enum.KeyCode.X,
			Mode = "Toggle",
			Flag = "DesyncKeybind",
			Callback = function(v)
				getgenv().DesyncActive = v
			end
		})
		DesyncSection:Slider({
			Name = "Desync Intensity",
			Min = 1, Max = 500, Default = 50,
			Flag = "DesyncIntensity",
			Callback = function(v) getgenv().DesyncIntensity = v end
		})

		local VisualDesyncTgl = DesyncSection:Toggle({
			Name = "Visual Desync",
			Default = false,
			Flag = "VisualDesyncEnabled",
			Callback = function(v)
				getgenv().VisualDesyncEnabled = v
				if not v then VisualCloneFolder:ClearAllChildren() end
				if v then
					task.spawn(function()
						while getgenv().VisualDesyncEnabled do
							if getgenv().VisualDesyncActive then
								local char = LocalPlayer.Character
								if char then
									char.Archivable = true
									local clone = char:Clone()
									if clone then
										VisualCloneFolder:ClearAllChildren()
										clone.Parent = VisualCloneFolder
										clone.Name = "Visual_Desync"

										for _, part in pairs(clone:GetDescendants()) do
											if part:IsA("BasePart") then
												part.Anchored = true
												part.CanCollide = false
												part.Massless = true
												if part.Name == "HumanoidRootPart" then 
													part.Transparency = 1 
												else
													part.Material = Enum.Material.ForceField
													part.Color = getgenv().VisualDesyncColor or Color3.fromRGB(255, 255, 255)
												end
											elseif part:IsA("Script") or part:IsA("LocalScript") or part:IsA("Decal") or part:IsA("Sound") then
												part:Destroy()
											end
										end
									end
								end
							else
								VisualCloneFolder:ClearAllChildren()
							end
							task.wait(0.05) 
						end
					end)
				end
			end
		})
		VisualDesyncTgl:Keybind({
			Name = "Visual Keybind",
			Default = Enum.KeyCode.V,
			Mode = "Toggle",
			Flag = "VisualKeybind",
			Callback = function(v)
				getgenv().VisualDesyncActive = v
			end
		})
		VisualDesyncTgl:Colorpicker({
			Name = "Visual Color",
			Default = Color3.fromRGB(255, 255, 255),
			Flag = "VisualDesyncColor",
			Callback = function(v) getgenv().VisualDesyncColor = v end
		})
	end

	do
		local AL_Toggle = AntiLockSection:Toggle({
			Name = "Enable Anti-Lock",
			Default = false,
			Flag = "AntiLockEnabled",
			Callback = function(v) 
				getgenv().AntiLockEnabled = v 
				if v then
					task.spawn(function()
						while getgenv().AntiLockEnabled do
							if getgenv().AntiLockActive then
								local char = LocalPlayer.Character
								local hrp = char and char:FindFirstChild("HumanoidRootPart")
								if hrp then
									local mode = getgenv().AntiLockMode
									if mode == "Underground" then
										hrp.CFrame = hrp.CFrame + Vector3.new(0, -2, 0)
										RunService.RenderStepped:Wait()
										hrp.CFrame = hrp.CFrame + Vector3.new(0, 2, 0)
									elseif mode == "Sky" then
										hrp.CFrame = hrp.CFrame + Vector3.new(0, 2, 0)
										RunService.RenderStepped:Wait()
										hrp.CFrame = hrp.CFrame + Vector3.new(0, -2, 0)
									elseif mode == "Reverse" then
										local oldCF = hrp.CFrame
										hrp.CFrame = CFrame.new(hrp.Position, hrp.Position - hrp.CFrame.LookVector)
										RunService.RenderStepped:Wait()
										hrp.CFrame = oldCF
									elseif mode == "Jitter" then
										hrp.Velocity = Vector3.new(math.random(-100, 100), math.random(-100, 100), math.random(-100, 100))
									end
								end
							end
							RunService.Heartbeat:Wait()
						end
					end)
				end
			end
		})
		AL_Toggle:Keybind({
			Name = "Anti-Lock Keybind",
			Default = Enum.KeyCode.Z,
			Mode = "Toggle",
			Flag = "AntiLockKeybind",
			Callback = function(v) getgenv().AntiLockActive = v end
		})
		AntiLockSection:Dropdown({
			Name = "Anti-Lock Mode",
			Items = {"Underground", "Reverse", "Sky", "Jitter"},
			Default = "Underground",
			Flag = "AntiLockMode",
			Callback = function(v) getgenv().AntiLockMode = v end
		})
	end

	local MovementSection = PlayersSubPage:Section({ Name = "Movement", Side = 2 }) do
		local SpeedTgl = MovementSection:Toggle({
			Name = "CFrame Speed",
			Default = false,
			Flag = "CFrameSpeedEnabled",
			Callback = function(v) 
				getgenv().CFrameSpeedEnabled = v 
				if v then
					task.spawn(function()
						while getgenv().CFrameSpeedEnabled do
							if getgenv().CFrameActive then
								local char = LocalPlayer.Character
								local hrp = char and char:FindFirstChild("HumanoidRootPart")
								if hrp then
									hrp.CFrame = hrp.CFrame + hrp.CFrame.LookVector * (getgenv().CFrameValue or 1)
								end
							end
							task.wait()
						end
					end)
				end
			end
		})
		SpeedTgl:Keybind({
			Name = "CFrame Key",
			Default = Enum.KeyCode.G,
			Mode = "Toggle",
			Flag = "CFrameKey",
			Callback = function(v) getgenv().CFrameActive = v end
		})
		MovementSection:Slider({
			Name = "CFrame Value",
			Min = 0.1, Max = 5, Default = 1,
			Flag = "CFrameValue",
			Callback = function(v) getgenv().CFrameValue = v end
		})
		local FlyTgl = MovementSection:Toggle({
			Name = "Enable Fly",
			Default = false,
			Flag = "FlyEnabled",
			Callback = function(v) 
				getgenv().FlyEnabled = v 
				if v then
					task.spawn(function()
						local bv = Instance.new("BodyVelocity")
						bv.MaxForce = Vector3.new(1e9, 1e9, 1e9)
						bv.Velocity = Vector3.zero

						while getgenv().FlyEnabled do
							local char = LocalPlayer.Character
							local hrp = char and char:FindFirstChild("HumanoidRootPart")
							local hum = char and char:FindFirstChild("Humanoid")

							if hrp and hum and getgenv().FlyActive then
								if not hrp:FindFirstChild("FlyVelocity") then
									bv = bv:Clone()
									bv.Name = "FlyVelocity"
									bv.Parent = hrp
									hum.PlatformStand = true
								end

								local camCF = workspace.CurrentCamera.CFrame
								local moveDir = Vector3.zero

								if UserInputService:IsKeyDown(Enum.KeyCode.W) then moveDir = moveDir + camCF.LookVector end
								if UserInputService:IsKeyDown(Enum.KeyCode.S) then moveDir = moveDir - camCF.LookVector end
								if UserInputService:IsKeyDown(Enum.KeyCode.A) then moveDir = moveDir - camCF.RightVector end
								if UserInputService:IsKeyDown(Enum.KeyCode.D) then moveDir = moveDir + MULTIPLIER.RightVector end
								if UserInputService:IsKeyDown(Enum.KeyCode.Space) then moveDir = moveDir + Vector3.new(0, 1, 0) end
								if UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then moveDir = moveDir - Vector3.new(0, 1, 0) end

								hrp.Velocity = moveDir * (getgenv().FlySpeed * 50)
								bv.Velocity = moveDir * (getgenv().FlySpeed * 50)
							else
								if hrp and hrp:FindFirstChild("FlyVelocity") then
									hrp.FlyVelocity:Destroy()
									hum.PlatformStand = false
								end
							end
							RunService.RenderStepped:Wait()
						end
						local char = LocalPlayer.Character
						local hrp = char and char:FindFirstChild("HumanoidRootPart")
						if hrp and hrp:FindFirstChild("FlyVelocity") then
							hrp.FlyVelocity:Destroy()
							char.Humanoid.PlatformStand = false
						end
					end)
				end
			end
		})
		FlyTgl:Keybind({
			Name = "Fly Key",
			Default = Enum.KeyCode.F,
			Mode = "Toggle",
			Flag = "FlyKey",
			Callback = function(v) getgenv().FlyActive = v end
		})
		MovementSection:Slider({
			Name = "Fly Speed",
			Min = 1, Max = 10, Default = 2,
			Flag = "FlySpeed",
			Callback = function(v) getgenv().FlySpeed = v end
		})
		MovementSection:Toggle({
			Name = "Noclip",
			Default = false,
			Flag = "NoclipEnabled",
			Callback = function(v)
				getgenv().NoclipEnabled = v
				if v then
					NoclipConnection = RunService.Stepped:Connect(function()
						if not getgenv().NoclipEnabled then return end
						local character = LocalPlayer.Character
						if character then
							for _, part in ipairs(character:GetDescendants()) do
								if part:IsA("BasePart") and part.CanCollide then part.CanCollide = false end
							end
						end
					end)
				elseif NoclipConnection then
					NoclipConnection:Disconnect()
					NoclipConnection = nil
				end
			end
		})
	end
end

local ESPSubPage = VisualsPage:SubPage({ Name = "Esp", Columns = 2 }) do
	local ESPSection = ESPSubPage:Section({ Name = "Player ESP", Side = 1 }) do
		ESPSection:Toggle({
			Name = "Enable Boxes",
			Default = false,
			Flag = "EspBoxes",
			Callback = function(v) getgenv().EspBoxes = v end
		}):Colorpicker({
			Name = "Box Color",
			Default = Color3.fromRGB(255, 255, 255),
			Flag = "EspBoxColor",
			Callback = function(v) getgenv().EspBoxColor = v end
		})

		ESPSection:Toggle({
			Name = "Enable Health Bar",
			Default = false,
			Flag = "EspHealthBar",
			Callback = function(v) getgenv().EspHealthBar = v end
		})

		ESPSection:Toggle({
			Name = "Show Tracers",
			Default = false,
			Flag = "EspTracers",
			Callback = function(v) getgenv().EspTracers = v end
		}):Colorpicker({
			Name = "Tracer Color",
			Default = Color3.fromRGB(255, 255, 255),
			Flag = "EspTracerColor",
			Callback = function(v) getgenv().EspTracerColor = v end
		})

		ESPSection:Toggle({
			Name = "Show Skeleton",
			Default = false,
			Flag = "EspSkeletons",
			Callback = function(v) getgenv().EspSkeletons = v end
		}):Colorpicker({
			Name = "Skeleton Color",
			Default = Color3.fromRGB(255, 255, 255),
			Flag = "EspSkeletonColor",
			Callback = function(v) getgenv().EspSkeletonColor = v end
		})

		ESPSection:Toggle({
			Name = "Show Info",
			Default = false,
			Flag = "EspInfo",
			Callback = function(v) getgenv().EspInfo = v end
		}):Colorpicker({
			Name = "Info Color",
			Default = Color3.fromRGB(255, 255, 255),
			Flag = "EspInfoColor",
			Callback = function(v) getgenv().EspInfoColor = v end
		})
	end

	local ExtraSection = ESPSubPage:Section({ Name = "Silent Aim Visuals", Side = 1 }) do
		ExtraSection:Toggle({
			Name = "Target Head Dot",
			Default = false,
			Flag = "EspHeadDot",
			Callback = function(v) getgenv().EspHeadDot = v end
		}):Colorpicker({
			Name = "Dot Color",
			Default = Color3.fromRGB(255, 255, 255),
			Flag = "EspHeadDotColor",
			Callback = function(v) getgenv().EspHeadDotColor = v end
		})

		ExtraSection:Slider({
			Name = "Dot Radius",
			Min = 1, Max = 50, Default = 5,
			Flag = "EspHeadDotRadius",
			Callback = function(v) getgenv().EspHeadDotRadius = v end
		})

		ExtraSection:Toggle({
			Name = "Target Lines",
			Default = false,
			Flag = "EspLookLines",
			Callback = function(v) getgenv().EspLookLines = v end
		}):Colorpicker({
			Name = "Line Color",
			Default = Color3.fromRGB(255, 255, 255),
			Flag = "EspLookLineColor",
			Callback = function(v) getgenv().EspLookLineColor = v end
		})

		ExtraSection:Slider({
			Name = "Line Thickness",
			Min = 1, Max = 10, Default = 1,
			Flag = "EspLookLineThickness",
			Callback = function(v) getgenv().EspLookLineThickness = v end
		})

		local ChamToggle = ExtraSection:Toggle({
			Name = "Target Chams",
			Default = false,
			Flag = "EspChams",
			Callback = function(v) getgenv().EspChams = v end
		})

		ChamToggle:Colorpicker({
			Name = "Fill Color",
			Default = Color3.fromRGB(255, 255, 255),
			Flag = "EspChamsColor",
			Callback = function(v) getgenv().EspChamsColor = v end
		})

		ExtraSection:Toggle({
			Name = "Cham Outline",
			Default = false,
			Flag = "EspChamsOutline",
			Callback = function(v) getgenv().EspChamsOutline = v end
		}):Colorpicker({
			Name = "Outline Color",
			Default = Color3.fromRGB(255, 255, 255),
			Flag = "EspChamsOutlineColor",
			Callback = function(v) getgenv().EspChamsOutlineColor = v end
		})
	end

	local VisualsSection = ESPSubPage:Section({ Name = "Weapon Visuals", Side = 2 }) do
		VisualsSection:Toggle({
			Name = "Bullet Tracers",
			Default = false,
			Flag = "BulletTracers",
			Callback = function(v) getgenv().BulletTracers = v end
		}):Colorpicker({
			Name = "Tracer Color",
			Default = Color3.fromRGB(255, 255, 255),
			Flag = "BulletTracerColor",
			Callback = function(v) getgenv().BulletTracerColor = v end
		})

		VisualsSection:Toggle({
			Name = "Bullet Impacts",
			Default = false,
			Flag = "BulletImpacts",
			Callback = function(v) getgenv().BulletImpacts = v end
		}):Colorpicker({
			Name = "Impact Color",
			Default = Color3.fromRGB(255, 255, 255),
			Flag = "BulletImpactColor",
			Callback = function(v) getgenv().BulletImpactColor = v end
		})

		VisualsSection:Slider({
			Name = "Visual Duration",
			Min = 1, Max = 10, Default = 3,
			Flag = "VisualDuration",
			Callback = function(v) getgenv().VisualDuration = v end
		})
	end

	local ChecksSection = ESPSubPage:Section({ Name = "ESP Filters", Side = 2 }) do
		ChecksSection:Toggle({
			Name = "Team Check",
			Default = false,
			Flag = "EspTeamCheck",
			Callback = function(v) getgenv().EspTeamCheck = v end
		})

		ChecksSection:Toggle({
			Name = "Friend Check",
			Default = false,
			Flag = "EspFriendCheck",
			Callback = function(v) getgenv().EspFriendCheck = v end
		})
	end

	local function CreateBeam(startPos, endPos)
		local part = Instance.new("Part")
		part.Size, part.Transparency, part.CanCollide, part.Anchored = Vector3.zero, 1, false, true
		part.CFrame = CFrame.new(startPos)
		part.Parent = workspace.Terrain

		local a0, a1 = Instance.new("Attachment", part), Instance.new("Attachment", part)
		a1.WorldPosition = endPos

		local beam = Instance.new("Beam", part)
		beam.Attachment0, beam.Attachment1 = a0, a1
		beam.Color = ColorSequence.new(getgenv().BulletTracerColor or Color3.new(1,1,1))
		beam.Width0, beam.Width1, beam.LightEmission, beam.FaceCamera = 0.1, 0.1, 1, true

		game:GetService("Debris"):AddItem(part, getgenv().VisualDuration or 3)
	end

	local function CreateImpact(pos)
		local part = Instance.new("Part")
		part.Size = Vector3.new(0.2, 0.2, 0.2)
		part.Color = getgenv().BulletImpactColor or Color3.new(1, 1, 1)
		part.Material, part.CanCollide, part.Anchored = Enum.Material.Neon, false, true
		part.CFrame = CFrame.new(pos)
		part.Parent = workspace.Terrain

		game:GetService("Debris"):AddItem(part, getgenv().VisualDuration or 3)
	end

	local validNames = { Bullet = true, BULLET_RAYS = true, GunBeam = true, gb = true }

	workspace.DescendantAdded:Connect(function(obj)
		if not (getgenv().BulletTracers or getgenv().BulletImpacts) then return end
		if not validNames[obj.Name] then return end

		task.defer(function()
			if not obj or not obj.Parent then return end
			local beam = obj:IsA("Beam") and obj or obj:FindFirstChildOfClass("Beam")

			if not beam then
				for i = 1, 5 do
					task.wait()
					if not obj or not obj.Parent then break end
					beam = obj:FindFirstChildOfClass("Beam")
					if beam then break end
				end
			end

			if beam and beam.Attachment0 and beam.Attachment1 then
				local s, f = beam.Attachment0.WorldPosition, beam.Attachment1.WorldPosition
				if (s - f).Magnitude > 0.1 then
					if getgenv().BulletTracers then CreateBeam(s, f) end
					if getgenv().BulletImpacts then CreateImpact(f) end
				end
			end
		end)
	end)
end

local function CreateESP(Player)
	local Draw = function(obj, props)
		local new = Drawing.new(obj)
		for i, v in pairs(props) do new[i] = v end
		return new
	end

	local Box = Draw("Square", { Thickness = 1, Filled = false, Visible = false })
	local HealthBarBack = Draw("Square", { Filled = true, Color = Color3.new(0, 0, 0), Visible = false, Transparency = 0.5 })
	local HealthBar = Draw("Square", { Filled = true, Visible = false })
	local NameTag = Draw("Text", { Size = 13, Center = true, Outline = true, Font = 2, Visible = false })
	local InfoTag = Draw("Text", { Size = 13, Center = true, Outline = true, Font = 2, Visible = false })
	local Tracer = Draw("Line", { Thickness = 1, Visible = false })
	local HeadDot = Draw("Circle", { Thickness = 1, Filled = true, Visible = false })
	local LookLine = Draw("Line", { Thickness = 1, Visible = false })

	local Skeleton = {
		Spine = Draw("Line", { Thickness = 1, Visible = false }),
		LeftArm = Draw("Line", { Thickness = 1, Visible = false }),
		RightArm = Draw("Line", { Thickness = 1, Visible = false }),
		LeftLeg = Draw("Line", { Thickness = 1, Visible = false }),
		RightLeg = Draw("Line", { Thickness = 1, Visible = false })
	}

	local Connection
	Connection = RunService.RenderStepped:Connect(function()
		local Char = Player.Character
		local HRP = Char and Char:FindFirstChild("HumanoidRootPart")
		local Hum = Char and Char:FindFirstChildOfClass("Humanoid")
		local Head = Char and Char:FindFirstChild("Head")
		local MousePos = UserInputService:GetMouseLocation()

		if Player ~= LocalPlayer and HRP and Hum and Hum.Health > 0 then
			local IsTeam = getgenv().EspTeamCheck and Player.Team == LocalPlayer.Team
			local IsFriend = getgenv().EspFriendCheck and LocalPlayer:IsFriendsWith(Player.UserId)

			if not IsTeam and not IsFriend then
				local Pos, OnScreen = Camera:WorldToViewportPoint(HRP.Position)
				if OnScreen then
					local SizeX, SizeY = 2200 / Pos.Z, 3200 / Pos.Z
					local BoxPos = Vector2.new(Pos.X - SizeX / 2, Pos.Y - SizeY / 2)

					Box.Visible = getgenv().EspBoxes or false
					Box.Size = Vector2.new(SizeX, SizeY)
					Box.Position = BoxPos
					Box.Color = getgenv().EspBoxColor or Color3.new(1, 1, 1)

					local HealthPerc = Hum.Health / Hum.MaxHealth
					local BarHeight = (SizeY - 2) * HealthPerc
					HealthBarBack.Visible = getgenv().EspHealthBar or false
					HealthBarBack.Size = Vector2.new(4, SizeY)
					HealthBarBack.Position = Vector2.new(BoxPos.X - 6, BoxPos.Y)
					HealthBar.Visible = HealthBarBack.Visible
					HealthBar.Size = Vector2.new(2, BarHeight)
					HealthBar.Position = Vector2.new(BoxPos.X - 5, BoxPos.Y + (SizeY - BarHeight) - 1)
					HealthBar.Color = Color3.fromRGB(255, 0, 0):Lerp(Color3.fromRGB(0, 255, 0), HealthPerc)

					NameTag.Visible = getgenv().EspInfo or false
					NameTag.Text = Player.Name:lower()
					NameTag.Position = Vector2.new(Pos.X, BoxPos.Y - 16)
					NameTag.Color = getgenv().EspInfoColor or Color3.new(1, 1, 1)

					local Dist = math.floor((Camera.CFrame.Position - HRP.Position).Magnitude)
					local Tool = Char:FindFirstChildOfClass("Tool") and Char:FindFirstChildOfClass("Tool").Name or "none"
					InfoTag.Visible = NameTag.Visible
					InfoTag.Text = string.format("%dm\n[%s]", Dist, Tool:lower())
					InfoTag.Position = Vector2.new(Pos.X, BoxPos.Y + SizeY + 2)
					InfoTag.Color = Color3.new(1, 1, 1)

					Tracer.Visible = getgenv().EspTracers or false
					Tracer.From = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y)
					Tracer.To = Vector2.new(Pos.X, BoxPos.Y + SizeY)
					Tracer.Color = getgenv().EspTracerColor or Color3.new(1, 1, 1)

					local IsTarget = (_G.LockedSilentTarget == Player and getgenv().SilentAimEnabled and getgenv().SilentAimActive)
					if IsTarget then
						local TargetPart = Char:FindFirstChild(getgenv().SilentPart or "HumanoidRootPart") or Head
						local TPos, TOn = Camera:WorldToViewportPoint(TargetPart.Position)

						HeadDot.Visible = getgenv().EspHeadDot or false
						HeadDot.Radius = getgenv().EspHeadDotRadius or 5
						HeadDot.Position = Vector2.new(TPos.X, TPos.Y)
						HeadDot.Color = getgenv().EspHeadDotColor or Color3.new(1, 1, 1)

						LookLine.Visible = getgenv().EspLookLines or false
						LookLine.From = MousePos
						LookLine.To = Vector2.new(TPos.X, TPos.Y)
						LookLine.Color = getgenv().EspLookLineColor or Color3.new(1, 1, 1)
						LookLine.Thickness = getgenv().EspLookLineThickness or 1

						if getgenv().EspChams then
							local Highlight = Char:FindFirstChild("GeminiHighlight") or Instance.new("Highlight")
							Highlight.Name = "GeminiHighlight"
							Highlight.Parent = Char
							Highlight.Enabled = true
							Highlight.FillColor = getgenv().EspChamsColor or Color3.new(1, 1, 1)
							Highlight.OutlineTransparency = getgenv().EspChamsOutline and 0 or 1
							Highlight.OutlineColor = getgenv().EspChamsOutlineColor or Color3.new(1, 1, 1)
						end
					else
						HeadDot.Visible, LookLine.Visible = false, false
						if Char:FindFirstChild("GeminiHighlight") then Char.GeminiHighlight.Enabled = false end
					end

					if getgenv().EspSkeletons then
						local function GetVPoint(name)
							local p = Char:FindFirstChild(name)
							if p then
								local v, o = Camera:WorldToViewportPoint(p.Position)
								return o and Vector2.new(v.X, v.Y)
							end
						end
						local HeadP, Torso = GetVPoint("Head"), GetVPoint("UpperTorso") or GetVPoint("Torso")
						local LA, RA = GetVPoint("LeftUpperArm") or GetVPoint("Left Arm"), GetVPoint("RightUpperArm") or GetVPoint("Right Arm")
						local LL, RL = GetVPoint("LeftUpperLeg") or GetVPoint("Left Leg"), GetVPoint("RightUpperLeg") or GetVPoint("Right Leg")

						if HeadP and Torso then
							Skeleton.Spine.Visible = true
							Skeleton.Spine.From, Skeleton.Spine.To = HeadP, Torso
							Skeleton.LeftArm.Visible, Skeleton.LeftArm.From, Skeleton.LeftArm.To = (LA and true or false), Torso, LA
							Skeleton.RightArm.Visible, Skeleton.RightArm.From, Skeleton.RightArm.To = (RA and true or false), Torso, RA
							Skeleton.LeftLeg.Visible, Skeleton.LeftLeg.From, Skeleton.LeftLeg.To = (LL and true or false), Torso, LL
							Skeleton.RightLeg.Visible, Skeleton.RightLeg.From, Skeleton.RightLeg.To = (RL and true or false), Torso, RL
							for _, l in pairs(Skeleton) do l.Color = getgenv().EspSkeletonColor or Color3.new(1, 1, 1) end
						else
							for _, l in pairs(Skeleton) do l.Visible = false end
						end
					else
						for _, l in pairs(Skeleton) do l.Visible = false end
					end
					return
				end
			end
		end
		Box.Visible, HealthBar.Visible, HealthBarBack.Visible, NameTag.Visible, InfoTag.Visible, Tracer.Visible, HeadDot.Visible, LookLine.Visible = false, false, false, false, false, false, false, false
		for _, l in pairs(Skeleton) do l.Visible = false end
		if Char and Char:FindFirstChild("GeminiHighlight") then Char.GeminiHighlight.Enabled = false end
		if not Player.Parent then
			Box:Remove() HealthBar:Remove() HealthBarBack:Remove() NameTag:Remove() InfoTag:Remove() Tracer:Remove() HeadDot:Remove() LookLine:Remove()
			for _, l in pairs(Skeleton) do l:Remove() end
			Connection:Disconnect() 
		end
	end)
end

for _, v in pairs(Players:GetPlayers()) do CreateESP(v) end
Players.PlayerAdded:Connect(CreateESP)

local WorldSubPage = VisualsPage:SubPage({ Name = "World", Columns = 2 })
local LightingSection = WorldSubPage:Section({ Name = "Lighting Settings", Side = 1 })
local CharmsSection = WorldSubPage:Section({ Name = "Charms", Side = 1 })
local EnvironmentSection = WorldSubPage:Section({ Name = "Time & Sky", Side = 2 })

local originalAmbient = Lighting.Ambient
local originalOutdoorAmbient = Lighting.OutdoorAmbient
local originalFogColor = Lighting.FogColor
local originalFogEnd = Lighting.FogEnd
local originalClockTime = Lighting.ClockTime
local originalExposure = Lighting.ExposureCompensation
local originalAtmosphere = {Density = 0, Color = Color3.new(1,1,1), Decay = Color3.new(1,1,1)}

local atm = Lighting:FindFirstChildOfClass("Atmosphere")
if atm then
	originalAtmosphere.Density = atm.Density
	originalAtmosphere.Color = atm.Color
	originalAtmosphere.Decay = atm.Decay
end

local charmsEnabled, fillEnabled = false, false
local ambientEnabled, fogEnabled, timeEnabled, exposureEnabled, skyEnabled = false, false, false, false, false

local currentAmbient = Color3.fromRGB(127, 127, 127)
local currentFogColor = Color3.fromRGB(192, 192, 192)
local currentFogEnd = 1000
local currentClockTime = 12
local currentExposure = 0
local currentCharmMaterial = Enum.Material.ForceField
local currentFillColor = Color3.fromRGB(255, 255, 0)
local currentSkyTheme = "Purple Nebula"

local originalProps = {}
local originalSky = nil

local SkyboxData = {
	["Purple Nebula"] = {
		Bk = "rbxassetid://15983968922", Dn = "rbxassetid://15983966825", Ft = "rbxassetid://15983965025", 
		Lf = "rbxassetid://15983967420", Rt = "rbxassetid://15983966246", Up = "rbxassetid://15983964246"
	},
	["Purple"] = {
		Bk = "rbxassetid://570557514", Dn = "rbxassetid://570557775", Ft = "rbxassetid://570557559", 
		Lf = "rbxassetid://570557620", Rt = "rbxassetid://570557672", Up = "rbxassetid://570557727"
	}
}

local function updateAmbient()
	if ambientEnabled then
		Lighting.Ambient = currentAmbient
		Lighting.OutdoorAmbient = currentAmbient
	else
		Lighting.Ambient = originalAmbient
		Lighting.OutdoorAmbient = originalOutdoorAmbient
	end
end

local function updateFog()
	if fogEnabled then
		Lighting.FogColor = currentFogColor
		Lighting.FogEnd = currentFogEnd
		local atmosphere = Lighting:FindFirstChildOfClass("Atmosphere")
		if atmosphere then
			atmosphere.Color = currentFogColor
			atmosphere.Decay = currentFogColor
			atmosphere.Density = 1 - (currentFogEnd / 10000)
		end
	else
		Lighting.FogColor = originalFogColor
		Lighting.FogEnd = originalFogEnd
		local atmosphere = Lighting:FindFirstChildOfClass("Atmosphere")
		if atmosphere then
			atmosphere.Color = originalAtmosphere.Color
			atmosphere.Decay = originalAtmosphere.Decay
			atmosphere.Density = originalAtmosphere.Density
		end
	end
end

local function applySky(name, isEnabled)
	local sky = Lighting:FindFirstChildOfClass("Sky")
	if not originalSky and sky then
		originalSky = {
			Bk = sky.SkyboxBk, Dn = sky.SkyboxDn, Ft = sky.SkyboxFt,
			Lf = sky.SkyboxLf, Rt = sky.SkyboxRt, Up = sky.SkyboxUp
		}
	end

	if not sky then 
		sky = Instance.new("Sky", Lighting) 
	end

	local data = (isEnabled and name ~= "Default") and SkyboxData[name] or originalSky

	if data then
		sky.SkyboxBk = data.Bk or data.SkyboxBk
		sky.SkyboxDn = data.Dn or data.SkyboxDn
		sky.SkyboxFt = data.Ft or data.SkyboxFt
		sky.SkyboxLf = data.Lf or data.SkyboxLf
		sky.SkyboxRt = data.Rt or data.SkyboxRt
		sky.SkyboxUp = data.Up or data.SkyboxUp
	end
end

RunService.RenderStepped:Connect(function()
	if not charmsEnabled then return end
	for _, player in ipairs(Players:GetPlayers()) do
		if player ~= LocalPlayer and player.Character then
			for _, part in ipairs(player.Character:GetDescendants()) do
				if part:IsA("BasePart") then
					if not originalProps[part] then
						originalProps[part] = {Color = part.Color, Material = part.Material}
					end

					part.Material = currentCharmMaterial

					if fillEnabled then
						part.Color = currentFillColor
					else
						part.Color = originalProps[part].Color
					end
				end
			end
		end
	end
end)

CharmsSection:Toggle({
	Name = "Enable Charms",
	Default = false,
	Flag = "WorldCharmsEnabled",
	Callback = function(v)
		charmsEnabled = v
		if not v then
			for part, props in pairs(originalProps) do
				if part and part.Parent then
					part.Color = props.Color
					part.Material = props.Material
				end
			end
			table.clear(originalProps)
		end
	end
})

local fillTgl = CharmsSection:Toggle({
	Name = "Fill Color",
	Default = false,
	Flag = "WorldCharmsFill",
	Callback = function(v) 
		fillEnabled = v 
	end
})

fillTgl:Colorpicker({
	Default = Color3.fromRGB(255, 200, 60),
	Flag = "WorldCharmsFillCol",
	Callback = function(v) currentFillColor = v end
})

CharmsSection:Dropdown({
	Name = "Material",
	Items = {"ForceField", "Neon", "Glass", "Plastic"},
	Default = "ForceField",
	Flag = "WorldCharmsMat",
	Callback = function(v) currentCharmMaterial = Enum.Material[v] end
})

local ambientTgl = LightingSection:Toggle({
	Name = "Ambient Color",
	Default = false,
	Flag = "WorldAmbientEnabled",
	Callback = function(v) 
		ambientEnabled = v 
		updateAmbient()
	end
})

ambientTgl:Colorpicker({
	Default = Color3.fromRGB(127, 127, 127),
	Flag = "WorldAmbientCol",
	Callback = function(v)
		currentAmbient = v
		if ambientEnabled then
			updateAmbient()
		end
	end
})

local fogTgl = LightingSection:Toggle({
	Name = "Fog Customization",
	Default = false,
	Flag = "WorldFogEnabled",
	Callback = function(v) 
		fogEnabled = v 
		updateFog()
	end
})

fogTgl:Colorpicker({
	Default = Color3.fromRGB(192, 192, 192),
	Flag = "WorldFogCol",
	Callback = function(v)
		currentFogColor = v
		if fogEnabled then updateFog() end
	end
})

LightingSection:Slider({
	Name = "Fog Density",
	Min = 100, Max = 10000, Default = 10000,
	Flag = "WorldFogDensity",
	Callback = function(v)
		currentFogEnd = v
		if fogEnabled then updateFog() end
	end
})

EnvironmentSection:Toggle({
	Name = "Custom Time",
	Default = false,
	Flag = "WorldTimeEnabled",
	Callback = function(v) 
		timeEnabled = v 
		Lighting.ClockTime = v and currentClockTime or originalClockTime
	end
})

EnvironmentSection:Slider({
	Name = "Time of Day",
	Min = 0, Max = 24, Default = 12,
	Flag = "WorldTimeValue",
	Callback = function(v)
		currentClockTime = v
		if timeEnabled then Lighting.ClockTime = v end
	end
})

EnvironmentSection:Toggle({
	Name = "Enable Custom Sky",
	Default = false,
	Flag = "WorldSkyEnabled",
	Callback = function(v)
		skyEnabled = v
		applySky(currentSkyTheme, v)
	end
})

EnvironmentSection:Dropdown({
	Name = "Skybox Theme",
	Items = {"Default", "Purple Nebula", "Purple"},
	Default = "Purple Nebula",
	Flag = "WorldSkyTheme",
	Callback = function(v)
		currentSkyTheme = v
		if skyEnabled then applySky(v, true) end
	end
})

EnvironmentSection:Toggle({
	Name = "Custom Exposure",
	Default = false,
	Flag = "WorldExposureEnabled",
	Callback = function(v) 
		exposureEnabled = v 
		Lighting.ExposureCompensation = v and currentExposure or originalExposure
	end
})

EnvironmentSection:Slider({
	Name = "Exposure Level",
	Min = -5, Max = 5, Default = 0,
	Flag = "WorldExposureValue",
	Callback = function(v)
		currentExposure = v
		if exposureEnabled then Lighting.ExposureCompensation = v end
	end
})

local SelfVisualsSection = WorldSubPage:Section({ Name = "Self Visuals", Side = 2 }) do
	local Attachment = Instance.new("Attachment")
	local CurrentAuraColor = Color3.fromRGB(255, 200, 60)
	local Emitters = {}

	local ParticleData = {
		{
			Name = "Healing Wave 1",
			Texture = "rbxassetid://8047533775",
			Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0, 1), NumberSequenceKeypoint.new(0.1702454, 0.7), NumberSequenceKeypoint.new(0.2254601, 0.03125), NumberSequenceKeypoint.new(0.2852761, 0), NumberSequenceKeypoint.new(0.702454, 0), NumberSequenceKeypoint.new(0.8374233, 0.9125), NumberSequenceKeypoint.new(1, 1)}),
			Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 3.0624998), NumberSequenceKeypoint.new(0.6420546, 1.9999999), NumberSequenceKeypoint.new(1, 0.7499999)}),
			Speed = NumberRange.new(3, 6),
			RotSpeed = NumberRange.new(200, 400),
			Orientation = Enum.ParticleOrientation.VelocityPerpendicular,
			LockedToPart = true
		},
		{
			Name = "Healing Wave 2",
			Texture = "rbxassetid://8047796070",
			Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0, 1), NumberSequenceKeypoint.new(0.2254601, 0.03125), NumberSequenceKeypoint.new(0.6288344, 0.25625), NumberSequenceKeypoint.new(0.8374233, 0.9125), NumberSequenceKeypoint.new(1, 1)}),
			Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 3.125), NumberSequenceKeypoint.new(0.4165329, 1.3749999), NumberSequenceKeypoint.new(1, 0.9375)}),
			Speed = NumberRange.new(3, 5),
			RotSpeed = NumberRange.new(100, 300),
			Orientation = Enum.ParticleOrientation.VelocityPerpendicular,
			LockedToPart = true,
			LightEmission = 1
		},
		{
			Name = "Sparks",
			Texture = "rbxassetid://8611887361",
			Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 0), NumberSequenceKeypoint.new(0.14687, 0.4375), NumberSequenceKeypoint.new(1, 0)}),
			Speed = NumberRange.new(5, 15),
			Acceleration = Vector3.new(0, 3, 0),
			Drag = 3,
			ZOffset = -1,
			Orientation = Enum.ParticleOrientation.VelocityParallel,
			SpreadAngle = Vector2.new(180, -180),
			LightEmission = 1
		},
		{
			Name = "Star Sparks",
			Texture = "rbxassetid://8611887703",
			Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 0), NumberSequenceKeypoint.new(0.1492777, 0.6875), NumberSequenceKeypoint.new(1, 0)}),
			Speed = NumberRange.new(5, 10),
			Acceleration = Vector3.new(0, 3, 0),
			Drag = 3,
			ZOffset = 2,
			SpreadAngle = Vector2.new(180, -180),
			LightEmission = 1
		}
	}

	for _, data in ipairs(ParticleData) do
		local P = Instance.new("ParticleEmitter")
		P.Name = data.Name
		P.Texture = data.Texture
		P.Lifetime = data.Lifetime or NumberRange.new(1.5)
		P.Rate = data.Rate or 20
		P.Brightness = 10
		P.Color = ColorSequence.new(CurrentAuraColor)
		P.Enabled = false

		for prop, val in pairs(data) do
			if prop ~= "Name" then P[prop] = val end
		end

		P.Parent = Attachment
		table.insert(Emitters, P)
	end

	local AuraToggle = SelfVisualsSection:Toggle({
		Name = "Aura",
		Default = false,
		Flag = "VisualsAuraEnabled",
		Callback = function(v)
			local torso = LocalPlayer.Character and (LocalPlayer.Character:FindFirstChild("LowerTorso") or LocalPlayer.Character:FindFirstChild("Torso"))
			Attachment.Parent = v and torso or nil
			for _, p in ipairs(Emitters) do p.Enabled = v end
		end
	})

	AuraToggle:Colorpicker({
		Name = "Aura Color",
		Default = CurrentAuraColor,
		Flag = "VisualsAuraColor",
		Callback = function(v)
			local cs = ColorSequence.new(v)
			for _, p in ipairs(Emitters) do p.Color = cs end
		end
	})
end

Library:CreateSettingsPage(Window, Watermark, KeybindList)
Library:Notification("Loaded", "Archangel", 5)

return Library
